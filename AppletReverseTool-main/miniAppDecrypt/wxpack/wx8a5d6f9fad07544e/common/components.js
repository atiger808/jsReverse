var t=require("../@babel/runtime/helpers/interopRequireDefault")(require("../@babel/runtime/helpers/typeof"));(global.webpackJsonpMpvue=global.webpackJsonpMpvue||[]).push([["common/components"],{1018:function(t,e){},1024:function(t,e){},104:function(t,e,r){var n=r(8),o=r.n(n),i=void 0,a=void 0,s=void 0,c=void 0;e.a={props:{customSelector:{type:Object|String},showAnimation:{type:Boolean,default:!0},animationStyle:{type:String,validator:function(t){return["slide","popup"].indexOf(t)>-1},default:"popup"}},data:function(){return{shown:!1,showing:!1,hidden:!0,hiding:!1}},computed:{animationSelector:function(){return"slide"===this.animationStyle?"wr_modal_Slide":""}},methods:{showModal:function(){var t=this;return new o.a((function(e,r){t.showing?e():(a&&clearTimeout(a),t.shown=!1,t.hidden=!1,t.hiding=!1,t.showing=!0,t.$refs.mask&&t.$refs.mask.showMask(),i=e,a=setTimeout((function(){t.shown||e()}),1e3))}))},closeModal:function(){var t=this;return new o.a((function(e,r){t.showing||!t.hidden?(c&&clearTimeout(c),t.shown=!1,t.hidden=!1,t.hiding=!0,t.showing=!1,t.$refs.mask&&t.$refs.mask.closeMask(),s=e,c=setTimeout((function(){t.hidden||e()}),1e3)):e()}))},handleMaskClick:function(){this.needsCloseButton&&this.closeModal()},handleAnimationEnd:function(){this.showing?(i(),this.shown=!0):this.hiding&&(s(),this.hidden=!0,this.hiding=!1)}}}},1041:function(t,e){},105:function(t,e,r){var n={components:{Avatar:r(24).default},props:{member:{type:Object,required:!0},size:{type:Number,default:44}},methods:{handleClickMemberDetail:function(){return this.member&&this.member.userVid&&wx.navigateTo({url:"/pages/profile/main?userVid="+this.member.userVid}),!1}}},o=r(7)(n,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.member.isCaptain?r("Avatar",{attrs:{src:t.member.avatar,alt:t.member.name,size:t.size,clickable:!0,"custom-class":"wr_infiniteLotteryAvatar wr_infiniteLotteryAvatar_Captain",eventid:"0_2",mpcomid:"3"},on:{click:function(e){e.stopPropagation(),t.handleClickMemberDetail(e)}}}):t.member.isNewUser?r("Avatar",{attrs:{src:t.member.avatar,alt:t.member.name,clickable:!0,"custom-class":"wr_infiniteLotteryAvatar wr_infiniteLotteryAvatar_New",eventid:"0_0",mpcomid:"0"},on:{click:function(e){e.stopPropagation(),t.handleClickMemberDetail(e)}}}):t.member.userVid?r("Avatar",{attrs:{src:t.member.avatar,alt:t.member.name,size:t.size,clickable:!0,"custom-class":"wr_infiniteLotteryAvatar",eventid:"0_1",mpcomid:"2"},on:{click:function(e){e.stopPropagation(),t.handleClickMemberDetail(e)}}}):r("Avatar",{attrs:{src:t.member.avatar,alt:t.member.name,size:t.size,"custom-class":"wr_infiniteLotteryAvatar wr_infiniteLotteryAvatar_Empty",mpcomid:"1"}})},staticRenderFns:[]},(function(t){r(862)}),null,null);e.a=o.exports},1053:function(t,e){},1109:function(t,e){},115:function(t,e,r){r.r(e);var n=r(314),o={props:{customSelector:{type:[String,Object],default:""},content:{type:String,required:!0},expandable:{type:Boolean},expanded:{type:Boolean},buttonText:{type:String,default:"展开"},type:{type:String,default:""}},data:function(){return{size:"1.25em",availableIcons:["[微笑]","[撇嘴]","[色]","[发呆]","[得意]","[流泪]","[害羞]","[闭嘴]","[睡]","[大哭]","[尴尬]","[发怒]","[调皮]","[呲牙]","[惊讶]","[难过]","[酷]","[冷汗]","[抓狂]","[吐]","[偷笑]","[可爱]","[白眼]","[傲慢]","[饥饿]","[困]","[惊恐]","[流汗]","[憨笑]","[大兵]","[奋斗]","[咒骂]","[疑问]","[嘘]","[晕]","[折磨]","[衰]","[骷髅]","[敲打]","[再见]","[擦汗]","[抠鼻]","[鼓掌]","[糗大了]","[坏笑]","[左哼哼]","[右哼哼]","[哈欠]","[鄙视]","[委屈]","[快哭了]","[阴险]","[亲亲]","[吓]","[可怜]","[菜刀]","[西瓜]","[啤酒]","[篮球]","[乒乓]","[咖啡]","[饭]","[猪头]","[玫瑰]","[凋谢]","[示爱]","[爱心]","[心碎]","[蛋糕]","[闪电]","[炸弹]","[刀]","[足球]","[瓢虫]","[便便]","[月亮]","[太阳]","[礼物]","[拥抱]","[强]","[弱]","[握手]","[胜利]","[抱拳]","[勾引]","[拳头]","[差劲]","[爱你]","[NO]","[OK]","[爱情]","[飞吻]","[跳跳]","[发抖]","[怄火]","[转圈]","[磕头]","[回头]","[跳绳]","[挥手]","[激动]","[街舞]","[献吻]","[左太极]","[右太极]","[嘿哈]","[捂脸]","[奸笑]","[机智]","[皱眉]","[耶]","[红包]","[鸡]"]}},computed:{decodeEmoticon:function(){var t=this,e=this.content&&this.content.replace(/(\r\n|\n|\r)/gm,"<br />")||"",r="\n                <div style=\"background-image: url('BACKGROUND_IMAGE_FOR_EMOTICON');\n                min-height: "+this.size+" !important;\n                min-width: "+this.size+" !important;\n                max-height: "+this.size+" !important;\n                max-width: "+this.size+' !important;\n                vertical-align: middle !important;\n                float: none !important;\n                background-repeat: no-repeat;\n                background-position: center center;\n                background-size: contain;\n                display: inline-block;"\n                class="emo-icon"></div>\n            ';this.availableIcons.map((function(n,o){e.indexOf(n)>-1&&(e=e.split(n).join(r.replace("BACKGROUND_IMAGE_FOR_EMOTICON",t.getEmoticonUrl(o))))}));var o=Object(n.parse)(e);return o.map((function(t){if(t.name=t.tagName,t.tagName=void 0,"text"===t.type&&(t.text=t.content,t.content=void 0),"element"===t.type&&(t.type="node"),t.attributes){var e={};t.attributes.map((function(t){e[t.key]=t.value})),t.attributes=void 0,t.attrs=e}return t})),o}},methods:{getEmoticonUrl:function(t){return"https://rescdn.qqmail.com/node/wr/wrpage/style/images/independent/qqface/smiley_"+t+"@2x.png"},emitClick:function(t){"readingGroup"===this.type?this.expanded=!this.expanded:this.$emit("click",t)}}},i=r(7)(o,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:["wr_emoticonText",t.customSelector]},[r("view",{class:[{wr_emoticonText_content:!0,wr_emoticonText_content_Expandable:t.expandable,wr_emoticonText_content_Expanded:t.expanded}],attrs:{eventid:"1_0"},domProps:{innerHTML:t._s(t.decodeEmoticon)},on:{click:t.emitClick}}),t._v(" "),t.expandable&&!t.expanded?r("view",{staticClass:"wr_emoticonText_expand",attrs:{"hover-class":"wr_commonActive",eventid:"1_1"},on:{click:t.emitClick}},[t._v("\n        "+t._s(t.buttonText)+"\n    ")]):t._e()])},staticRenderFns:[]},(function(t){r(752)}),null,null);e.default=i.exports},116:function(t,e,r){e.a={scheme:function(t){return"weread://browse?userinfo=1&style=1&url="+encodeURIComponent("https://weread.qq.com/wrpage/act/fxmfls?type="+t)},shareScheme:function(t,e,r){return"weread://browse?userinfo=1&style=1&url="+encodeURIComponent("https://weread.qq.com/wrpage/promotion/erahs4koob?senderId="+t+"&bookId="+e+"&authorVid="+r)}}},129:function(t,e,r){r.r(e);var n=r(6),o=r.n(n),i=r(406),a=r(9),s=r(0),c={props:{customSelector:{type:[Object,String],default:""}},data:function(){return{}},computed:o()({},Object(a.mapState)({profile:function(t){return t.profile},payItems:function(t){return t.payItemsInfo},isAndroid:function(t){return Boolean(t.profile.user.isAndroid)}})),mounted:function(){this.$store.state.profile.user.openid||this.$store.dispatch(s.INIT_MINE_USER_INFO),this.$store.dispatch(s.USER_CHARGE_PAY_ITEMS).catch((function(t){console.log("USER_CHARGE_PAY_ITEMS: ",t)})).then()},methods:{handleRechargeViewItemClick:function(t){var e=this;this.profile.user.openid?this.isAndroid?(console.log("[chargeByMidasPay]: openid: "+this.profile.user.openid+" isAndroid: "+this.isAndroid+", price: "+100*t.originPrice),i.a.chargeByMidasPay(this.profile.user.openid,!0,parseFloat(100*t.originPrice)).then((function(t){if(0===t.resultCode){var r=e;wx.showLoading({title:"加载中…"}),e.$store.dispatch(s.PAY_BALANCE).then((function(t){console.log("res PAY_BALANCE:",t),wx.hideLoading(),r.$emit("finish","充值成功")})).catch((function(t){console.log("error PAY_BALANCE:",t),wx.hideLoading(),r.$emit("finish","充值成功，稍后到账")}))}else e.$emit("finish","充值失败"),console.log("fail chargeByMidasPay: %o",t)})).catch((function(t){console.log("error chargeByMidasPay: %o",t),e.$emit("finish","充值失败")}))):wx.showModal({title:"充值失败",content:"因苹果政策，小程序内无法充值书币，请在微信读书 app 内充值。",showCancel:!1,complete:function(){e.$emit("finish",null)}}):wx.showToast({title:"用户信息未同步，请稍后再试"})}}},l=r(7)(c,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.payItems.length>0?r("view",{staticClass:"wr_rechargeView"},[r("view",{staticClass:"wr_rechargeView_list"},t._l(t.payItems,(function(e,n){return r("view",{key:n,staticClass:"wr_rechargeView_item",attrs:{"hover-class":"wr_commonActive",eventid:"2_0_"+n},on:{click:function(r){t.handleRechargeViewItemClick(e)}}},[r("view",{staticClass:"wr_rechargeView_item_price"},[t._v(t._s(e.originPrice))]),t._v(" "),r("text",{staticClass:"wr_rechargeView_item_payPrice"},[t._v(t._s(e.payPrice)+"元")])])})))]):t._e()},staticRenderFns:[]},(function(t){r(1018)}),null,null);e.default=l.exports},133:function(t,e,r){var n={props:{review:{type:Object,required:!0},customSelector:{type:String,default:""}},computed:{newRatingLevel:function(){return this.review&&this.review.newRatingLevel?this.review.newRatingLevel:0},newRatingLevelToText:function(){return this.newRatingLevel>0?["认为好看","认为一般","认为不行"][this.newRatingLevel-1]:""},newRatingIconSelector:function(){var t=["good","fair","poor"][this.newRatingLevel-1];return"good"===t?"wr_ratingLevelBar_Good":"fair"===t?"wr_ratingLevelBar_Fair":"poor"===t?"wr_ratingLevelBar_Poor":""}}},o=r(7)(n,{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:["wr_ratingLevelBar",this.newRatingIconSelector]},[e("div",{staticClass:"wr_ratingLevelBar_icon"}),this._v(" "),e("div",{staticClass:"wr_ratingLevelBar_text"},[this._v(this._s(this.newRatingLevelToText))])])},staticRenderFns:[]},(function(t){r(754)}),null,null);e.a=o.exports},14:function(t,e,r){r.r(e);var n=r(96),o=r(311),i=r.n(o),a={components:{CustomMPCoverImage:r(7)(i.a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:[{wr_customMPCoverImage:!0}],style:t.styleObj},[r("view",{staticClass:"wr_customMPCoverImage_picture",style:t.pictureStyleObj}),t._v(" "),r("view",{staticClass:"wr_customMPCoverImage_author"},[r("view",{staticClass:"wr_avatar wr_customMPCoverImage_author_avatar",style:t.avatarStyleObj})]),t._v(" "),r("view",{staticClass:"wr_customMPCoverImage_title"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),r("canvas",{staticClass:"wr_customMPCoverImage_canvas",attrs:{"canvas-id":t.canvasId}})])},staticRenderFns:[]},(function(t){r(734)}),null,null).exports},props:{src:{type:String,default:""},mp:{type:Object,default:function(){return null}},type:{type:Number,default:0},alt:{type:String,default:"书籍封面"},customSelector:{type:[Object,String],default:""},isSecret:{type:Boolean},isUpdated:{type:Boolean},isTrial:{type:Boolean},hasRedeemed:{type:Boolean,default:function(){return!1}},audioStatus:{type:Number,default:0},needGradientDecor:{type:Boolean},description:{type:String,default:""},width:{type:[Number,String],default:"default",required:!0},clickable:{type:Boolean}},data:function(){return{adjustedURL:null,retryCount:0,currentSize:6}},computed:{formattedWidth:function(){return"string"==typeof this.width?120:this.width},coverSize:function(){var t=Math.ceil(1.45*this.formattedWidth);return{width:this.formattedWidth,height:t}},shadowSelector:function(){var t="";return this.formattedWidth<=64?t="wr_bookCover_SmallShadow":this.formattedWidth>64&&this.formattedWidth<=128?t="wr_bookCover_MediumShadow":this.formattedWidth>128&&(t="wr_bookCover_LargeShadow"),t},sizeSelector:function(){return"number"==typeof this.width&&this.width%4==0?"wr_bookCover_Book"+this.formattedWidth:""},audioSelector:function(){if(this.formattedWidth>0&&this.formattedWidth<80){if(1===this.audioStatus)return"wr_bookCover_WithSmallPlayIcon";if(2===this.audioStatus)return"wr_bookCover_WithSmallPauseIcon"}else if(this.formattedWidth>=80&&this.formattedWidth<=96){if(1===this.audioStatus)return"wr_bookCover_WithMediumPlayIcon";if(2===this.audioStatus)return"wr_bookCover_WithMediumPauseIcon"}else if(this.formattedWidth>96){if(1===this.audioStatus)return"wr_bookCover_WithLargePlayIcon";if(2===this.audioStatus)return"wr_bookCover_WithLargePauseIcon"}else{if(1===this.audioStatus)return"wr_bookCover_WithPlayIcon";if(2===this.audioStatus)return"wr_bookCover_WithPauseIcon"}return""},bookCoverImageSizeLevel:function(){for(var t=[84,108,143,174,214,250,285,347,428],e=3*this.formattedWidth,r=0;r<t.length;r++)if(e<=t[r])return r+1;return t.length},adjustedSrc:function(){if(this.retryCount>=5)return"https://rescdn.qqmail.com/weread/cover/0/0/t8_0.jpg";var t=this.bookCoverImageSizeLevel;return this.retryCount>0&&(t=this.currentSize),this.src?Object(n.default)(this.src,t):""}},watch:{src:function(){this.retryCount=0}},methods:{emitOnClick:function(t){this.$emit("click",t)},retryLoading:function(){this.retryCount<5&&(0===this.retryCount&&(this.currentSize=this.bookCoverImageSizeLevel),this.retryCount++,this.currentSize++,this.currentSize>9&&(this.currentSize=1))}}},s=r(7)(a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.clickable?r("view",{class:[{wr_bookCover:!0},t.sizeSelector,t.shadowSelector,t.audioSelector,t.customSelector],attrs:{"hover-class":"wr_commonActive",eventid:"0_3"},on:{click:function(e){e.stopPropagation(),t.emitOnClick(e)}}},[r("view",{staticClass:"wr_bookCover_shadow"}),t._v(" "),t.isSecret?r("view",{staticClass:"wr_bookCover_privateTag"}):t._e(),t._v(" "),t.isUpdated?r("view",{staticClass:"wr_bookCover_updatedTag"}):t._e(),t._v(" "),t.isTrial?r("view",{staticClass:"wr_bookCover_trialTag"}):t._e(),t._v(" "),t.hasRedeemed?r("view",{staticClass:"wr_bookCover_redeemedTag"}):t._e(),t._v(" "),t.mp?r("CustomMPCoverImage",{attrs:{avatar:t.mp.avatar,name:t.mp.name,title:t.mp.title,picture:t.mp.pic,width:t.coverSize.width,height:t.coverSize.height,mpcomid:"0"}}):r("img",{staticClass:"wr_bookCover_img",attrs:{"lazy-load":!0,src:t.adjustedSrc,mode:"scaleToFill","aria-label":t.alt,eventid:"1_0"},on:{error:t.retryLoading}}),t._v(" "),t.needGradientDecor?r("view",{staticClass:"wr_bookCover_gradientDecor"}):t._e(),t._v(" "),t.description?r("view",{staticClass:"wr_bookCover_bottomDesc"},[t._v(t._s(t.description))]):t._e()],1):r("view",{class:[{wr_bookCover:!0},t.sizeSelector,t.shadowSelector,t.audioSelector,t.customSelector],attrs:{eventid:"0_2"},on:{click:t.emitOnClick}},[r("view",{staticClass:"wr_bookCover_shadow"}),t._v(" "),t.isSecret?r("view",{staticClass:"wr_bookCover_privateTag"}):t._e(),t._v(" "),t.isUpdated?r("view",{staticClass:"wr_bookCover_updatedTag"}):t._e(),t._v(" "),t.isTrial?r("view",{staticClass:"wr_bookCover_trialTag"}):t._e(),t._v(" "),t.hasRedeemed?r("view",{staticClass:"wr_bookCover_redeemedTag"}):t._e(),t._v(" "),t.mp?r("CustomMPCoverImage",{attrs:{avatar:t.mp.avatar,name:t.mp.name,title:t.mp.title,picture:t.mp.pic,width:t.coverSize.width,height:t.coverSize.height,mpcomid:"1"}}):r("img",{staticClass:"wr_bookCover_img",attrs:{"lazy-load":!0,src:t.adjustedSrc,mode:"scaleToFill","aria-label":t.alt,eventid:"1_1"},on:{error:t.retryLoading}}),t._v(" "),t.needGradientDecor?r("view",{staticClass:"wr_bookCover_gradientDecor"}):t._e(),t._v(" "),t.description?r("view",{staticClass:"wr_bookCover_bottomDesc"},[t._v(t._s(t.description))]):t._e()],1)},staticRenderFns:[]},(function(t){r(732)}),null,null);e.default=s.exports},146:function(t,e,r){r.r(e);var n=r(7)({data:function(){return{intent:"",subTitle:"",showModal:!1,cancelText:"取消",confirmText:"兑换",type:"",onConfirm:function(){},onCancel:function(){}}},methods:{show:function(t){this.intent=t.intent,this.subTitle=t.subTitle||"",this.type=t.type||"",this.showModal=!0,this.onConfirm=t.onConfirm||this.onConfirm,this.onCancel=t.onCancel||this.onCancel,t.cancelText&&(this.cancelText=t.cancelText),t.confirmText&&(this.confirmText=t.confirmText)},handleModalCancel:function(){this.onCancel(),this.showModal=!1},handleModalConfirm:function(){this.onConfirm(),this.showModal=!1},handleCloseModal:function(){this.showModal=!1}}},{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showModal?r("view",{staticClass:"battleGame_modal",attrs:{eventid:"0_5"},on:{click:t.handleCloseModal}},[r("view",{staticClass:"battleGame_modal_content"},[r("view",{staticClass:"battleGame_modal_title"},[t._v("\n            "+t._s(t.intent)),r("br"),t._v("\n            "+t._s(t.subTitle)+"\n        ")],1),t._v(" "),"highlight"===t.type?r("view",{staticClass:"battleGame_modal_buttonGroup"},[r("view",{staticClass:"battleGame_modal_button",attrs:{"hover-class":"wr_commonActive",eventid:"3_0"},on:{click:t.handleModalCancel}},[t._v("\n                "+t._s(t.cancelText)+"\n            ")]),t._v(" "),r("view",{staticClass:"battleGame_modal_button highlight",attrs:{"hover-class":"wr_commonActive",eventid:"3_1"},on:{click:t.handleModalConfirm}},[t._v("\n                "+t._s(t.confirmText)+"\n            ")])]):"notify"===t.type?r("view",{staticClass:"battleGame_modal_buttonGroup notify"},[r("view",{staticClass:"battleGame_modal_button",attrs:{"hover-class":"wr_commonActive",eventid:"3_2"},on:{click:t.handleModalCancel}},[t._v("\n                "+t._s(t.cancelText)+"\n            ")])]):r("view",{staticClass:"battleGame_modal_buttonGroup"},[r("view",{staticClass:"battleGame_modal_button",attrs:{"hover-class":"wr_commonActive",eventid:"3_3"},on:{click:t.handleModalCancel}},[t._v("\n                "+t._s(t.cancelText)+"\n            ")]),t._v(" "),r("view",{staticClass:"battleGame_modal_button",attrs:{"hover-class":"wr_commonActive",eventid:"3_4"},on:{click:t.handleModalConfirm}},[t._v("\n                "+t._s(t.confirmText)+"\n            ")])])])]):t._e()},staticRenderFns:[]},(function(t){r(690)}),null,null);e.default=n.exports},147:function(t,e,r){r.r(e);var n=r(33),o=r.n(n),i=r(173),a=r(63),s=r(3),c={components:{SubscribeBookPrompt:i.a},props:{handleSubscribeFinish:{type:Function,default:function(){}}},data:function(){return{source:"unset"}},methods:{show:function(t,e){if(Object(a.default)(s.default.getUser().SDKVersion,"2.8.2")<0)return this.handleSubscribeFinish&&this.handleSubscribeFinish(this.source,"notSupport"),void console.log("err subscribeMessage: SDKVersion not support");!Object(a.default)(s.default.getUser().Version,"7.0.6")<1&&this.$refs.subscribeBookPrompt&&this.$refs.subscribeBookPrompt.show(),this.source=e;var r=this;wx.requestSubscribeMessage&&wx.requestSubscribeMessage({tmplIds:t,success:function(e){console.log("requestSubscribeMessage:",e);var n=0,i=!0,a=!1,s=void 0;try{for(var c,l=o()(t);!(i=(c=l.next()).done);i=!0)"accept"===e[c.value]&&(n+=1)}catch(t){a=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}n>=t.length?r.handleSubscribeFinish&&r.handleSubscribeFinish(r.source,"accept"):n>0?r.handleSubscribeFinish&&r.handleSubscribeFinish(r.source,"partlyAccept"):r.handleSubscribeFinish&&r.handleSubscribeFinish(r.source,"reject")},fail:function(t){r.handleSubscribeFinish&&r.handleSubscribeFinish(r.source,"error"),console.log("err subscribeMessage:",t)},complete:function(){r.$refs.subscribeBookPrompt&&r.$refs.subscribeBookPrompt.closeSelf()}})}}},l=r(7)(c,{render:function(){var t=this.$createElement;return(this._self._c||t)("SubscribeBookPrompt",{ref:"subscribeBookPrompt",attrs:{mpcomid:"0"}})},staticRenderFns:[]},(function(t){r(912)}),null,null);e.default=l.exports},150:function(t,e,r){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(75),i=function(t){return new Promise((function(e){t.fields({id:!0}).exec((function(t){var r=t[0];r&&r.length?e(r.length):e(0)}))}))};e.createIntersectionObserverMixin=function(t,e,r){var o;void 0===e&&(e={});var a,s=!1,c=e.visibleRatio||.8,l=e.thresholds||[c];return{mounted:function(){var u=this,d=function(){o&&(console.log("[IntersectionObserver] install",t),o.observe(t,(function(t){var e=t.intersectionRatio>=c;r.apply(u,[n({},t,{isVisible:e})])})),s=!0)};setTimeout((function(){wx.nextTick((function(){o=wx.createIntersectionObserver(void 0,n({},e,{thresholds:l}));var r=wx.createSelectorQuery().selectAll(t);i(r).then((function(e){o&&(o.relativeToViewport(),e?d():a=setInterval((function(){var e=wx.createSelectorQuery().selectAll(t);i(e).then((function(t){t&&(s||d()),s&&clearInterval(a)}))}),1e3))}))}))}),1e3)},destroyed:function(){o&&(console.log("[IntersectionObserver] uninstall",t),o.disconnect(),s=!1),a&&clearInterval(a)}}},e.default=function(t,r){return void 0===r&&(r={}),o.createDecorator((function(n,o){if(n.methods){var i=n.methods[o],a=e.createIntersectionObserverMixin(t,r,i);n.mixins&&n.mixins.includes&&n.mixins.includes(a)||(n.mixins=[a].concat(n.mixins||[]))}}))}},159:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c,l,u,d,p=s(n(5)),_=n(13),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shown=!1,e.showing=!1,e.hidden=!0,e.hiding=!1,e}return i(e,t),Object.defineProperty(e.prototype,"animationSelector",{get:function(){return"slide"===this.animationStyle?"wr_modal_Slide":""},enumerable:!0,configurable:!0}),e.prototype.showModal=function(){var t=this;return new Promise((function(e){t.showing?e():(l&&clearTimeout(l),t.shown=!1,t.hidden=!1,t.hiding=!1,t.showing=!0,t.$refs.mask&&t.$refs.mask.showMask(),c=e,l=setTimeout((function(){t.shown||e()}),1e3))}))},e.prototype.closeModal=function(){var t=this;return new Promise((function(e){t.showing||!t.hidden?(d&&clearTimeout(d),t.shown=!1,t.hidden=!1,t.hiding=!0,t.showing=!1,t.$refs.mask&&t.$refs.mask.closeMask(),u=e,d=setTimeout((function(){t.hidden||e()}),1e3)):e()}))},e.prototype.handleMaskClick=function(){var t=this;this.needsCloseButton&&this.closeModal().then((function(){t.$emit("maskClick"),console.log("[Base Modal]","closeModal")}))},e.prototype.handleAnimationEnd=function(){this.showing?(c(),this.shown=!0):this.hiding&&(u(),this.hidden=!0,this.hiding=!1)},a([_.Prop({default:""})],e.prototype,"customSelector",void 0),a([_.Prop({default:!0})],e.prototype,"showAnimation",void 0),a([_.Prop({default:"popup",validator:function(t){return["slide","popup"].indexOf(t)>-1}})],e.prototype,"animationStyle",void 0),a([_.Prop()],e.prototype,"needsCloseButton",void 0),a([_.Component],e)}(p.default);r.default=h},161:function(t,e,r){r.r(e);var n=r(380),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"readingGroup_progressBar"},[e("view",{staticClass:"readingGroup_progressBar_progress",style:this.progressBarInnerStyle})])},staticRenderFns:[]},(function(t){r(1109)}),null,null);e.default=i.exports},162:function(t,e,r){r.r(e);var n=r(317),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:["wr_mask",t.showAnimation?{wr_mask_Show:t.showing,wr_mask_Hide:t.hiding}:{wr_mask_Visible:t.showing},t.customSelector],attrs:{"disable-scroll":"true",eventid:"0_1"},on:{touchmove:function(t){t.stopPropagation()},click:t.handleMaskClick,animationend:t.handleAnimationEnd}},[r("form",{attrs:{"report-submit":"",eventid:"1_0"},on:{submit:t.handleMaskDismissFormReport}},[t.needsCloseButton?r("button",{staticClass:"wr_mask_closeBtn",attrs:{"aria-role":"button","aria-label":"关闭浮层","hover-class":"wr_commonActive","form-type":"submit"}}):t._e()],1)],1)},staticRenderFns:[]},(function(t){r(773)}),null,null);e.default=i.exports},163:function(t,e,r){r.r(e);var n={props:{cover:{type:Boolean}}},o=r(7)(n,{render:function(){var t=this.$createElement,e=this._self._c||t;return this.cover?e("cover-view",{staticClass:"wr_redDot",attrs:{mpcomid:"0"}}):e("view",{staticClass:"wr_redDot"})},staticRenderFns:[]},(function(t){r(682)}),null,null);e.default=o.exports},165:function(t,e,r){r.r(e);var n=[".","。","?","？","!","！","…"],o=['"',"”","'","’",")","）"],i=[",","，",";","；"],a=[":","；"],s=['"',"“","'","‘","\\s","、"],c=new RegExp("["+n.join("|")+"]"),l=new RegExp("["+i.join("|")+"]"),u=new RegExp("["+a.join("|")+"]"),d=new RegExp("["+s.join("|")+"]"),p=new RegExp("["+Array.prototype.concat([],n,o,i,a,s).join("|")+"]"),_=new RegExp("^["+Array.prototype.concat([],n,o,i,a,s,["-"]).join("|")+"]+$"),h=new RegExp("^[a-zA-Z0-9\\-]$");function f(t){return d.test(t)}function m(t){return h.test(t)}function v(t){return p.test(t)}function g(t){return c.test(t)}function w(t){return l.test(t)?1:u.test(t)?2:d.test(t)?3:0}function C(t,e,r){return e===r||(n=t.substring(e,r),_.test(n));var n}function b(t,e,r){for(var n=[],o=r;r>=e;){var i=t[r];if(v(i)){var a=w(i);a&&!n[a]&&(n[a]=r)}r-=1}return n[1]?n[1]:n[2]?n[2]:n[3]?n[3]:o-1}e.default={splitParagraph:function(t,e,r){if(!r||!r.length)return null;var n=[];return r.forEach((function(r,o){var i=function(t,e,r,n){var o=[],i=0,a=0,s=0,c=0,l=function(t){for(var e=!0,r=!0,n=0;n<=t.length-1;){var o=t[n];m(o)||v(o)||(e=!1),v(o)||(r=!1),n++}return{allEnglish:e,allMark:r}}(t),u=60;if(l.allEnglish&&(u=180),l.allMark)return o;for(;a<=t.length-1;)if(g(t[a])){if(s===a){s=a+=1;continue}v(t[a+1])&&!f(t[a+1])&&(a+=1),o.push({sentenceIndex:i,start:s,end:a+1,fileName:r+"_"+n+"_"+e+"_"+i}),s=a+1,a+=1,i+=1,c=0}else if((c+=1)>=u){var d=b(t,s,a);o.push({sentenceIndex:i,start:s,end:d+1,fileName:r+"_"+n+"_"+e+"_"+i}),s=d+1,a=d+1,i+=1,c=0}else a+=1;return o.push({sentenceIndex:i,start:s,end:t.length,fileName:r+"_"+n+"_"+e+"_"+i}),o.filter((function(e){var r=e.start,n=e.end;return!C(t,r,n)}))}(r.trim(),o,t,e);n.push(i)})),n}}},166:function(t,e,r){var n=r(3);function o(t,e,r){for(var n=t,o=n;o<e.length+n;o++){var i;if((i=o>=e.length?e[o-e.length]:e[o]).needVoteCount-i.voter.length===r)return o>=e.length?o-e.length:o}return-1}e.a={scheme:function(t){var e="";if(t.hasReceiveActiveInfinite&&!t.canReceiveState){var r=n.default.getUser();e="https://weread.qq.com/wrpage/newer/welcome/bonus?type="+t.infiniteType+"&tag=infiniteTrial&isAnimateTitleView=1&isAnimateNavBarBackground=1&shareVid="+r.vid}else e="https://weread.qq.com/wrpage/promo/giveonegetone/newyear?isAnimateNavBarBackground=1",t.lastestVol&&t.vol&&t.lastestVol!==t.vol||(t.senderVid&&t.canReceiveState&&(e+="&senderVid="+t.senderVid),t.vol&&(e+="&vol="+t.vol),t.designId&&(e+="&designId="+t.designId));return"weread://browse?userinfo=1&style=1&url="+encodeURIComponent(e)},chooseMyBestShowCardIndex:function(t,e,r,n){var o=e.concat();o.sort((function(t,e){return t.needVoteCount-t.voter.length-(e.needVoteCount-e.voter.length)}));for(var i=[],a=0;a<o.length;a++){var s=o[a].needVoteCount-o[a].voter.length;if(0!==s&&s!==o[a].needVoteCount)return o[a];0===s&&i.push(parseInt(o[a].designId.split("_")[1]))}for(var c=0;c<r.length;c++)if(-1===i.indexOf(c))return r[c].designId=t+"_"+c,r[c];var l=parseInt(n.split("_")[1])||-1,u=null;return l>0&&l<r.length?(u=r[l]).designId=t+"_"+l:(u=r[0]).designId=t+"_0",u},chooseNextBestCard:function(t,e){var r=t;(t<0||t>=e.length)&&(r=0);var n=o(r,e,1);return-1!==n||-1!==(n=o(r,e,2))?n:0}}},169:function(t,e,r){var n=r(14),o=function(t){return"weread://browse?userinfo=1&style=1&url="+encodeURIComponent("https://weread.qq.com/wrpage/flip/card?vol="+t)},i=r(39),a=r(0),s=r(30),c=r(28),l={components:{BookCover:n.default},props:{size:{type:String,default:""},customSelector:{type:String,default:""},sceneType:{type:String,default:"normal"},card:{type:Object,required:!0},superLocked:{type:Boolean,default:!0},superFlipped:{type:Boolean,default:!1},vol:{type:Object,required:!0},openFromAppScene:{type:Boolean,default:!1},appLoginOutDay:{type:Boolean,default:!1}},data:function(){return{forceHideShareButton:!1,clickCardAppScheme:o(this.vol),MAX_CLICK_CAPTURE_TIME:c.default.MAX_CLICK_CAPTURE_TIME}},computed:{flipCardButtonType:function(){return this.forceCancelLaunchApp?"":this.openFromAppScene?"launchApp":""},forceCancelLaunchApp:function(){return s.f.state.forceCancelLaunchApp},launchAppClickTime:function(){return s.f.state.launchAppClickTime||0}},methods:{hideShareButton:function(t){this.forceHideShareButton=!t},launchAppClickCardError:function(t){this.flipCardAction(!0),console.log("err launchAppClickCardError:",t),this.$store.dispatch(a.KV_LOG_REPORT,{itemname:"Wp_FlipCard_Click_Error"}),Object(i.default)("flipCard",this.$root.$mp.appOptions),this.setForceCancelLaunchApp()},captureClickCardAction:function(){this.$store.dispatch(a.KV_LOG_REPORT,{itemname:"Wp_FlipCard_Click"}),this.openFromAppScene&&!this.forceCancelLaunchApp?(this.incrementClickTimeCount(),this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&this.setForceCancelLaunchApp()):this.appLoginOutDay?this.flipCardAction(!0):this.flipCardAction(!1)},handleReportFormIdSubmit:function(t){t&&t.target&&t.target.formId&&this.$emit("reportFormId",{formId:t.target.formId})},flipCardAction:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("flipCardAction",{card:this.card,sceneType:this.sceneType,needDownloadGuide:t})},setForceCancelLaunchApp:function(){s.f.dispatch(s.b,{cancel:!0})},incrementClickTimeCount:function(){s.f.dispatch(s.a,{reset:!1})}}},u=r(7)(l,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return"normal"===t.sceneType?r("view",{staticClass:"wr_flipCardGameCard wr_flipCardGameCard_Black",class:[t.customSelector,{wr_flipCardGameCard_Small:"small"===t.size,wr_flipCardGameCard_Open:3==t.card.status||1==t.card.status,wr_flipCardGameCard_Received:3==t.card.status}]},[r("form",{attrs:{"report-submit":"",eventid:"1_1"},on:{submit:t.handleReportFormIdSubmit}},[t.forceHideShareButton?t._e():r("button",{staticClass:"wr_flipCardGameCard_invisibleShareBtn",attrs:{"aria-role":"button","open-type":t.flipCardButtonType,"form-type":"submit","app-parameter":t.clickCardAppScheme,eventid:"2_0"},on:{error:t.launchAppClickCardError,click:function(e){e.stopPropagation(),t.captureClickCardAction(e)}}}),t._v(" "),r("view",{staticClass:"wr_flipCardGameCard_back"}),t._v(" "),r("view",{staticClass:"wr_flipCardGameCard_front"},["book"===t.card.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCard_prize_book",src:t.card.bookInfo.cover,alt:t.card.bookInfo.title,"need-gradient-decor":!0,width:"small"===t.size?46:64,mpcomid:"0"}}):t._e(),t._v(" "),"lecture"===t.card.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCard_prize_book",src:t.card.bookInfo.cover,alt:t.card.bookInfo.title,"need-gradient-decor":!0,"audio-status":1,width:"small"===t.size?46:64,mpcomid:"1"}}):"infinite"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCard_prize_icon wr_flipCardGameCard_prize_icon_Infinite"}):"money"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCard_prize_icon wr_flipCardGameCard_prize_icon_Coin"}):"blank"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCard_prize_icon wr_flipCardGameCard_prize_icon_Blank"}):t._e()],1),t._v(" "),3==t.card.status?r("view",{staticClass:"wr_flipCardGameCard_receivedIcon"}):t._e()],1)],1):"super"===t.sceneType?r("view",{staticClass:"wr_flipCardGameCard wr_flipCardGameCard_Gold",class:[t.customSelector,{wr_flipCardGameCard_Small:"small"===t.size,wr_flipCardGameCard_Open:3==t.card.status||1==t.card.status,wr_flipCardGameCard_Received:3==t.card.status},t.superLocked?"wr_flipCardGameCard_Super_Locked":t.superFlipped?2===t.card.status?"wr_flipCardGameCard_Super_Disabled":"":0===t.card.status?"":"wr_flipCardGameCard_Super_Share"]},[r("form",{attrs:{"report-submit":"",eventid:"1_3"},on:{submit:t.handleReportFormIdSubmit}},[t.superLocked||t.superFlipped||2!==t.card.status||t.forceHideShareButton?t.forceHideShareButton?t._e():r("button",{staticClass:"wr_flipCardGameCard_invisibleShareBtn",attrs:{"aria-role":"button","open-type":t.flipCardButtonType,"form-type":"submit","app-parameter":t.clickCardAppScheme,eventid:"2_2"},on:{error:t.launchAppClickCardError,click:function(e){e.stopPropagation(),t.captureClickCardAction(e)}}}):r("button",{staticClass:"wr_flipCardGameCard_invisibleShareBtn",attrs:{id:"shareFlipCardGameButton","aria-role":"button","open-type":"share","form-type":"submit"}}),t._v(" "),r("view",{staticClass:"wr_flipCardGameCard_back"}),t._v(" "),r("view",{staticClass:"wr_flipCardGameCard_front"},["book"===t.card.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCard_prize_book",src:t.card.bookInfo.cover,alt:t.card.bookInfo.title,"need-gradient-decor":!0,width:"small"===t.size?46:64,mpcomid:"2"}}):t._e(),t._v(" "),"lecture"===t.card.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCard_prize_book",src:t.card.bookInfo.cover,alt:t.card.bookInfo.title,"need-gradient-decor":!0,"audio-status":1,width:"small"===t.size?46:64,mpcomid:"3"}}):"infinite"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCard_prize_icon wr_flipCardGameCard_prize_icon_Infinite wr_flipCardGameCard_prize_icon_Infinite_Gold"}):"money"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCard_prize_icon wr_flipCardGameCard_prize_icon_Coin wr_flipCardGameCard_prize_icon_Coin_Gold"}):"blank"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCard_prize_icon wr_flipCardGameCard_prize_icon_Blank"}):t._e()],1),t._v(" "),3==t.card.status?r("view",{staticClass:"wr_flipCardGameCard_receivedIcon"}):t._e()],1)],1):t._e()},staticRenderFns:[]},(function(t){r(813)}),null,null);e.a=u.exports},170:function(t,e,r){var n=r(14),o=r(39),i=r(0),a=r(26),s=r(28),c={components:{BookCover:n.default},props:{size:{type:String,default:""},customSelector:{type:String,default:""},sceneType:{type:String,default:"normal"},card:{type:Object,required:!0},superLocked:{type:Boolean,default:!0},superFlipped:{type:Boolean,default:!1},vol:{type:Object,required:!0},openFromAppScene:{type:Boolean,default:!1},appLoginOutDay:{type:Boolean,default:!1}},data:function(){return{forceHideShareButton:!1,clickCardAppScheme:(this.vol,"weread://browse?userinfo=1&style=1&url="+encodeURIComponent("https://weread.qq.com/flip-card-game?isAnimateNavBarBackground=1&isShowNavBarShadow=0&isStatusbarLight=1&backgroundColor=%234CB6FA&navBarTintColor=%23ffffff&navBarTitleColor=%23ffffff&navBarBackgroundColor=%23000000")),MAX_CLICK_CAPTURE_TIME:s.default.MAX_CLICK_CAPTURE_TIME}},computed:{flipCardButtonType:function(){return this.forceCancelLaunchApp?"":this.openFromAppScene?"launchApp":""},forceCancelLaunchApp:function(){return a.f.state.forceCancelLaunchApp},launchAppClickTime:function(){return a.f.state.launchAppClickTime||0}},methods:{hideShareButton:function(t){this.forceHideShareButton=!t},launchAppClickCardError:function(t){this.flipCardAction(this.appLoginOutDay),console.log("err launchAppClickCardError:",t),this.$store.dispatch(i.KV_LOG_REPORT,{itemname:"Wp_FlipCard_Click_Error"}),Object(o.default)("flipCard",this.$root.$mp.appOptions),this.setForceCancelLaunchApp()},captureClickCardAction:function(){this.$store.dispatch(i.KV_LOG_REPORT,{itemname:"Wp_FlipCard_Click"}),this.openFromAppScene&&!this.forceCancelLaunchApp?(this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&(this.flipCardAction(!1),this.setForceCancelLaunchApp()),this.incrementClickTimeCount()):this.flipCardAction(!1)},handleReportFormIdSubmit:function(t){t&&t.target&&t.target.formId&&this.$emit("reportFormId",{formId:t.target.formId})},flipCardAction:function(){this.$emit("flipCardAction",{card:this.card,sceneType:this.sceneType,needDownloadGuide:!1})},setForceCancelLaunchApp:function(){a.f.dispatch(a.b,{cancel:!0})},incrementClickTimeCount:function(){a.f.dispatch(a.a,{reset:!1})}}},l=r(7)(c,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return"normal"===t.sceneType?r("view",{staticClass:"wr_flipCardGameCardV2",class:[t.customSelector,{wr_flipCardGameCardV2_Small:"small"===t.size,wr_flipCardGameCardV2_Open:3===t.card.status||1===t.card.status,wr_flipCardGameCardV2_Received:3===t.card.status,wr_flipCardGameCardV2_End:4===t.card.status}]},[t._v("\n    "+t._s(t.card.status)+"\n    "),r("form",{attrs:{"report-submit":"",eventid:"1_1"},on:{submit:t.handleReportFormIdSubmit}},[t.forceHideShareButton?t._e():r("button",{staticClass:"wr_flipCardGameCardV2_invisibleShareBtn",attrs:{"aria-role":"button","open-type":t.flipCardButtonType,"form-type":"submit","app-parameter":t.clickCardAppScheme,eventid:"2_0"},on:{error:t.launchAppClickCardError,click:function(e){e.stopPropagation(),t.captureClickCardAction(e)}}}),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardV2_back"}),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardV2_front"},["book"===t.card.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCardV2_prize_book",src:t.card.bookInfo.cover,alt:t.card.bookInfo.title,"need-gradient-decor":!0,width:"small"===t.size?46:64,mpcomid:"0"}}):t._e(),t._v(" "),"lecture"===t.card.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCardV2_prize_book",src:t.card.bookInfo.cover,alt:t.card.bookInfo.title,"need-gradient-decor":!0,"audio-status":1,width:"small"===t.size?46:64,mpcomid:"1"}}):"infinite"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCardV2_prize_icon wr_flipCardGameCardV2_prize_icon_Infinite"},[r("text",{staticClass:"wr_flipCardGameCardV2_prize_icon_Infinite_Number"},[t._v(t._s(t.card.infinite))]),t._v(" "),r("text",{staticClass:"wr_flipCardGameCardV2_prize_icon_Infinite_Text"},[t._v("天体验卡")])]):"money"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCardV2_prize_icon wr_flipCardGameCardV2_prize_icon_Coin"},[r("text",{staticClass:"wr_flipCardGameCardV2_prize_icon_Coin_Number"},[t._v(t._s(t.card.money/100))]),t._v(" "),r("text",{staticClass:"wr_flipCardGameCardV2_prize_icon_Coin_Text"},[t._v("书  币")])]):"wehearMember"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCardV2_prize_icon wr_flipCardGameCardV2_prize_icon_WehearMember"}):"blank"===t.card.cardType?r("view",{staticClass:"wr_flipCardGameCardV2_prize_icon wr_flipCardGameCardV2_prize_icon_Blank"}):t._e()],1),t._v(" "),3===t.card.status&&"wehearMember"!==t.card.cardType?r("view",{staticClass:"wr_flipCardGameCardV2_receivedIcon"}):t._e()],1)],1):t._e()},staticRenderFns:[]},(function(t){r(819)}),null,null);e.a=l.exports},171:function(t,e,r){var n=r(6),o=r.n(n),i=r(9),a={components:{BookCover:r(14).default},props:{cardForPopup:{type:Object,required:!0}},data:function(){return{shouldShowPopup:!1}},computed:o()({},Object(i.mapGetters)({navigationBarHeight:"navigationBarHeight"}),{popupTitle:function(){return this.cardForPopup&&this.cardForPopup.cardType?"book"===this.cardForPopup.cardType?this.cardForPopup.title||this.cardForPopup.bookInfo.title:"infinite"===this.cardForPopup.cardType?this.cardForPopup.title||(parseInt(this.cardForPopup.infinite)<0?"终身会员卡":this.cardForPopup.infinite+"天体验卡"):this.cardForPopup.title||"书币"+parseInt(this.cardForPopup.money)/100+"元":""}}),methods:{hide:function(){this.shouldShowPopup=!1,this.$emit("popupShow",{show:!1})},show:function(){this.shouldShowPopup=!0,this.$emit("popupShow",{show:!0})},goToBookDetail:function(t){var e=t.bookInfo.bookId,r=null;t.lectureInfo&&t.lectureInfo.authorVid&&(r=t.lectureInfo.authorVid),this.$emit("goBookDetail",{bookId:e,authorVid:r})},goStore:function(){this.$emit("goStore")},handleReceiveClick:function(){this.$emit("receiveClick",{card:this.cardForPopup,sceneType:this.cardForPopup.sceneType})}}},s=r(7)(a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{staticClass:"wr_flipCardGameCardPopup",class:[t.shouldShowPopup?"wr_flipCardGameCardPopup_Show":"wr_flipCardGameCardPopup_Hide"],style:{paddingTop:t.navigationBarHeight-1+"px"}},[r("view",{staticClass:"wr_flipCardGameCardPopup_mask",attrs:{eventid:"1_0"},on:{click:function(e){t.hide()}}}),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_content",attrs:{eventid:"1_14"},on:{click:function(e){t.hide()}}},[r("view",{staticClass:"wr_flipCardGameCardPopup_card",class:{wr_flipCardGameCardPopup_card_Black:"normal"===t.cardForPopup.sceneType,wr_flipCardGameCardPopup_card_Gold:"super"===t.cardForPopup.sceneType,wr_flipCardGameCardPopup_card_Received:3===t.cardForPopup.status,wr_flipCardGameCardPopup_card_ShareReceive:2===t.cardForPopup.status,wr_flipCardGameCardPopup_card_UnFlipped:0===t.cardForPopup.status,wr_flipCardGameCardPopup_card_ClickReceive:-1===t.cardForPopup.status,wr_flipCardGameCardPopup_card_ClickReceiveWithoutAnim:1===t.cardForPopup.status}},[r("view",{staticClass:"wr_flipCardGameCardPopup_card_back"}),t._v(" "),2!==t.cardForPopup.status?r("view",{staticClass:"wr_flipCardGameCardPopup_card_front"},["blank"===t.cardForPopup.cardType?r("view",{staticClass:"wr_flipCardGameCardPopup_card_front_blank"}):["book"===t.cardForPopup.cardType?r("view",{staticClass:"wr_flipCardGameCardPopup_card_front_hd wr_flipCardGameCardPopup_card_front_hd_Small"},[t._v(t._s(t.popupTitle))]):r("view",{staticClass:"wr_flipCardGameCardPopup_card_front_hd"},[t._v(t._s(t.popupTitle))]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_card_front_bd"},["book"===t.cardForPopup.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCardPopup_card_book",src:t.cardForPopup.bookInfo.cover,alt:t.cardForPopup.bookInfo.title,width:99,eventid:"6_1",mpcomid:"0"},on:{click:function(e){e.stopPropagation(),t.goToBookDetail(t.cardForPopup)}}}):t._e(),t._v(" "),"lecture"===t.cardForPopup.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCardPopup_card_book",src:t.cardForPopup.bookInfo.cover,alt:t.cardForPopup.bookInfo.title,width:99,"audio-status":1,eventid:"6_2",mpcomid:"1"},on:{click:function(e){e.stopPropagation(),t.goToBookDetail(t.cardForPopup)}}}):"infinite"===t.cardForPopup.cardType?r("view",{staticClass:"wr_flipCardGameCardPopup_card_prize wr_flipCardGameCardPopup_card_prize_Infinite"}):"money"===t.cardForPopup.cardType?r("view",{staticClass:"wr_flipCardGameCardPopup_card_prize wr_flipCardGameCardPopup_card_prize_Coin"}):t._e()],1),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_card_front_ft js_font_medium"},[t._v(t._s(t.cardForPopup.desc))])]],2):t._e()]),t._v(" "),3==t.cardForPopup.status?r("view",{staticClass:"wr_flipCardGameCardPopup_action"},["book"===t.cardForPopup.cardType||"lecture"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{eventid:"4_3"},on:{click:function(e){e.stopPropagation(),t.goToBookDetail(t.cardForPopup)}}},[t._v("\n                    "+t._s("lecture"===t.cardForPopup.cardType?"开始听书":"开始阅读")+"\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("已放入你的书架")])],1):"infinite"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{eventid:"4_4"},on:{click:function(e){e.stopPropagation(),t.goStore(e)}}},[t._v("\n                    去微信读书无限畅读\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("已存入你的体验卡账户")])],1):"money"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{eventid:"4_5"},on:{click:function(e){e.stopPropagation(),t.goStore(e)}}},[t._v("\n                    去微信读书使用\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("已存入你的书币账户")])],1):"blank"===t.cardForPopup.cardType?r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{eventid:"3_6"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                继续翻一翻\n            ")]):r("view",[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{id:"shareFlipCardGameButton1","open-type":"share",eventid:"4_7"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                    分享解锁4张卡片\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("朋友们点击你分享的小程序后"),r("br"),t._v("即可解锁剩下的4张黑卡")],1)],1)],1):0==t.cardForPopup.status||1==t.cardForPopup.status||-1==t.cardForPopup.status?r("view",{staticClass:"wr_flipCardGameCardPopup_action"},["book"===t.cardForPopup.cardType||"lecture"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{eventid:"4_8"},on:{click:function(e){e.stopPropagation(),t.handleReceiveClick(e)}}},[t._v("\n                    领取赠书\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("领取后该书将放入你的书架")])],1):"infinite"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{eventid:"4_9"},on:{click:function(e){e.stopPropagation(),t.handleReceiveClick(e)}}},[t._v("\n                    立即领取\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("领取后将存入你的体验卡账户")])],1):"money"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{eventid:"4_10"},on:{click:function(e){e.stopPropagation(),t.handleReceiveClick(e)}}},[t._v("\n                    立即领取\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("领取后将存入你的书币账户")])],1):"blank"===t.cardForPopup.cardType?r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{eventid:"3_11"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                继续翻一翻\n            ")]):r("view",[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{id:"shareFlipCardGameButton2","open-type":"share",eventid:"4_12"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                    分享解锁4张卡片\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("朋友们点击你分享的小程序后"),r("br"),t._v("即可解锁剩下的4张黑卡")],1)],1)],1):2==t.cardForPopup.status?r("view",{staticClass:"wr_flipCardGameCardPopup_action"},[r("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold wr_flipCardGameCardPopup_action_btn",attrs:{id:"shareFlipCardGameButton3","open-type":"share",eventid:"3_13"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                分享解锁4张卡片\n            ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_action_tip"},[t._v("朋友们点击你分享的小程序后"),r("br"),t._v("即可解锁剩下的4张黑卡")],1)],1):t._e()]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopup_close",attrs:{eventid:"1_15"},on:{click:t.hide}})])},staticRenderFns:[]},(function(t){r(815)}),null,null);e.a=s.exports},172:function(t,e,r){var n=r(6),o=r.n(n),i=r(9),a=r(14),s=r(26),c=r(39),l=r(0),u=r(12),d={components:{BookCover:a.default},props:{cardForPopup:{type:Object,required:!0},openFromAppScene:{type:Boolean,default:!1}},data:function(){return{shouldShowPopup:!1}},computed:o()({},Object(i.mapGetters)({navigationBarHeight:"navigationBarHeight"}),{popupTitle:function(){return this.cardForPopup&&this.cardForPopup.cardType?"book"===this.cardForPopup.cardType?this.cardForPopup.title||this.cardForPopup.bookInfo.title:"infinite"===this.cardForPopup.cardType?this.cardForPopup.title||(parseInt(this.cardForPopup.infinite)<0?"终身会员卡":this.cardForPopup.infinite+"天体验卡"):"wehearMember"===this.cardForPopup.cardType?"微信听书会员":this.cardForPopup.title||"书币"+parseInt(this.cardForPopup.money)/100+"元":""},cardTips:function(){var t="";return 3===this.cardForPopup.status?"book"===this.cardForPopup.cardType||"lecture"===this.cardForPopup.cardType?t="已放入你的书架":"infinite"===this.cardForPopup.cardType?t="已存入你的体验卡账户":"money"===this.cardForPopup.cardType?t="已存入你的书币账户":"blank"===this.cardForPopup.cardType?t="继续翻一翻":"wehearMember"===this.cardForPopup.cardType&&(t="支起耳朵，听见平原上的水和歌"):0!==this.cardForPopup.status&&1!==this.cardForPopup.status&&-1!==this.cardForPopup.status||("book"===this.cardForPopup.cardType||"lecture"===this.cardForPopup.cardType?t="领取后该书将放入你的书架":"infinite"===this.cardForPopup.cardType?t="领取后将存入你的体验卡账户":"money"===this.cardForPopup.cardType?t="领取后将存入你的书币账户":"blank"===this.cardForPopup.cardType?t="继续翻一翻":"wehearMember"===this.cardForPopup.cardType&&(t="支起耳朵，听见平原上的水和歌")),t},userType:function(){return s.f.state.userType},forceCancelLaunchApp:function(){return s.f.state.forceCancelLaunchApp}}),methods:{hide:function(){this.shouldShowPopup=!1,this.$emit("popupShow",{show:!1})},show:function(){this.shouldShowPopup=!0,this.$emit("popupShow",{show:!0})},goToBookDetail:function(t){var e=t.bookInfo.bookId,r=t.bookInfo.hasLecture,n=null;t.lectureInfo&&t.lectureInfo.authorVid&&(n=t.lectureInfo.authorVid),this.$emit("goBookDetail",{bookId:e,authorVid:n,hasLecture:r})},goStore:function(){this.$emit("goStore")},handleReceiveClick:function(){this.$emit("receiveClick",{card:this.cardForPopup,sceneType:this.cardForPopup.sceneType})},flipCardButtonType:function(){return this.forceCancelLaunchApp?"":this.openFromAppScene?"launchApp":""},launchAppClickCardError:function(t){console.log("err launchAppClickCardError:",t),this.$store.dispatch(l.KV_LOG_REPORT,{itemname:"Wp_FlipCard_Click_Error"}),Object(c.default)("flipCard",this.$root.$mp.appOptions),this.emitMemberCard()},emitMemberCard:function(){this.hide(),this.$emit("memberCard")},captureClickCardAction:function(){this.openFromAppScene&&!this.forceCancelLaunchApp?(this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&(this.$emit("handleClickToMemCard"),this.setForceCancelLaunchApp()),this.incrementClickTimeCount()):(this.appLoginOutDay,this.emitMemberCard()),u.default.reportClk("flipCard","act")},setForceCancelLaunchApp:function(){s.f.dispatch(s.b,{cancel:!0})},incrementClickTimeCount:function(){s.f.dispatch(s.a,{reset:!1})}}},p=r(7)(d,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{staticClass:"wr_flipCardGameCardPopupV2",class:[t.shouldShowPopup?"wr_flipCardGameCardPopupV2_Show":"wr_flipCardGameCardPopupV2_Hide"],style:{paddingTop:t.navigationBarHeight-1+"px"}},[r("view",{staticClass:"wr_flipCardGameCardPopupV2_mask",attrs:{eventid:"1_0"},on:{click:function(e){t.hide()}}}),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopupV2_content",attrs:{eventid:"1_17"},on:{click:function(e){t.hide()}}},[r("view",{staticClass:"wr_flipCardGameCardPopupV2_card",class:{wr_flipCardGameCardPopupV2_card:"normal"===t.cardForPopup.sceneType,wr_flipCardGameCardPopupV2_card_Received:3===t.cardForPopup.status,wr_flipCardGameCardPopupV2_card_ShareReceive:2===t.cardForPopup.status,wr_flipCardGameCardPopupV2_card_UnFlipped:0===t.cardForPopup.status,wr_flipCardGameCardPopupV2_card_ClickReceive:-1===t.cardForPopup.status,wr_flipCardGameCardPopupV2_card_ClickReceiveWithoutAnim:1===t.cardForPopup.status}},[r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_back"}),t._v(" "),2!==t.cardForPopup.status?r("view",{class:["wr_flipCardGameCardPopupV2_card_front",t.shouldShowPopup?"shadow":""]},["blank"===t.cardForPopup.cardType?r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_front_blank"}):[r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_front_bd"},["book"===t.cardForPopup.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCardPopupV2_card_book",src:t.cardForPopup.bookInfo.cover,alt:t.cardForPopup.bookInfo.title,width:99,eventid:"6_1",mpcomid:"0"},on:{click:function(e){e.stopPropagation(),t.goToBookDetail(t.cardForPopup)}}}):t._e(),t._v(" "),"lecture"===t.cardForPopup.cardType?r("book-cover",{attrs:{"custom-selector":"wr_flipCardGameCardPopupV2_card_book",src:t.cardForPopup.bookInfo.cover,alt:t.cardForPopup.bookInfo.title,width:99,"audio-status":1,eventid:"6_2",mpcomid:"1"},on:{click:function(e){e.stopPropagation(),t.goToBookDetail(t.cardForPopup)}}}):"infinite"===t.cardForPopup.cardType?r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_prize wr_flipCardGameCardPopupV2_card_prize_Infinite"},[r("text",{staticClass:"wr_flipCardGameCardPopupV2_card_prize_Infinite_Number"},[t._v(t._s(t.cardForPopup.infinite))]),t._v(" "),r("text",{staticClass:"wr_flipCardGameCardPopupV2_card_prize_Infinite_Text"},[t._v("天体验卡")])]):"money"===t.cardForPopup.cardType?r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_prize wr_flipCardGameCardPopupV2_card_prize_Coin"},[r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_prize_Coin_Number"},[t._v(t._s(t.cardForPopup.money/100))]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_prize_Coin_Text"},[t._v("书  币")])]):"wehearMember"===t.cardForPopup.cardType?r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_prize wr_flipCardGameCardPopupV2_card_WehearMember"}):t._e()],1),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopupV2_card_front_ft"},[t._v(t._s(t.cardTips))])]],2):t._e()]),t._v(" "),3==t.cardForPopup.status?r("view",{staticClass:"wr_flipCardGameCardPopupV2_action"},["book"===t.cardForPopup.cardType||"lecture"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"4_3"},on:{click:function(e){e.stopPropagation(),t.goToBookDetail(t.cardForPopup)}}},[t._v("\n                    "+t._s("lecture"===t.cardForPopup.cardType?"开始听书":"开始阅读")+"\n                ")])],1):"infinite"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"4_4"},on:{click:function(e){e.stopPropagation(),t.goStore(e)}}},[t._v("\n                    去微信读书无限畅读\n                ")])],1):"money"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"4_5"},on:{click:function(e){e.stopPropagation(),t.goStore(e)}}},[t._v("\n                    去微信读书使用\n                ")])],1):"wehearMember"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"4_6"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                    去微信听书App领取\n                ")])],1):"blank"===t.cardForPopup.cardType?r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"3_7"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                继续翻一翻\n            ")]):r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{id:"shareFlipCardGameButton1","open-type":"share",eventid:"4_8"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                    分享解锁 4 张卡片\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopupV2_action_tip"},[t._v("朋友们点击你分享的小程序后"),r("br"),t._v("即可解锁剩下的 4 张黑卡")],1)],1)],1):0===t.cardForPopup.status||1===t.cardForPopup.status||-1===t.cardForPopup.status?r("view",{staticClass:"wr_flipCardGameCardPopupV2_action"},["book"===t.cardForPopup.cardType||"lecture"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"4_9"},on:{click:function(e){e.stopPropagation(),t.handleReceiveClick(e)}}},[t._v("\n                    领取赠书\n                ")])],1):"infinite"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"4_10"},on:{click:function(e){e.stopPropagation(),t.handleReceiveClick(e)}}},[t._v("\n                    立即领取\n                ")])],1):"money"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"4_11"},on:{click:function(e){e.stopPropagation(),t.handleReceiveClick(e)}}},[t._v("\n                    立即领取\n                ")])],1):"wehearMember"===t.cardForPopup.cardType?r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"4_12"},on:{click:function(e){e.stopPropagation(),t.handleReceiveClick(e)}}},[t._v("\n                    去微信听书App领取\n                ")])],1):"blank"===t.cardForPopup.cardType?r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{eventid:"3_13"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                继续翻一翻\n            ")]):r("view",[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{id:"shareFlipCardGameButton2","open-type":"share",eventid:"4_14"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                    分享解锁 4 张卡片\n                ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopupV2_action_tip"},[t._v("将卡片分享，朋友们点击你分享的小程序后"),r("br"),t._v("即可获得 2 次翻卡机会")],1)],1)],1):2===t.cardForPopup.status?r("view",{staticClass:"wr_flipCardGameCardPopupV2_action"},[r("button",{staticClass:"wr_btn wr_btn_Big  wr_flipCardGameCardPopupV2_action_btn",attrs:{id:"shareFlipCardGameButton3","open-type":"share",eventid:"3_15"},on:{click:function(e){e.stopPropagation(),t.hide(e)}}},[t._v("\n                分享解锁 4 张卡片\n            ")]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopupV2_action_tip"},[t._v("将卡片分享，朋友们点击你分享的小程序后"),r("br"),t._v("即可获得 2 次翻卡机会")],1)],1):t._e(),t._v(" "),2===t.cardForPopup.status&&0===t.userType?r("view",{staticClass:"wr_flipCardGameCardPopupV2_Tip"},[r("button",{staticClass:"chanceTip",attrs:{"hover-class":"wr_commonActive","open-type":t.flipCardButtonType,"app-parameter":"weread://memCard?memCardExpand=1",eventid:"3_16"},on:{error:t.launchAppClickCardError,click:function(e){e.stopPropagation(),t.captureClickCardAction(e)}}},[t._v("\n                "+t._s("成为付费会员可直接翻 6 张")+"\n            ")])],1):t._e()]),t._v(" "),r("view",{staticClass:"wr_flipCardGameCardPopupV2_close",attrs:{eventid:"1_18"},on:{click:t.hide}})])},staticRenderFns:[]},(function(t){r(821)}),null,null);e.a=p.exports},173:function(t,e,r){var n=r(73),o=(r(2),r(12),{components:{Mask:n.a},data:function(){return{shown:!1,promptHandle:void 0}},methods:{show:function(){var t=this;this.promptHandle=setTimeout((function(){t.$refs.mask&&t.$refs.mask.showMask(),t.shown=!0}),1e3)},closeSelf:function(){var t=this;this.shown?this.$nextTick((function(){t.$refs.mask&&t.$refs.mask.closeMask(),t.shown=!1})):clearTimeout(this.promptHandle)}}}),i=r(7)(o,{render:function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"wr_subscribeBookPrompt"},[e("Mask",{ref:"mask",attrs:{"needs-close-button":!1,"show-animation":!0,"close-mask-callback":this.closeSelf,"custom-selector":"wr_subscribe_mask",mpcomid:"0"}}),this._v(" "),this.shown?e("view",{staticClass:"wr_subscribeBookPrompt_stage",attrs:{eventid:"1_0"},on:{click:this.closeSelf}},[this._m(0)]):this._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"wr_subscribeBookPrompt_info"},[e("img",{staticClass:"wr_subscribeBookPrompt_image",attrs:{mode:"aspectFit",src:"https://weread-1258476243.file.myqcloud.com/miniprogram/subscribe_prompt.png"}})])}]},(function(t){r(914)}),null,null);e.a=i.exports},174:function(t,e,r){var n=r(33),o=r.n(n),i=r(6),a=r.n(i),s=r(9),c={props:{title:{type:String,default:""},backgroundColor:{type:String,default:"#fff"},hijackBackButton:{type:Boolean,default:!1},customSelector:{type:[Object,String],default:""}},data:function(){return{showBackButton:!0,showHomeButton:!1,menuButtonHeight:32}},computed:a()({},Object(s.mapGetters)({statusBarHeight:"statusBarHeight",titleBarHeight:"navigationTitleBarHeight",navBarHeight:"navigationBarHeight"}),{buttonHeight:function(){return this.menuButtonHeight-12},backButtonWidth:function(){return Math.floor(this.buttonHeight/20*12)},homeButtonHeight:function(){return this.menuButtonHeight-6},homeButtonWidth:function(){return this.menuButtonHeight-6}}),mounted:function(){this.adjustStatusBarColor()},methods:{goBack:function(){this.hijackBackButton?this.$emit("back"):wx.navigateBack({delta:1})},goHome:function(){wx.redirectTo({url:"/pages/index/main"})},refreshControls:function(){var t=getCurrentPages(),e=!1,r=!0,n=!1,i=void 0;try{for(var a,s=o()(t);!(r=(a=s.next()).done);r=!0){var c=a.value;e||"pages/index/main"!==c.route||(e=!0)}}catch(t){n=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}this.showBackButton=1!==t.length,this.showHomeButton=!e},adjustStatusBarColor:function(){wx.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#000000",animation:{duration:400,timingFunc:"easeIn"}})}}},l=r(7)(c,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:["wr_navBar",t.customSelector]},[r("view",{staticClass:"wr_navBar_background",style:{height:t.navBarHeight+"px",backgroundColor:t.backgroundColor}}),t._v(" "),r("view",{staticClass:"wr_navBar_body",style:{height:t.navBarHeight+"px",backgroundColor:t.backgroundColor}},[r("view",{staticClass:"wr_navBar_body_statusBar",style:{height:t.statusBarHeight+"px"}}),t._v(" "),r("view",{staticClass:"wr_navBar_body_titleBar",style:{height:t.titleBarHeight+"px"}},[r("view",{staticClass:"wr_navBar_body_titleBar_buttons"},[t.showBackButton||t.hijackBackButton?r("view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_back",attrs:{"aria-role":"button","aria-label":"返回","hover-class":"wr_commonActive",eventid:"4_0"},on:{click:function(e){t.goBack()}}},[r("image",{style:{width:t.backButtonWidth+"px",height:t.buttonHeight+"px"},attrs:{src:"https://rescdn.qqmail.com/weread/assets/mini_program/mc_game_back.c67797c44b.svg"}})]):t._e(),t._v(" "),t.showHomeButton&&!t.hijackBackButton?r("view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_home",attrs:{"aria-role":"button","aria-label":"主页","hover-class":"wr_commonActive",eventid:"4_1"},on:{click:function(e){t.goHome()}}},[r("image",{style:{width:t.homeButtonWidth+"px",height:t.homeButtonHeight+"px"},attrs:{src:"https://rescdn.qqmail.com/weread/assets/mini_program/mc_game_home.svg"}})]):t._e()])])])])},staticRenderFns:[]},(function(t){r(969)}),null,null);e.a=l.exports},175:function(t,e,r){var n=r(73),o=r(104),i={components:{Mask:n.a},extends:o.a,props:{buttons:{type:Array,default:function(){return[]}},needsExitButton:{type:Boolean}},methods:{handleButtonClick:function(t){this.buttons[t].manualClose||this.closeModal(),this.$emit(this.buttons[t].type)},handleExitButtonClick:function(){this.closeModal(),this.$emit("exitGame")},handleLogin:function(t){this.$emit(this.buttons[t].type+"Login")}}},a=r(7)(i,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:[t.customSelector]},[r("Mask",{ref:"mask",attrs:{"responds-to-mask-dismiss":!1,"custom-selector":"typoGame_modalMask",eventid:"1_0",mpcomid:"0"},on:{click:t.closeModal}}),t._v(" "),r("view",{class:[{wr_modal:!0,wr_modal_Show:t.showing,wr_modal_Hide:t.hiding,typoGame_modal:!0},t.animationSelector],attrs:{eventid:"1_2"},on:{animationend:t.handleAnimationEnd}},[r("view",{staticClass:"typoGame_modal_cnt"},[t._t("default",null,{mpcomid:"1"})],2),t._v(" "),r("view",{class:["typoGame_modal_actions",{typoGame_modal_actions_SingleBtn:t.buttons.length<=1}]},t._l(t.buttons,(function(e,n){return r("button",{key:n,class:["typoGame_modal_actions_btn",{typoGame_modal_actions_btn_Back:"back"===e.type}],attrs:{id:e.buttonID,"aria-role":"button","hover-class":"wr_commonActive","open-type":e.openType,disabled:e.disabled,eventid:"3_1_"+n},on:{getUserInfo:function(e){t.handleLogin(n)},click:function(e){t.handleButtonClick(n)}}},[t._v("\n                "+t._s(e.title)+"\n            ")])})))]),t._v(" "),t.needsExitButton&&t.showing?r("view",{staticClass:"typoGame_modal_exitBtn"},[r("view",{staticClass:"typoGame_modal_exitBtn_text",attrs:{"hover-class":"wr_commonActive","aria-role":"button",eventid:"2_3"},on:{click:t.handleExitButtonClick}},[t._v("\n            退出游戏\n        ")])]):t._e()],1)},staticRenderFns:[]},(function(t){r(971)}),null,null);e.a=a.exports},176:function(t,e,r){var n={name:"Tabs",props:{customClass:{type:String,required:!1,default:""},tabItemList:{type:Array,required:!1,default:function(){return[]}},defaultIndex:{type:Number,required:!1,default:0}},data:function(){return{currentIndex:this.defaultIndex||0}},mounted:function(){this.$emit("tabActiveChange",this.currentIndex)},methods:{handleItemClick:function(t,e){this.currentIndex=e,this.$emit("tabActiveChange",this.currentIndex)}}},o=r(7)(n,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:[{wr_tabs:!0},t.customClass]},t._l(t.tabItemList,(function(e,n){return r("div",{key:n,class:["wr_tabs_item",n===t.currentIndex?"wr_tabs_item_Active":""],attrs:{eventid:"1_0_"+n},on:{click:function(r){t.handleItemClick(e,n)}}},[t._v("\n        "+t._s(e)+"\n    ")])})))},staticRenderFns:[]},(function(t){r(998)}),null,null);e.a=o.exports},177:function(t,e,r){var n={props:{customSelector:{type:[Object,String],default:""},selected:{type:String,default:""}},data:function(){return{localSelectedGrade:this.selected,grades:[{grade:"good",buttonText:"好看"},{grade:"fair",buttonText:"一般"},{grade:"poor",buttonText:"不行"}],prefix:"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/reader/book_ratings_button_grade_"}},watch:{selected:function(t){console.log("newVal",t),this.localSelectedGrade=t}},methods:{handleButtonClick:function(t){this.localSelectedGrade=t,this.$emit("rateButtonClick",{grade:t})}}},o=r(7)(n,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:["book_ratings_button_container",t.customSelector]},t._l(t.grades,(function(e,n){return r("view",{key:e.grade,class:["book_ratings_button",{book_ratings_button_Active:t.localSelectedGrade===e.grade,book_ratings_button_Good:"good"===e.grade,book_ratings_button_Fair:"fair"===e.grade,book_ratings_button_Poor:"poor"===e.grade}],attrs:{eventid:"1_0_"+n},on:{click:function(r){t.handleButtonClick(e.grade)}}},[r("div",{staticClass:"book_ratings_button_icon"}),t._v(" "),r("Text",{attrs:{mpcomid:"0_"+n}},[t._v(t._s(e.buttonText))])])})))},staticRenderFns:[]},(function(t){r(1053)}),null,null);e.a=o.exports},18:function(t,e,r){r.r(e);var n=r(6),o=r.n(n),i=r(9),a={props:{title:{type:String,default:""},buttonLabel:{type:String,default:""},additionalOffsetTop:{type:Number,default:0,required:!1}},computed:o()({},Object(i.mapGetters)({navBarHeight:"navigationBarHeight"})),methods:{handleClick:function(){this.$emit("click")}}},s=r(7)(a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{staticClass:"wr_emptyView",style:{top:t.navBarHeight+t.additionalOffsetTop+"px"}},[r("view",{staticClass:"wr_emptyView_cnt"},[t.title?r("view",{staticClass:"wr_emptyView_cnt_title"},[t._v("\n            "+t._s(t.title)+"\n        ")]):t._e(),t._v(" "),t.buttonLabel?r("view",{staticClass:"wr_emptyView_cnt_btn",attrs:{"hover-class":"wr_commonActive","aria-role":"button",eventid:"2_0"},on:{click:t.handleClick}},[t._v("\n            "+t._s(t.buttonLabel)+"\n        ")]):t._e()])])},staticRenderFns:[]},(function(t){r(684)}),null,null);e.default=s.exports},21:function(t,e,r){var n=r(33),o=r.n(n),i=r(6),a=r.n(i),s=r(9),c=r(0),l={components:{RedDot:r(163).default},props:{title:{type:String,default:""},backgroundColor:{type:String,default:"#fff"},colorScheme:{type:String,default:"light"},customSelector:{type:[Object,String],default:""},shouldShowGiftCollection:{type:Boolean},shouldShowGiftCollectionDot:{type:Boolean},goHomeAction:{type:Function,default:null},forceShowHome:{type:Boolean,default:!1}},data:function(){return{showBackButton:!0,showHomeButton:!1,menuButtonHeight:32}},computed:a()({},Object(s.mapGetters)({statusBarHeight:"statusBarHeight",titleBarHeight:"navigationTitleBarHeight",navBarHeight:"navigationBarHeight"}),{backButtonUrl:function(){return this.darkMode?"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/components/navigationBar/back_dark.png":"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/components/navigationBar/back.png"},homeButtonUrl:function(){return this.darkMode?"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/components/navigationBar/home_dark.png":"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/components/navigationBar/home.png"},titleColor:function(){return this.darkMode?"#FFF":"#212832"},darkMode:function(){return"dark"===this.colorScheme},titleFontSize:function(){return this.menuButtonHeight-15},buttonHeight:function(){return this.menuButtonHeight-8},backButtonWidth:function(){return Math.floor(this.buttonHeight/24*16)}}),methods:{goGiftCollection:function(){this.$store.dispatch(c.KV_LOG_REPORT,{itemname:"Wp_Nav_GiftCollection_Clk"}),this.$store.commit(c.INFINTE_COLLECTION_CLICKED),wx.navigateTo({url:"/pages/giftCollection/main"})},goBack:function(){wx.navigateBack({delta:1})},goHome:function(){this.goHomeAction?this.goHomeAction():wx.redirectTo({url:"/pages/index/main"})},refreshControls:function(){var t=getCurrentPages(),e=!1,r=!0,n=!1,i=void 0;try{for(var a,s=o()(t);!(r=(a=s.next()).done);r=!0){var c=a.value;e||"pages/index/main"!==c.route||(e=!0)}}catch(t){n=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}this.showBackButton=1!==t.length,this.showHomeButton=!e||this.forceShowHome},reportNavigationBarError:function(){this.$store.dispatch(c.KV_LOG_REPORT,{itemname:"Wp_Nav_Overlapping"})}}},u=r(7)(l,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:["wr_navBar","index_scroll_anchor",t.customSelector]},[r("view",{staticClass:"wr_navBar_background",style:{height:t.navBarHeight+"px",backgroundColor:t.backgroundColor},attrs:{eventid:"1_0"},on:{click:t.reportNavigationBarError}}),t._v(" "),r("cover-view",{staticClass:"wr_navBar_body",style:{height:t.navBarHeight+"px",backgroundColor:t.backgroundColor},attrs:{mpcomid:"11"}},[r("cover-view",{staticClass:"wr_navBar_body_statusBar",style:{height:t.statusBarHeight+"px"},attrs:{mpcomid:"0"}}),t._v(" "),r("cover-view",{staticClass:"wr_navBar_body_titleBar",style:{height:t.titleBarHeight+"px"},attrs:{mpcomid:"10"}},[r("cover-view",{staticClass:"wr_navBar_body_titleBar_buttons",attrs:{mpcomid:"8"}},[t.showBackButton?r("cover-view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_back",attrs:{"aria-role":"button","aria-label":"返回","hover-class":"wr_commonActive",eventid:"4_1",mpcomid:"2"},on:{click:function(e){t.goBack()}}},[r("cover-image",{style:{width:t.backButtonWidth+"px",height:t.buttonHeight+"px"},attrs:{src:t.backButtonUrl,mpcomid:"1"}})],1):t._e(),t._v(" "),t.showHomeButton?r("cover-view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_home",attrs:{"aria-role":"button","aria-label":"主页","hover-class":"wr_commonActive",eventid:"4_2",mpcomid:"4"},on:{click:function(e){t.goHome()}}},[r("cover-image",{style:{width:t.buttonHeight+"px",height:t.buttonHeight+"px"},attrs:{src:t.homeButtonUrl,mpcomid:"3"}})],1):t._e(),t._v(" "),t.shouldShowGiftCollection?r("cover-view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_giftCollection",attrs:{"aria-role":"button","aria-label":"获取无限卡","hover-class":"wr_commonActive",eventid:"4_3",mpcomid:"7"},on:{click:function(e){t.goGiftCollection()}}},[r("cover-image",{staticClass:"wr_navBar_body_titleBar_buttons_giftCollection_image",style:{width:t.menuButtonHeight+"px",height:t.menuButtonHeight+"px"},attrs:{src:"https://rescdn.qqmail.com/weread/assets/mini_program/gift_collection_3x.png",mpcomid:"5"}}),t._v(" "),t.shouldShowGiftCollectionDot?r("red-dot",{attrs:{cover:!0,mpcomid:"6"}}):t._e()],1):t._e()],1),t._v(" "),r("cover-view",{staticClass:"wr_navBar_body_titleBar_title",style:{color:t.titleColor,fontSize:t.titleFontSize+"px"},attrs:{mpcomid:"9"}},[t._v("\n                "+t._s(t.title)+"\n            ")])],1)],1)],1)},staticRenderFns:[]},(function(t){r(738)}),null,null);e.a=u.exports},22:function(t,e,r){r.r(e);var n=r(6),o=r.n(n),i=r(37),a=r(2),s=r(12),c=r(80),l=r(35),u=r(9),d=(r(3),new c.a),p={components:{Alert:i.default},props:{source:{type:String,default:"unknown"},header:{type:String,default:"下载微信读书 app"},intent:{type:String,default:""},firstIntent:{type:Boolean,default:!1},detailType:{type:String,validator:function(t){return["benefits","features","paying"].indexOf(t)>-1},default:"benefits"},buttonType:{type:String,validator:function(t){return["reply","redeem"].indexOf(t)>-1},default:"reply"},actionType:{type:String,validator:function(t){return["service","card"].indexOf(t)>-1},default:"service"},closeServicePromptCallback:{type:Function,default:null},customSelector:{type:String,default:""},colorStyle:{type:String,default:"default"},alterDivider:{type:String,default:""},blockedUserMessage:{type:String,default:"请前往微信读书 app 继续操作"},buttonText:{type:String,default:""}},data:function(){return{buttons:[{type:"confirm",title:"去下载"}],detailLabels:{benefits:["百万好书免费阅读","优质公众号一网打尽","精彩漫画、讲书看不停","看看微信好友在看什么书"],features:["支持左右滑动、仿生翻页","支持划线、写想法、制作书签","可查看其它用户的想法和书评","支持字体、亮度和进度的调节"],friends:["查看共同阅读本书的微信好友","查看共同阅读本书的全网书友","查看大家的精彩想法和评论"],paying:["书架无上限","出版、有声免费 / 网文八折","免广告","活动特权","专属字体"]}}},computed:o()({},Object(u.mapGetters)({shouldBlockedUser:"shouldBlockedUser"}),{appRedeemableDays:function(){return l.store.getters.appRedeemableDays},detailNodes:function(){return[{name:"ul",attrs:{class:"wr_customerServicePrompt_info_benefit"},children:this.detailLabels[this.detailType].map((function(t){return{type:"node",name:"li",attrs:{class:"wr_customerServicePrompt_info_benefit_item"},children:[{type:"text",text:"◇  "+t}]}}))}]}}),methods:{show:function(){this.shouldBlockedUser&&this.blockedUserMessage?wx.showToast({title:this.blockedUserMessage,icon:"none"}):(a.default.reportKVLog({itemname:"Wp_CustomerBtn_Engagement"}),a.default.reportKVLog({itemname:"Wp_CustomerBtn_"+this.source+"_Engagement"}),this.$refs.alert.showModal())},action:function(){s.default.reportClk(this.source),"service"===this.actionType?(s.default.reportCustomerPfClk(this.source),wx.navigateTo({url:"/pages/webview/main?url="+encodeURIComponent("https://mp.weixin.qq.com/s/K3uNnHg9wgtDAMSLUKpY1A")+"&title=微信读书"})):"card"===this.actionType&&this.appRedeemableDays>0&&(s.default.reportCardPfClk(this.source),d.openWxCard(this.appRedeemableDays))},closeSelf:function(){var t=this;a.default.reportKVLog({itemname:"Wp_CustomerBtn_Clk"}),a.default.reportKVLog({itemname:"Wp_CustomerBtn_"+this.source+"_Clk"}),this.action(),setTimeout((function(){t.$refs&&t.$refs.alert&&t.$refs.alert.closeModal()}),300),this.closeSelfCallback()},closeAlertCallback:function(){this.closeSelfCallback()},closeSelfCallback:function(){this.closeServicePromptCallback&&this.closeServicePromptCallback()}}},_=r(7)(p,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Alert",{ref:"alert",attrs:{"custom-selector":["wr_customerServicePrompt",t.customSelector],"needs-close-button":!0,"show-animation":!1,"close-alert-callback":t.closeAlertCallback,mpcomid:"1"}},[r("view",{class:["wr_customerServicePrompt_stage",{wr_customerServicePrompt_golden:"golden"===t.colorStyle}]},[r("view",{staticClass:"wr_customerServicePrompt_info"},[t.intent?r("view",{staticClass:"wr_customerServicePrompt_info_title"},[t.firstIntent?r("view",[r("view",[t._v(t._s(t.intent))]),t._v(" "),r("view",[t._v(t._s(t.header))])]):r("view",[r("view",[t._v(t._s(t.header))]),t._v(" "),r("view",{staticClass:"wr_customerServicePrompt_info_title_mainText"},[t._v(t._s(t.intent))])])]):r("view",{staticClass:"wr_customerServicePrompt_info_title"},[r("view",[t._v("下载")]),t._v(" "),r("view",{staticClass:"wr_customerServicePrompt_info_title_mainText"},[t._v("微信读书 app")])]),t._v(" "),t.alterDivider?r("view",{staticClass:"wr_customerServicePrompt_alterDivider"},[t._v(t._s(t.alterDivider))]):r("view",{staticClass:"wr_customerServicePrompt_divider"}),t._v(" "),r("rich-text",{attrs:{nodes:t.detailNodes,space:"nbsp",mpcomid:"0"}})],1),t._v(" "),t.buttonText?r("button",{staticClass:"wr_customerServicePrompt_stage_btn",attrs:{"hover-class":"wr_commonActive",eventid:"2_2"},on:{click:t.closeSelf}},[t._v("\n            "+t._s(t.buttonText)+"\n        ")]):"service"===t.actionType?r("button",{staticClass:"wr_customerServicePrompt_stage_btn",attrs:{"hover-class":"wr_commonActive",eventid:"2_0"},on:{click:t.closeSelf}},[t._v("\n            立即下载\n        ")]):"card"===t.actionType?r("button",{staticClass:"wr_customerServicePrompt_stage_btn",attrs:{"hover-class":"wr_commonActive",eventid:"2_1"},on:{click:t.closeSelf}},[t._v("\n            立即下载\n        ")]):t._e()],1)])},staticRenderFns:[]},(function(t){r(756)}),null,null);e.default=_.exports},224:function(t,e,r){r.r(e);var n=r(345),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.comment?r("view",{class:["wr_commentItem",t.customSelector]},[r("avatar",{attrs:{src:t.comment.author.avatar,"aria-label":t.comment.author.name,clickable:!0,"custom-class":"wr_commentItem_avatar",eventid:"1_0",mpcomid:"0"},on:{click:function(e){t.openProfile(t.comment.author.userVid)}}}),t._v(" "),r("div",{staticClass:"wr_commentItem_date"},[t._v(t._s(t.formattedCreateDate))]),t._v(" "),r("div",{staticClass:"wr_commentItem_user"},[t._v("\n        "+t._s(t.comment.author.name)+"\n    ")]),t._v(" "),r("emoticon-text",{attrs:{"custom-selector":"wr_commentItem_content",content:t.comment.content,mpcomid:"1"}})],1):t._e()},staticRenderFns:[]},(function(t){r(916)}),null,null);e.default=i.exports},231:function(t,e,r){r.r(e);var n=r(6),o=r.n(n),i=r(25),a=r(3),s=r(2),c=r(0),l=r(9),u=r(43),d=r(18),p=r(41),_=r.n(p),h=r(150),f=[27,31],m=[9],v={components:{AuthorizationPrompt:u.default,EmptyView:d.default},mixins:[Object(h.createIntersectionObserverMixin)(".giftCollection_item",{observeAll:!0},(function(t){this.handleCardExposure(t)}))],data:function(){return{shouldShowEmptyView:!1,perviousClickedCard:null}},computed:o()({},Object(l.mapGetters)({shouldShowGiftCollectionMoreGift:"shouldShowGiftCollectionMoreGift",giftActivityCardsInfo:"giftActivityCardsInfo",needAuthorized:"needAuthorized"}),{formattedRules:function(){return[{name:"ol",attrs:{class:"giftCollection_footer_rules"},children:this.giftActivityCardsInfo.rules.map((function(t){return{type:"node",name:"li",attrs:{class:"giftCollection_footer_rules_item"},children:[{type:"text",text:t}]}}))}]},formattedCards:function(){return this.giftActivityCardsInfo.cards.map((function(t,e){return t.volInfo&&(t.subTitle="第&nbsp;"+t.volInfo.periodNumber+"&nbsp;期&nbsp;&nbsp;&nbsp;"+t.volInfo.activityBegin+"&nbsp;-&nbsp;"+t.volInfo.activityEnd),~f.indexOf(t.id)?t.needAuthorize=!0:t.needAuthorize=!1,~m.indexOf(t.id)&&9===t.id&&(t.titleImageUrl="https://weread-1258476243.file.myqcloud.com/app/rn/image/category/logo/category_rising_color_3x.png",t.buttonText="立即参与",t.subTitle="分享得 1 天无限卡 · 百万好书免费读",t.buttonColorStart="#FF3D3E",t.buttonColorEnd="#F75998"),t.index=e,t}))},getTitleStyle:function(t){return t&&t.style&&t.style.title?(console.log("card.style.title",t.style.title),t.style.title):{}}}),mounted:function(){this.$store.dispatch(c.KV_LOG_REPORT,{itemname:"Wp_GiftCollection_Show"}),Object(i.b)({fonts:[i.a.DIN_MEDIUM,i.a.SOURCE_HAN_SERIF_CN_BOLD]}),console.log("[giftCollection mounted]")},methods:{initData:function(){var t=this;this.formattedCards.length<=0&&(wx.showLoading({title:"加载中…"}),this.$store.commit(c.UPDATE_USERINFO),this.$store.dispatch(c.GIFT_COLLECTION_ACTIVITY_LIST).catch((function(t){console.error("[获取无限卡]",t)})).finally((function(){wx.hideLoading(),console.log("[giftCollection initData]",t.formattedCards)})))},handleInviteFriendButtonClick:function(){this.$store.dispatch(c.KV_LOG_REPORT,{itemname:"Wp_GiftCollection_Invite_Friend_Clk"})},handleSubmit:function(t){t&&t.target&&t.target.formId&&this.$store.dispatch(c.REPORT_FORMID,{formId:t.target.formId,scene:2})},handleClickActivityCard:function(t,e){_.a.report({scene:p.ProtoWrMiniProgramCommonReport.tencent.wrbus.pb.WrMiniProgramCommonScene.wr_MiniProgram_common_scene_activity_cardlist,module:p.ProtoWrMiniProgramCommonReport.tencent.wrbus.pb.WrMiniProgramCommonModule.wr_MiniProgram_common_module_activity_card,action:"click",itemType:"activity_card",itemId:""+(e.type||e.id),index:e.index}),e.needAuthorize&&this.needAuthorized?this.perviousClickedCard=e:(t&&""!==t||(t="/pages/index/main"),s.default.analysisLog("mp_index_giftCollection_click",{id:e.id}),"playGame"===e.type&&(t="/pages/mcGame/game/main",this.$store.dispatch(c.KV_LOG_REPORT,{itemname:"Wp_mcGame_Open_From_GiftCollection"})),wx.navigateTo({url:t}))},handleAuthorization:function(t){var e=this,r=this.perviousClickedCard;t&&t.target&&t.target.userInfo&&a.default.handleUserInfoAuthorization(t,(function(){e.$store.dispatch(c.UPDATE_USERINFO),"share"!==r.btnOpenType&&e.handleClickActivityCard(r.path,r)}),(function(t){console.error(t)})),this.perviousClickedCard=null},handleCardExposure:function(t){if(this.formattedCards&&t&&t.id&&t.isVisible){var e=parseInt(t.id),r=this.formattedCards.findIndex((function(t){return t.id===e})),n=this.formattedCards[r];_.a.report({scene:p.ProtoWrMiniProgramCommonReport.tencent.wrbus.pb.WrMiniProgramCommonScene.wr_MiniProgram_common_scene_activity_cardlist,module:p.ProtoWrMiniProgramCommonReport.tencent.wrbus.pb.WrMiniProgramCommonModule.wr_MiniProgram_common_module_activity_card,action:"exposure",itemType:"activity_card",itemId:""+(n.type||n.id),index:r})}}},onShow:function(){console.log("[giftCollection onShow]")}},g=r(7)(v,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",[t.shouldShowEmptyView?r("empty-view",{attrs:{title:"加载失败","button-label":"重试",eventid:"1_2",mpcomid:"1"},on:{click:t.retryLoad}}):t.formattedCards.length>0?r("view",{staticClass:"giftCollection_main"},[r("view",{staticClass:"giftCollection_list"},t._l(t.formattedCards,(function(e,n){return r("view",{key:n,class:[{giftCollection_item:!0,giftCollection_item_Clickable:"share"!==e.btnOpenType}],attrs:{id:e.id,"hover-class":"wr_active",eventid:"3_1_"+n},on:{click:function(r){"share"!==e.btnOpenType&&t.handleClickActivityCard(e.path,e)}}},[r("img",{staticClass:"giftCollection_item_img",attrs:{src:e.image,"aria-label":e.title,mode:"widthFix"}}),t._v(" "),r("view",{staticClass:"giftCollection_item_cnt"},[r("view",{staticClass:"giftCollection_item_cnt_info"},[e.titleImageUrl?r("view",{staticClass:"giftCollection_item_cnt_info_title image",style:{"background-image":"url("+e.titleImageUrl+")"}}):r("view",{staticClass:"giftCollection_item_cnt_info_title",style:{color:e.titleColor}},[t._v(t._s(e.title))]),t._v(" "),r("view",{staticClass:"giftCollection_item_cnt_info_desc"},[r("text",{attrs:{decode:!0}},[t._v(t._s(e.subTitle))])])]),t._v(" "),"share"===e.btnOpenType?r("button",{staticClass:"wr_btn wr_btn_PaleGold giftCollection_item_cnt_actionBtn",attrs:{id:e.type,"open-type":"share","hover-class":"wr_commonActive"}},[t._v("\n                        "+t._s(e.buttonText)+"\n                    ")]):e.buttonColorStart?r("view",{staticClass:"wr_btn wr_btn_PaleGold giftCollection_item_cnt_actionBtn",style:{"background-image":"linear-gradient(90deg, "+e.buttonColorStart+" 0%, "+e.buttonColorEnd+" 100%)",color:"#FFF"}},[t._v("\n                        "+t._s(e.buttonText)+"\n                    ")]):r("view",{staticClass:"wr_btn wr_btn_PaleGold giftCollection_item_cnt_actionBtn"},[t._v("\n                        "+t._s(e.buttonText)+"\n                    ")])],1),t._v(" "),e.needAuthorize&&t.needAuthorized?r("button",{staticClass:"giftCollection_authorization_button",attrs:{"open-type":"getUserInfo",eventid:"4_0_"+n},on:{getuserinfo:t.handleAuthorization}}):t._e()],1)}))),t._v(" "),t.shouldShowGiftCollectionMoreGift?r("view",{staticClass:"giftCollection_footer"},[r("view",{staticClass:"giftCollection_footer_title"},[t._v("你还可以通过“阅读时长积累”获得无限卡")]),t._v(" "),r("rich-text",{attrs:{nodes:t.formattedRules,mpcomid:"0"}})],1):t._e()]):t._e(),t._v(" "),r("authorization-prompt",{ref:"prompt",attrs:{mpcomid:"2"}})],1)},staticRenderFns:[]},(function(t){r(836)}),null,null);e.default=g.exports},232:function(t,e,r){r.r(e);var n=r(40),o=r.n(n),i=r(6),a=r.n(i),s=r(9),c={props:{customSelector:{type:[Object,String],default:""},min:{type:Number,required:!0},max:{type:Number,required:!0},value:{type:Number,required:!0},showHint:{type:Boolean,default:!1},hintList:{type:Array,default:function(){return[]}}},data:function(){return{currentValue:this.value}},computed:a()({},Object(s.mapState)({theme:function(t){return t.profile.user.theme}}),{itemCount:function(){return Math.max(this.max-this.min+1,4)},itemCountSelector:function(){return"wr_customSliderWrap_Count"+this.itemCount},displayHintList:function(){var t=new Array(this.itemCount).fill("");return t.splice.apply(t,[0,this.hintList.length].concat(o()(this.hintList))),t}}),watch:{value:function(){this.currentValue=this.value}},methods:{emitOnChange:function(t){this.value=this.currentValue,this.$emit("change",t)}}},l=r(7)(c,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:[{wr_customSliderWrap:!0},t.itemCountSelector,t.customSelector]},[r("view",{staticClass:"wr_customSliderWrap_dividing"},[r("view",{staticClass:"wr_customSliderWrap_dividing_inner"},t._l(t.itemCount,(function(e,n){return r("view",{key:e,staticClass:"wr_customSliderWrap_dividing_item"},[t.showHint?r("view",{staticClass:"wr_customSliderWrap_dividing_item_hint"},[t._v(t._s(t.displayHintList[e]))]):t._e()])}))),t._v(" "),t._t("default",null,{mpcomid:"0"})],2),t._v(" "),r("slider",{staticClass:"wr_customSlider",attrs:{min:t.min,max:t.max,"block-color":"#FFF","block-size":"18","active-color":"transparent","background-color":"transparent",value:t.currentValue,eventid:"1_0"},on:{change:t.emitOnChange}})])},staticRenderFns:[]},(function(t){r(946)}),null,null);e.default=l.exports},233:function(t,e,r){r.r(e);var n=r(335),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.shouldShowPinTips?r("view",{class:["wr_pinTip",t.customSelector],style:t.pinTipStyleObj},[r("view",{staticClass:"wr_pinTip_arrow",style:t.pinTipArrowStyleObj}),t._v(" "),t._m(0),t._v(" "),r("view",{staticClass:"wr_pinTip_closeBtn",attrs:{"aria-role":"button","aria-label":"关闭添加小程序提示","hover-class":"wr_commonActive",eventid:"1_0"},on:{click:t.closePinTip}})]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"wr_pinTip_info"},[e("view",{staticClass:"wr_pinTip_info_title"},[this._v("添加到我的小程序")]),this._v(" "),e("view",{staticClass:"wr_pinTip_info_desc"},[this._v("百万好书随时阅读")])])}]},(function(t){r(850)}),null,null);e.default=i.exports},234:function(t,e,r){r.r(e);var n=r(316),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:[t.customSelector]},[r("Mask",{ref:"mask",attrs:{"responds-to-mask-dismiss":t.respondsToMaskDismiss,"show-animation":t.showAnimation,eventid:"1_0",mpcomid:"0"},on:{click:t.handleMaskClick}}),t._v(" "),r("view",{class:[t.showAnimation?{wr_bottomModal:!0,wr_bottomModal_Show:t.showing,wr_bottomModal_Hide:t.hiding,wr_bottomModal_wrap:!0}:{wr_bottomModal:!0,wr_bottomModal_Visible:t.showing},t.animationSelector,t.contentSelector],attrs:{"disable-scroll":"true",eventid:"1_2"},on:{touchmove:function(t){t.stopPropagation()},animationend:t.handleAnimationEnd}},[r("view",[r("view",{staticClass:"wr_bottomModal_indicator_cnt",attrs:{eventid:"3_1"},on:{click:t.handleIndicatorClick}},[r("view",{staticClass:"wr_bottomModal_indicator"})])]),t._v(" "),t._t("default",[r("view",{staticClass:"wr_bottomModal_cnt"},[r("view",{staticClass:"wr_bottomModal_title"},[t._v("\n                    "+t._s(t.title)+"\n                ")]),t._v(" "),t.content&&t.contentNeedsScroll?r("scroll-view",{staticClass:"wr_bottomModal_text",attrs:{"scroll-top":"right","scroll-y":"true"}},[r("view",{staticClass:"wr_bottomModal_text_value"},[t._v("\n                        "+t._s(t.content)+"\n                    ")])]):t.content?r("view",{staticClass:"wr_bottomModal_text"},[t._v("\n                    "+t._s(t.content)+"\n                ")]):t._e()],1)],{mpcomid:"1"})],2)],1)},staticRenderFns:[]},(function(t){r(771)}),null,null);e.default=i.exports},24:function(t,e,r){r.r(e);var n=r(228),o={name:"Avatar",props:{src:{type:String,required:!0},size:{type:Number,default:24},alt:{type:String,default:""},customClass:{type:[Object,String],default:""},clickable:{type:Boolean}},computed:{displaySize:function(){return{width:this.size,height:this.size}},adjustedSrc:function(){return Object(n.suitableAvatar)(this.src,this.displaySize.width)}},methods:{emitOnClick:function(t){if(!this.clickable)return!1;this.$emit("click",t)}}},i=r(7)(o,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:[{wr_avatar:!0},t.customClass],attrs:{"hover-class":t.clickable?"wr_commonActive":"",eventid:"0_0"},on:{click:function(e){e.stopPropagation(),t.emitOnClick(e)}}},[r("image",{staticClass:"wr_avatar_img",attrs:{src:t.adjustedSrc,"lazy-load":!0,"aria-label":t.alt}}),t._v(" "),t._t("default",null,{mpcomid:"0"})],2)},staticRenderFns:[]},(function(t){r(678)}),null,null);e.default=i.exports},265:function(t,e,r){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(a,s)}c((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var l=s(r(264)),u=s(r(2)),d=s(r(483)),p=c(r(19)),_=s(r(165)),h=s(r(3)),f=c(r(88)),m=s(r(15)),v=r(266),g="method not available in base class",w=[0,.2036613272311213,.2379862700228833,.2036613272311213,.2379862700228833],C=[.7,1,1.3,1.6,2];function b(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}function y(t){return new Promise((function(e){return setTimeout(e,t)}))}var k=function(){function t(t,e,r,n,o,i){var a=this;this.backgroundAudioManager=wx.getBackgroundAudioManager(),this.backgroundAudioManager.onStop((function(){a.isSeeking=!1,b("player stop, not ready")})),this.backgroundAudioManager.stop(),this.progressRecord=i,this.currentAudioSrc="",this.title="",this.epname=n,this.cover=o,this.bookId=t,this.chapterIdx=r,this.isPaused=!0,this.duration=i&&i.duration||0,this.currentTime=i&&i.currentTime||0,this.initialTime=i&&i.currentTime||0,this.isSeeking=!1,this.playBackRate=e,this.pauseOnChapterEnd=!1,this.isLoading=!1,this.currentParaIndex=0,this.currentSentIndex=0,this.updateProgressThrottle=!1,this.onChapterEndCallback=function(){},this.isAndroid=h.default.isAndroid,this.isEnded=!1,this.isInit=!1,this.lastRecordProgressTime=0,this.backgroundAudioManager.onPause((function(){b("player pause"),a.isPaused=!0})),this.backgroundAudioManager.onPlay((function(){b("player play"),a.isPaused=!1,a.isLoading=!1})),this.backgroundAudioManager.onTimeUpdate((function(){a.updateProgressThrottle||a.isPaused||a.isAndroid&&a.isSeeking||(a.updateProgressThrottle=!0,setTimeout((function(){a.updateProgressThrottle=!1}),200),a.handleProgressChanged())})),this.backgroundAudioManager.onSeeking((function(){b("player seek"),a.isSeeking=!0,setTimeout((function(){a.isSeeking=!1}),1e3)})),this.backgroundAudioManager.onSeeked((function(){b("player seeked"),a.isSeeking=!1})),this.backgroundAudioManager.onEnded((function(){b("player end"),a.handleChapterEnd()})),this.backgroundAudioManager.onNext((function(){b("player next"),a.nextChapter()})),this.backgroundAudioManager.onPrev((function(){b("player prev"),a.prevChapter()})),this.backgroundAudioManager.onWaiting((function(){b("player waiting"),a.isLoading=!0})),this.backgroundAudioManager.onCanplay((function(){b("player canplay"),a.isAndroid&&a.backgroundAudioManager.playbackRate!==C[a.playBackRate]&&(a.backgroundAudioManager.playbackRate=C[a.playBackRate]),a.isSeeking=!1,a.isLoading=!1})),this.backgroundAudioManager.onError((function(t){a.isLoading=!1,a.isPaused=!0,a.handleError(!1,"Player error "+t)})),b("player instance create")}return t.prototype.play=function(){b("player user play"),this.isEnded?this.nextChapter():(this.isInit||(this.backgroundAudioManager.playbackRate=C[this.playBackRate]),this.backgroundAudioManager.play())},t.prototype.pause=function(){b("player user pause"),this.backgroundAudioManager.pause(),this.isLoading=!1,this.isPaused=!0},t.prototype.stop=function(){b("player user stop"),this.backgroundAudioManager.stop(),this.isLoading=!1,this.isPaused=!0},t.prototype.onChapterEnd=function(t){this.onChapterEndCallback=t},t.prototype.setPlayBackRate=function(t){b("player user change speed"),this.playBackRate=t,this.backgroundAudioManager&&(this.backgroundAudioManager.playbackRate=C[t])},t.prototype.setPauseOnChapterEnd=function(t){b("player pause on end",t),this.pauseOnChapterEnd=t},t.prototype.playChapter=function(t){throw new Error(g+t)},t.prototype.handlePlayingFinished=function(){this.backgroundAudioManager.stop(),this.isPaused=!0,this.isLoading=!1,this.isEnded=!0},t.prototype.nextChapter=function(){return this.chapterIdx>=f.store.state.playingChapters.length-1?(wx.showToast({icon:"none",title:"已经是最后一章了"}),void this.handlePlayingFinished()):this.playChapter(this.chapterIdx+1)},t.prototype.prevChapter=function(){if(!(this.chapterIdx<=0))return this.playChapter(this.chapterIdx-1);wx.showToast({icon:"none",title:"已经是第一章了"})},t.prototype.seek=function(t){throw new Error(g+t)},t.prototype.handleProgressChanged=function(){throw new Error(g)},t.prototype.setTTSVoice=function(t){throw new Error(g+t)},t.prototype.resetPlayer=function(){var t=this;this.backgroundAudioManager=wx.getBackgroundAudioManager(),this.backgroundAudioManager.stop(),this.currentAudioSrc="",this.isPaused=!0,this.duration=0,this.currentTime=0,this.isSeeking=!1,this.isLoading=!1,this.currentParaIndex=0,this.currentSentIndex=0,this.updateProgressThrottle=!1,this.isEnded=!1,this.isInit=!1,this.backgroundAudioManager.onStop((function(){t.isSeeking=!1,b("player stop, not ready")}))},t.prototype.handleError=function(t,e){void 0===t&&(t=!1),console.log("[lecturePlayer Error]",e),f.store.dispatch(f.REPORT_LOG,{itemname:"mp_lecturePlayer_error",extra:{bookId:this.bookId,message:e}}),t?(wx.showToast({icon:"none",title:"出现错误，请重试"}),this.resetPlayer()):wx.showToast({icon:"none",title:"出现错误"})},t.prototype.recordProgress=function(){var t=+new Date,e="LECTURE_"+this.bookId;if(t-this.lastRecordProgressTime>5e3){var r={lectureType:this.lectureType,chapterIdx:this.chapterIdx,currentTime:this.currentTime,duration:this.duration,lecturerVid:f.store.state.currentLecturer.userVid};m.default.setStorage({key:e,data:r}),this.lastRecordProgressTime=t}},Object.defineProperty(t.prototype,"lectureType",{get:function(){return"unset"},enumerable:!0,configurable:!0}),t.prototype.handleChapterEnd=function(){var t=this.onChapterEndCallback();this.pauseOnChapterEnd||!t?(this.isEnded=!0,this.isPaused=!0,this.pauseOnChapterEnd=!1):this.nextChapter()},t}(),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.playChapter=function(t,e){var r=this;if(b("LECTURE play chapter"),this.isEnded&&void 0===t)this.nextChapter();else{if(this.isPaused=!1,this.isLoading=!0,this.isEnded=!1,this.isSeeking=!1,f.store.commit(f.SET_MINI_PLAYER_STATE,!0),void 0!==t||!this.isInit)return void 0!==t&&(this.chapterIdx=t),this.loadChapterAudio(this.chapterIdx).then((function(n){r.isInit=!0,r.title=f.store.state.playingChapters[r.chapterIdx].title,r.currentAudioSrc=n,r.backgroundAudioManager.src=r.currentAudioSrc,r.backgroundAudioManager.title=r.epname,r.backgroundAudioManager.epname=r.epname,r.backgroundAudioManager.singer=r.title,r.backgroundAudioManager.coverImgUrl=r.cover,e?r.backgroundAudioManager.startTime=e:r.initialTime&&void 0===t?r.backgroundAudioManager.startTime=r.initialTime:r.backgroundAudioManager.startTime=0,r.initialTime=0,r.play(),r.backgroundAudioManager.onStop((function(){r.isSeeking=!1,r.isPaused=!0,r.currentTime=0})),f.store.dispatch(f.REPORT_LOG,{itemname:"mp_lecturePlayer_play",extra:{bookId:r.bookId,chapterIdx:r.chapterIdx}})})).catch((function(){r.handleError(!0,"loadChapterAudio retry max attempts")}));this.play()}},e.prototype.handleProgressChanged=function(){this.isInit&&(this.currentTime=this.backgroundAudioManager.currentTime,this.duration=this.backgroundAudioManager.duration,this.recordProgress())},e.prototype.seek=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return b("LECTURE seek"),!this.isEnded&&this.isInit?[3,2]:[4,this.playChapter(this.chapterIdx,t)];case 1:e.sent(),this.isEnded=!1,e.label=2;case 2:return this.isLoading=!0,this.currentTime=t,this.backgroundAudioManager.seek(t),this.currentTime=t,[2]}}))}))},Object.defineProperty(e.prototype,"lectureType",{get:function(){return"LECTURE"},enumerable:!0,configurable:!0}),e.prototype.loadChapterAudio=function(t,e){var r=this;if(void 0===e&&(e=3),b("LECTURE load chapter"),--e<0)return Promise.reject(new Error("max attempts"));if(t>f.store.state.playingChapters.length)return Promise.reject(new Error("chapterIdx out of range"));if(!f.store.state.playingChapters[t])return Promise.reject(new Error("chapter not found"));var n=f.store.state.playingChapters[t].audioId,o=f.store.state.playingChapters[t].reviewId;return l.default.loadChapterAudio(n,o).then((function(n){return i(r,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return n&&n.url?[2,n.url]:[3,1];case 1:return[4,y(1e3)];case 2:return r.sent(),[2,this.loadChapterAudio(t,e)]}}))}))})).catch((function(){return i(r,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,y(1e3)];case 1:return r.sent(),[2,this.loadChapterAudio(t,e)]}}))}))}))},e}(k);e.LectureAudioManager=P;var T=function(t){function e(e,r,n,o,i,a,s,c,l){var u=t.call(this,e,r,n,i,a,l)||this;return u.format=s,u.paragraphTimeUsed=[],u.sentenceTimeUsed=[],u.ttsDuration=0,u.lecturer=c,u.ttsContent=[],u.initParaIndex=o||0,u.progressChanged=!1,u}return o(e,t),e.prototype.initTTS=function(){return b("TTS init"),this.isInit||(this.progressChanged=!0),this.isInit=!0,this.tts=new d.default(this.backgroundAudioManager,this.lecturer),this.tts.init({bookTitle:this.epname,chapterTitle:this.title,cover:this.cover})},e.prototype.loadChapter=function(){var t=this;b("TTS load chapter");var r=f.store.state.playingChapters[this.chapterIdx].chapterUid;return u.default.loadChapterContent(this.bookId,r,"none",0,this.format).then((function(n){var o=p.chapterContentParse(n.content),i=v.appendBookTitle2Content(o,v.parseBookTitle(f.store.state.playingChapters[t.chapterIdx],t.format));t.ttsContent=i;var a=e.calculateTTSDuration(t.bookId,i,r,t.lecturer),s=a.ttsDuration,c=a.paragraphTimeUsed,l=a.sentenceTimeUsed;t.ttsDuration=s,t.paragraphTimeUsed=c,t.sentenceTimeUsed=l}))},e.prototype.playChapter=function(t){var e=this;if(b("TTS play chapter"),f.store.getters.isTrialRead&&!f.store.getters.isTrialPlayingChapter(t||this.chapterIdx))return wx.showToast({icon:"none",title:"应版权方要求，本书仅支持试读"}),void f.store.dispatch(f.REPORT_LOG,{itemname:"mp_lecturePlayer_trial_Block",extra:{bookId:this.bookId,chapterIdx:t||this.chapterIdx}});if(this.isEnded&&void 0===t)this.nextChapter();else{if(this.isPaused=!1,this.isLoading=!0,this.isEnded=!1,this.isSeeking=!1,f.store.commit(f.SET_MINI_PLAYER_STATE,!0),void 0!==t||!this.isInit)return void 0!==t&&(this.chapterIdx=t),this.backgroundAudioManager.stop(),this.initTTS().then((function(){return e.loadChapter().then((function(){e.backgroundAudioManager.title=e.epname,e.backgroundAudioManager.epname=e.epname,e.backgroundAudioManager.singer=e.title,e.backgroundAudioManager.coverImgUrl=e.cover,e.backgroundAudioManager.startTime=0,e.initialTime&&!e.initParaIndex&&void 0===t?e.seek(e.initialTime):e.tts.playFromParagraphAndSentenceIndex(e.initParaIndex,0,f.store.state.playingChapters[e.chapterIdx],e.ttsContent,e.updateTTSProgress.bind(e),e.handleChapterEnd.bind(e)),e.initialTime=0,e.initParaIndex=0,e.progressChanged=!0,e.backgroundAudioManager.onStop((function(){e.isSeeking=!1,e.isPaused=!0,e.currentTime=0})),f.store.dispatch(f.REPORT_LOG,{itemname:"mp_lecturePlayer_play",extra:{bookId:e.bookId,chapterIdx:e.chapterIdx,lecturer:e.lecturer}})}))}));this.tts.playTTS()}},e.prototype.seek=function(t){return i(this,void 0,void 0,(function(){var e,r,n;return a(this,(function(o){switch(o.label){case 0:return b("TTS seek"),this.tts?[3,2]:[4,this.initTTS()];case 1:o.sent(),o.label=2;case 2:return this.isEnded?[4,this.playChapter(this.chapterIdx)]:[3,4];case 3:o.sent(),this.isEnded=!1,o.label=4;case 4:return this.backgroundAudioManager.pause(),this.isLoading=!0,this.ttsContent&&this.ttsContent.length?[3,6]:[4,this.loadChapter()];case 5:o.sent(),o.label=6;case 6:return e=this.transformTime2Position(t),r=e.predictParaIndex,n=e.predictSentIndex,this.currentTime=t,this.progressChanged=!0,this.tts.playFromParagraphAndSentenceIndex(r,n,f.store.state.playingChapters[this.chapterIdx],this.ttsContent,this.updateTTSProgress.bind(this),this.handleChapterEnd.bind(this)),[2]}}))}))},e.prototype.handleProgressChanged=function(){if(this.isInit){var t=e.transformPosition2Time(this.currentParaIndex,this.currentSentIndex,this.paragraphTimeUsed,this.sentenceTimeUsed)+this.backgroundAudioManager.currentTime;(t>this.currentTime||this.progressChanged)&&(this.currentTime=t,this.progressChanged=!1),this.duration=this.ttsDuration,this.recordProgress()}},e.prototype.updateTTSProgress=function(t,e){this.currentParaIndex=t,this.currentSentIndex=e,console.log(t,e)},e.prototype.setPlayBackRate=function(t){b("TTS change speed"),this.backgroundAudioManager&&this.tts&&(this.playBackRate=t,this.backgroundAudioManager.playbackRate=C[t],this.tts.setPlayBackRate(C[t]))},e.transformWord2Time=function(t,e){return Math.floor(t*w[e]*10)/10},e.calculateTTSDuration=function(t,r,n,o){var i=_.default.splitParagraph(t,n,r),a=[0],s=new Array(i.length);return i.forEach((function(t,r){if(!t||!t.length)return s[r]=[0],void a.push(a[r]);var n=e.transformWord2Time(t[t.length-1].end,o);a.push(n+a[r]),s[r]=[0].concat(t.map((function(t){return e.transformWord2Time(t.end,o)})))})),{ttsDuration:a[a.length-1],paragraphTimeUsed:a,sentenceTimeUsed:s}},e.transformPosition2Time=function(t,e,r,n){if(!r.length||!n.length)return 0;var o=n[t]?n[t][e]:0;return r[t]+o},e.prototype.transformTime2Position=function(t){if(0===t)return{predictParaIndex:0,predictSentIndex:0};var e=0,r=0;for(var n in this.paragraphTimeUsed)if(this.paragraphTimeUsed[n]>=t){e=parseInt(n)-1;break}if(this.sentenceTimeUsed[e])for(var o in r=0,this.sentenceTimeUsed[e])if(this.sentenceTimeUsed[e][o]>=t-this.paragraphTimeUsed[e]){r=parseInt(o)-1;break}return{predictParaIndex:e,predictSentIndex:r}},e.prototype.setTTSVoice=function(t){this.lecturer=t,this.tts.setTTSVoice(t),this.seek(this.currentTime)},Object.defineProperty(e.prototype,"lectureType",{get:function(){return"TTS"},enumerable:!0,configurable:!0}),e}(k);e.TTSAudioManager=T},266:function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.parseBookTitle=function(t,e){return t?"epub"===e?t.title:"第"+t.chapterIdx+"章 "+t.title:""},e.appendBookTitle2Content=function(t,e){return t[0]&&t[0].includes(e)?t:[e].concat(t)},e.getChapterIdx=function(t,e){var r=0;return e&&t.forEach((function(t,n){t.chapterUid===e&&(r=n)})),r}},28:function(t,e,r){r.r(e),e.default={openFromAppShare:function(t){var e=t.scene;return console.log("mxd scene:",e),1036===e||1069===e},MAX_CLICK_CAPTURE_TIME:2}},287:function(t,e,r){r.r(e);var n=r(7)({data:function(){return{selfRank:1,showModal:!1,ranks:[{rankName:"伴读书童",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/1.png"},{rankName:"倔强童生",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/2.png"},{rankName:"快乐秀才",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/3.png"},{rankName:"进击举人",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/4.png"},{rankName:"荣耀贡士",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/5.png"},{rankName:"尊贵进士",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/6.png"},{rankName:"进士及第",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/7.png"},{rankName:"状元郎",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/8.png"},{rankName:"大文豪",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/9.png"},{rankName:"文圣",rankIcon:"https://weread-1258476243.file.myqcloud.com/miniprogram/battlegame/level_icon/10.png"}]}},methods:{show:function(t){this.selfRank=t,this.showModal=!0,this.$emit("toggleBackgroundBlur",!0)},handleCloseModal:function(){this.showModal=!1,this.$emit("toggleBackgroundBlur",!1)}}},{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.showModal?r("view",{staticClass:"battleGame_rank_modal",attrs:{eventid:"0_1"},on:{click:t.handleCloseModal}},[r("scroll-view",{staticClass:"battleGame_rank_modal_content",attrs:{"scroll-y":"true"}},[r("view",{staticClass:"battleGame_rank_modal_title"},[t._v("\n            进阶之路\n        ")]),t._v(" "),r("view",{staticClass:"battleGame_rank_modal_icons"},t._l(t.ranks,(function(e,n){return r("view",{key:n,class:["battleGame_rank_modal_icon_item",{extend:9===n}]},[r("image",{class:["battleGame_rank_modal_rankIcon",{gray:n+1>t.selfRank,extend:9===n}],attrs:{src:e.rankIcon}}),t._v(" "),r("view",{class:["battleGame_rank_modal_rankName",{gray:n+1>t.selfRank}]},[t._v("\n                    "+t._s(e.rankName)+"\n                ")])])})))]),t._v(" "),r("view",{staticClass:"battleGame_rank_modal_cancel",attrs:{eventid:"1_0"},on:{click:t.handleCloseModal}})],1):t._e()},staticRenderFns:[]},(function(t){r(713)}),null,null);e.default=n.exports},288:function(t,e,r){r.r(e);var n={props:{progress:{type:Number,required:!0}},data:function(){return{bgStyleDefault:'background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><defs> <linearGradient x1="100%" y1="50%" x2="50%" y2="100%" id="linearGradient-1"> <stop stop-color="#0AF1FF" offset="0%"></stop> <stop stop-color="#008BFF" offset="100%"></stop> </linearGradient> </defs><circle transform="rotate(-90, 30, 30)" id="a" cx="30" cy="30" r="28" stroke="url(#linearGradient-1)" stroke-width="4" fill="none" stroke-dasharray="176" stroke-dashoffset="0"> </circle> </svg>\')',bgStyle:'background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><defs> <linearGradient x1="100%" y1="50%" x2="50%" y2="100%" id="linearGradient-1"> <stop stop-color="#0AF1FF" offset="0%"></stop> <stop stop-color="#008BFF" offset="100%"></stop> </linearGradient> </defs> <circle id="tag_'+(new Date).getTime()+'" transform="rotate(-90, 30, 30)" cx="30" cy="30" r="28" stroke="url(#linearGradient-1)" stroke-width="4" stroke-opacity="0.2" fill="transparent"/> <circle transform="rotate(-90, 30, 30)" id="a" cx="30" cy="30" r="28" stroke="url(#linearGradient-1)" stroke-width="4" fill="none" stroke-dasharray="176" stroke-dashoffset="0"> <animate attributeName="stroke-dashoffset" from="352" to="176" dur="12s"/> </circle> </svg>\')'}}},o=r(7)(n,{render:function(){var t=this.$createElement,e=this._self._c||t;return 0===this.progress?e("view",{staticClass:"raceGame_countdown default",style:this.bgStyleDefault}):e("view",{staticClass:"raceGame_countdown",style:this.bgStyle})},staticRenderFns:[]},(function(t){r(1024)}),null,null);e.default=o.exports},29:function(t,e,r){r.r(e);var n=r(301),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:["wr_navBar",t.customSelector]},[t.translucent?t._e():r("view",{staticClass:"wr_navBar_background",style:{height:t.navBarHeight+"px",backgroundColor:t.backgroundColor},attrs:{eventid:"1_0"},on:{click:t.reportNavigationBarError}}),t._v(" "),t.translucent?r("view",{staticClass:"wr_navBar_body",style:{height:t.navBarHeight+"px",backgroundColor:t.backgroundColor}},[r("view",{staticClass:"wr_navBar_body_statusBar",style:{height:t.statusBarHeight+"px"}}),t._v(" "),r("view",{staticClass:"wr_navBar_body_titleBar",style:{height:t.titleBarHeight+"px"}},[r("view",{staticClass:"wr_navBar_body_titleBar_buttons"},[t.showBackButton?r("view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_back",attrs:{"aria-role":"button","aria-label":"返回","hover-class":"wr_commonActive",eventid:"4_4"},on:{click:function(e){t.goBack()}}},[r("image",{style:{width:t.backButtonWidth+"px",height:t.buttonHeight+"px"},attrs:{src:t.backButtonUrl}})]):t._e(),t._v(" "),t.showHomeButton?r("view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_home",attrs:{"aria-role":"button","aria-label":"主页","hover-class":"wr_commonActive",eventid:"4_5"},on:{click:function(e){t.goHome()}}},[r("image",{style:{width:t.buttonHeight+"px",height:t.buttonHeight+"px"},attrs:{src:t.homeButtonUrl}})]):t._e(),t._v(" "),t.shouldShowGiftCollection?r("view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_giftCollection",attrs:{"aria-role":"button","aria-label":"获取无限卡","hover-class":"wr_commonActive",eventid:"4_6"},on:{click:function(e){t.goGiftCollection()}}},[r("image",{staticClass:"wr_navBar_body_titleBar_buttons_giftCollection_image",style:{width:t.menuButtonHeight+"px",height:t.menuButtonHeight+"px"},attrs:{src:"https://rescdn.qqmail.com/weread/assets/mini_program/gift_collection_3x.png"}}),t._v(" "),t.shouldShowGiftCollectionDot?r("red-dot",{attrs:{cover:!0,mpcomid:"12"}}):t._e()],1):t._e()]),t._v(" "),r("view",{staticClass:"wr_navBar_body_titleBar_title",style:{color:t.titleColor,fontSize:t.titleFontSize+"px"}},[t._v("\n                "+t._s(t.title)+"\n            ")])])]):r("cover-view",{staticClass:"wr_navBar_body",style:{height:t.navBarHeight+"px",backgroundColor:t.backgroundColor},attrs:{mpcomid:"13"}},[r("cover-view",{staticClass:"wr_navBar_body_statusBar",style:{height:t.statusBarHeight+"px"},attrs:{mpcomid:"0"}}),t._v(" "),r("cover-view",{staticClass:"wr_navBar_body_titleBar",style:{height:t.titleBarHeight+"px"},attrs:{mpcomid:"11"}},[r("cover-view",{staticClass:"wr_navBar_body_titleBar_buttons",attrs:{mpcomid:"9"}},[t.showBackButton&&t.backAppParameter&&t.backOpenType?r("button",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_back wr_navBar_body_titleBar_buttons_back_overlay",style:{backgroundColor:t.backgroundColor,paddingLeft:"8px"},attrs:{"open-type":t.backOpenType,"app-parameter":t.backAppParameter}},[r("cover-image",{style:{width:t.backButtonWidth+"px",height:t.buttonHeight+"px"},attrs:{src:t.backButtonUrl,mpcomid:"1"}})],1):t.showBackButton?r("cover-view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_back",attrs:{"aria-role":"button","aria-label":"返回","hover-class":"wr_commonActive",eventid:"4_1",mpcomid:"3"},on:{click:function(e){!(t.showBackButton&&t.backAppParameter&&t.backOpenType)&&t.goBack()}}},[r("cover-image",{style:{width:t.backButtonWidth+"px",height:t.buttonHeight+"px"},attrs:{src:t.backButtonUrl,mpcomid:"2"}})],1):t._e(),t._v(" "),t.showHomeButton?r("cover-view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_home",attrs:{"aria-role":"button","aria-label":"主页","hover-class":"wr_commonActive",eventid:"4_2",mpcomid:"5"},on:{click:function(e){t.goHome()}}},[r("cover-image",{style:{width:t.buttonHeight+"px",height:t.buttonHeight+"px"},attrs:{src:t.homeButtonUrl,mpcomid:"4"}})],1):t._e(),t._v(" "),t.shouldShowGiftCollection?r("cover-view",{staticClass:"wr_navBar_body_titleBar_buttons_item wr_navBar_body_titleBar_buttons_giftCollection",attrs:{"aria-role":"button","aria-label":"获取无限卡","hover-class":"wr_commonActive",eventid:"4_3",mpcomid:"8"},on:{click:function(e){t.goGiftCollection()}}},[r("cover-image",{staticClass:"wr_navBar_body_titleBar_buttons_giftCollection_image",style:{width:t.menuButtonHeight+"px",height:t.menuButtonHeight+"px"},attrs:{src:"https://rescdn.qqmail.com/weread/assets/mini_program/gift_collection_3x.png",mpcomid:"6"}}),t._v(" "),t.shouldShowGiftCollectionDot?r("red-dot",{attrs:{cover:!0,mpcomid:"7"}}):t._e()],1):t._e()],1),t._v(" "),r("cover-view",{staticClass:"wr_navBar_body_titleBar_title",style:{color:t.titleColor,fontSize:t.titleFontSize+"px"},attrs:{mpcomid:"10"}},[t._v("\n                "+t._s(t.title)+"\n            ")])],1)],1)],1)},staticRenderFns:[]},(function(t){r(680)}),null,null);e.default=i.exports},290:function(t,e,r){r.r(e);var n={props:{digital:{type:Number,required:!0}},computed:{digitals:function(){var t=0;this.digital&&(t=this.digital);var e=t>99999?(t+"").length:5;return this.paddingZero(t,e).split("").map((function(t){return"top: -"+100*(+t+1)+"%"}))}},methods:{paddingZero:function(t,e){var r=new Array(e);r.fill(0);var n=r.join(r,"")+t;return n.substring(n.length-e,n.length)}}},o=r(7)(n,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{staticClass:"rollingDigitals"},t._l(t.digitals,(function(e,n){return r("view",{key:n,staticClass:"rollingDigitals_item"},[r("view",{staticClass:"rollingDigitals_item_scroll",style:e},[t._v("\n            0123456789\n        ")])])})))},staticRenderFns:[]},(function(t){r(1041)}),null,null);e.default=o.exports},301:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(r,"__esModule",{value:!0});var u=c(n(5)),d=n(13),p=n(9),_=l(n(0)),h=c(n(163)),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showBackButton=!0,e.showHomeButton=!1,e.menuButtonHeight=32,e}return i(e,t),Object.defineProperty(e.prototype,"backButtonUrl",{get:function(){return this.darkMode?"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/components/navigationBar/back_dark.png":"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/components/navigationBar/back.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"homeButtonUrl",{get:function(){return this.darkMode?"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/components/navigationBar/home_dark.png":"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/components/navigationBar/home.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleColor",{get:function(){return this.darkMode?"#FFF":"#212832"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"darkMode",{get:function(){return"dark"===this.colorScheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleFontSize",{get:function(){return this.menuButtonHeight-15},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonHeight",{get:function(){return this.menuButtonHeight-8},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backButtonWidth",{get:function(){return Math.floor(this.buttonHeight/24*16)},enumerable:!0,configurable:!0}),e.prototype.goGiftCollection=function(){this.$store.dispatch(_.KV_LOG_REPORT,{itemname:"Wp_Nav_GiftCollection_Clk"}),this.$store.commit(_.INFINTE_COLLECTION_CLICKED),wx.navigateTo({url:"/pages/giftCollection/main"})},e.prototype.goBack=function(){wx.navigateBack({delta:1}),this.$emit("back")},e.prototype.goHome=function(){this.goHomeAction?this.goHomeAction():this.homePage&&"/pages/index/main"!==this.homePage?(wx.reLaunch({url:this.homePage}),this.$emit("home")):(wx.redirectTo({url:"/pages/index/main"}),this.$emit("home"))},e.prototype.refreshControls=function(){for(var t=getCurrentPages(),e=!1,r=0,n=t;r<n.length;r++){var o=n[r];e||"pages/index/main"!==o.route||(e=!0)}this.showBackButton=1!==t.length,console.log("[TSNavigationBar] refreshControls forceShowHome: ",this.forceShowHome),this.showHomeButton=!e||!!this.forceShowHome},e.prototype.reportNavigationBarError=function(){this.$store.dispatch(_.KV_LOG_REPORT,{itemname:"Wp_Nav_Overlapping"})},s([d.Prop({default:""})],e.prototype,"title",void 0),s([d.Prop({default:"#FFF"})],e.prototype,"backgroundColor",void 0),s([d.Prop({default:"light"})],e.prototype,"colorScheme",void 0),s([d.Prop({default:""})],e.prototype,"customSelector",void 0),s([d.Prop({default:!1})],e.prototype,"forceShowHome",void 0),s([d.Prop({default:"/pages/index/main"})],e.prototype,"homePage",void 0),s([d.Prop({default:""})],e.prototype,"backOpenType",void 0),s([d.Prop({default:""})],e.prototype,"backAppParameter",void 0),s([d.Prop()],e.prototype,"goHomeAction",void 0),s([d.Prop()],e.prototype,"shouldShowGiftCollection",void 0),s([d.Prop()],e.prototype,"shouldShowGiftCollectionDot",void 0),s([d.Prop()],e.prototype,"translucent",void 0),s([d.Component({components:{RedDot:h.default},computed:a({},p.mapGetters({navBarHeight:"navigationBarHeight",statusBarHeight:"statusBarHeight",titleBarHeight:"navigationTitleBarHeight"}))})],e)}(u.default);r.default=f},311:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t))}catch(t){i(t)}}function s(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(a,s)}c((n=n.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(r,"__esModule",{value:!0});var d=l(n(5)),p=n(13),_=u(n(478)),h=n(480),f=l(n(64)),m=l(n(15)),v=n(482),g=f.default(wx.getImageInfo),w=f.default(wx.canvasGetImageData),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dominantColor=h.getImageDominantColorGradient(),e.canvasId=Math.random().toString(16).slice(2,16),e}return i(e,t),Object.defineProperty(e.prototype,"styleObj",{get:function(){return this.width/this.height?"transform: scale("+this.width/428+")":"transform: scale("+this.height/616+")"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatarStyleObj",{get:function(){return"background-image: url("+this.avatar.replace(/http:/,"https:")+")"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pictureStyleObj",{get:function(){return this.dominantColor.length>=2?"background-image: linear-gradient(0deg, "+this.dominantColor[0]+", "+this.dominantColor[1]+")":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cacheId",{get:function(){return v.md5(this.avatar)},enumerable:!0,configurable:!0}),e.prototype.onAvatarChanged=function(t){t&&this.getDominantColor()},e.prototype.getDominantColor=function(){return s(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l;return c(this,(function(c){switch(c.label){case 0:if(t=m.default.getStorageSync("CoverDominantColor_"+this.cacheId))return this.dominantColor=h.getImageDominantColorGradient(t),[2];c.label=1;case 1:return c.trys.push([1,5,,6]),e=150,r=150,n=this.canvasId,o=wx.createCanvasContext(n),[4,g({src:this.avatar.replace(/http:/,"https:").replace(/\/0$/i,"/132")||""})];case 2:return i=c.sent(),o.drawImage(i.path,0,0,e,r,0,0,e,r),[4,new Promise((function(t){return o.draw(!1,t)}))];case 3:return c.sent(),[4,w({canvasId:n,x:0,y:0,width:e,height:r})];case 4:return a=c.sent(),s=_.getHexColors(_.palette(a.data,5,3)),this.dominantColor=h.getImageDominantColorGradient(s[0]),m.default.setStorageSync("CoverDominantColor_"+this.cacheId,s[0]),[3,6];case 5:return l=c.sent(),console.warn(l,"getDominantColor error---"),[3,6];case 6:return[2]}}))}))},a([p.Prop({default:""})],e.prototype,"avatar",void 0),a([p.Prop({default:""})],e.prototype,"title",void 0),a([p.Prop({default:""})],e.prototype,"picture",void 0),a([p.Prop()],e.prototype,"width",void 0),a([p.Prop()],e.prototype,"height",void 0),a([p.Watch("avatar",{immediate:!0})],e.prototype,"onAvatarChanged",null),a([p.Component],e)}(d.default);r.default=C},312:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(r,"__esModule",{value:!0});var l=s(n(5)),u=n(13),d=s(n(14)),p=s(n(624)),_=c(n(88)),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"isActive",{get:function(){return _.store.state.showMiniPlayer&&_.store.state.audioManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return _.store.state.audioManager&&!_.store.state.audioManager.isPaused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return _.store.state.audioManager?_.store.state.audioManager.currentTime:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return _.store.state.audioManager?_.store.state.audioManager.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bookInfo",{get:function(){return _.store.state.bookInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLectureType",{get:function(){return _.store.state.lectureType||"LECTURE"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentCover",{get:function(){return _.store.state.audioManager?_.store.state.audioManager.cover:""},enumerable:!0,configurable:!0}),e.prototype.handleAudioPlay=function(){_.store.state.audioManager&&_.store.state.audioManager.playChapter()},e.prototype.handleAudioPause=function(){_.store.state.audioManager&&_.store.state.audioManager.pause()},e.prototype.handleClosePanel=function(){_.store.state.audioManager&&_.store.state.audioManager.pause(),_.store.commit(_.SET_MINI_PLAYER_STATE,!1)},e.prototype.handleGotoPlayer=function(){if(_.store.state.audioManager){var t=_.store.state.audioManager.bookId,e=_.store.state.audioManager.lectureType;wx.navigateTo({url:"/pages/lecture/player/main?bookId="+t+"&type="+e})}},a([u.Component({components:{BookCover:d.default,PlayerProgress:p.default}})],e)}(l.default);r.default=h},313:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c=s(n(5)),l=n(13),u=s(n(267)),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"displayCount",{get:function(){var t;return this.listenCount?""+(t=u.default(this.listenCount)).number+t.unit:this.readingCount?""+(t=u.default(this.readingCount)).number+t.unit:""},enumerable:!0,configurable:!0}),a([l.Prop({default:0})],e.prototype,"readingCount",void 0),a([l.Prop({default:0})],e.prototype,"listenCount",void 0),a([l.Prop()],e.prototype,"customSelector",void 0),a([l.Component],e)}(c.default);r.default=d},316:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c=n(13),l=s(n(159)),u=s(n(162)),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.handleIndicatorClick=function(){this.$emit("indicatorClick")},e.prototype.handleMaskClick=function(){console.log(1111),this.$emit("maskClick")},a([c.Prop()],e.prototype,"title",void 0),a([c.Prop()],e.prototype,"content",void 0),a([c.Prop({default:!1})],e.prototype,"respondsToMaskDismiss",void 0),a([c.Prop({default:!1})],e.prototype,"contentNeedsScroll",void 0),a([c.Prop()],e.prototype,"contentSelector",void 0),a([c.Component({components:{Mask:u.default}})],e)}(c.Mixins(l.default));r.default=d},317:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(r,"__esModule",{value:!0});var l=s(n(5)),u=n(13),d=c(n(0)),p=s(n(49)),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showing=!1,e.hiding=!1,e}return i(e,t),e.prototype.showMask=function(){this.hiding=!1,this.showing=!0},e.prototype.closeMask=function(){this.hiding=!0,this.showing=!1},e.prototype.handleMaskClick=function(t){this.respondsToMaskDismiss&&this.closeMask(),this.$emit("click",t)},e.prototype.handleAnimationEnd=function(){this.hiding&&(this.hiding=!1),this.$emit("animationend")},e.prototype.handleMaskDismissFormReport=function(t){t&&t.target&&t.target.formId&&(console.log("[Mask] formid report",t.target.formId),p.default.dispatch(d.REPORT_FORMID,{formId:t.target.formId,scene:1}))},a([u.Prop()],e.prototype,"customSelector",void 0),a([u.Prop({default:!1})],e.prototype,"needsCloseButton",void 0),a([u.Prop({default:!0})],e.prototype,"respondsToMaskDismiss",void 0),a([u.Prop({default:!0})],e.prototype,"showAnimation",void 0),a([u.Component],e)}(l.default);r.default=_},321:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c=n(13),l=s(n(159)),u=s(n(162)),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.handleButtonClick=function(t){this.closeModal().then((function(){console.log("[Alert]","handleButtonClick")})),this.buttons&&this.buttons.length>0&&this.$emit(this.buttons[t].type)},a([c.Prop()],e.prototype,"title",void 0),a([c.Prop()],e.prototype,"content",void 0),a([c.Prop({default:function(){return[]}})],e.prototype,"buttons",void 0),a([c.Prop({default:!1})],e.prototype,"isStack",void 0),a([c.Prop({default:!1})],e.prototype,"needsCloseButton",void 0),a([c.Prop({default:!1})],e.prototype,"contentNeedsScroll",void 0),a([c.Prop()],e.prototype,"contentSelector",void 0),a([c.Component({components:{Mask:u.default}})],e)}(c.Mixins(l.default));r.default=d},335:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(r,"__esModule",{value:!0});var l=s(n(5)),u=n(13),d=s(n(2)),p=c(n(167)),_=c(n(0)),h=s(n(127)),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pinTipsShown=!0,e.menuButtonRect=null,e.reportShow=h.default,e}return i(e,t),Object.defineProperty(e.prototype,"navigationBarHeight",{get:function(){return this.$store.getters.navigationBarHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userConfig",{get:function(){return p.store.state.userConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"user",{get:function(){return this.$store.state.profile.user},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pinTipStyleObj",{get:function(){var t=10;return this.menuButtonRect&&this.menuButtonRect.right&&this.user&&this.user.windowWidth&&this.user.windowWidth-this.menuButtonRect.right>5&&(t=Math.floor(this.user.windowWidth-this.menuButtonRect.right)),"top: "+this.navigationBarHeight+"px; right: "+t+"px;"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pinTipArrowStyleObj",{get:function(){var t=65;return this.menuButtonRect&&(t=Math.floor(.75*this.menuButtonRect.width)),"right: "+t+"px;"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldShowPinTips",{get:function(){var t=this.userConfig&&!this.userConfig.pinTipsShown;return t&&this.reportShow(),t},enumerable:!0,configurable:!0}),e.prototype.closePinTip=function(){p.store.dispatch(p.PIN_TIPS_SHOWN,{hasShown:1})},e.prototype.mounted=function(){var t,e=this;if(wx.getMenuButtonBoundingClientRect)try{this.menuButtonRect=wx.getMenuButtonBoundingClientRect(),console.log("wx.getMenuButtonBoundingClientRect",this.menuButtonRect)}catch(t){console.log("wx.getMenuButtonBoundingClientRect error",t)}p.store.dispatch(p.INIT_PIN_TIPS).then((function(){e.$store.dispatch(_.LAST_WP_LOGINTIME).then((function(){e.user&&e.user.lastWpLoginTime&&(new Date).getTime()-1e3*e.user.lastWpLoginTime>2592e6&&(e.$store.dispatch(_.KV_LOG_REPORT,{itemname:"Wp_PinTips_Clear_Shown"}),p.store.dispatch(p.CLEAR_PIN_TIPS_SHOWN))}))})),this.reportShow=(t=!1,function(){t||(d.default.reportKVLog({itemname:"Wp_PinTips_Exp"}),t=!0)})},a([u.Prop()],e.prototype,"customSelector",void 0),a([u.Component],e)}(l.default);r.default=f},345:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c=s(n(5)),l=n(13),u=s(n(24)),d=s(n(115)),p=s(n(60)),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"formattedCreateDate",{get:function(){return this.comment?p.default(this.comment.createTime):""},enumerable:!0,configurable:!0}),e.prototype.openProfile=function(t){wx.navigateTo({url:"/pages/profile/main?userVid="+t})},a([l.Prop()],e.prototype,"customSelector",void 0),a([l.Prop()],e.prototype,"comment",void 0),a([l.Component({components:{Avatar:u.default,EmoticonText:d.default}})],e)}(c.default);r.default=_},37:function(t,e,r){r.r(e);var n=r(73),o=r(104),i={components:{Mask:n.a},extends:o.a,props:{title:{type:String,default:""},content:{type:String,default:""},buttons:{type:Array,default:function(){return[]}},isStack:{type:Boolean},needsCloseButton:{type:Boolean},contentNeedsScroll:{type:Boolean},contentSelector:{type:[Object,String],default:""},closeAlertCallback:{type:Function,default:null}},methods:{handleButtonClick:function(t){this.closeModal(),this.$emit(this.buttons[t].type),this.closeSelfCallback()},closeMaskCallback:function(){this.closeSelfCallback()},closeSelfCallback:function(){this.closeAlertCallback&&this.closeAlertCallback()}}},a=r(7)(i,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:[t.customSelector]},[r("Mask",{ref:"mask",attrs:{"needs-close-button":t.needsCloseButton,"responds-to-mask-dismiss":t.needsCloseButton,"show-animation":t.showAnimation,"close-mask-callback":t.closeMaskCallback,eventid:"1_0",mpcomid:"0"},on:{click:t.handleMaskClick}}),t._v(" "),r("view",{class:[t.showAnimation?{wr_modal:!0,wr_modal_Show:t.showing,wr_modal_Hide:t.hiding,wr_modal_ForBtn:t.needsCloseButton,wr_alert:!0}:{wr_modal:!0,wr_modal_Visible:t.showing,wr_modal_ForBtn:t.needsCloseButton},t.animationSelector,t.contentSelector],attrs:{"disable-scroll":"true",eventid:"1_2"},on:{touchmove:function(t){t.preventDefault()},animationend:t.handleAnimationEnd}},[t._t("default",[r("view",{staticClass:"wr_alert_cnt"},[r("view",{staticClass:"wr_alert_title"},[t._v("\n                    "+t._s(t.title)+"\n                ")]),t._v(" "),t.content&&t.contentNeedsScroll?r("scroll-view",{staticClass:"wr_alert_text",attrs:{"scroll-top":"right","scroll-y":"true"}},[r("view",{staticClass:"wr_alert_text_value"},[t._v("\n                        "+t._s(t.content)+"\n                    ")])]):t.content?r("view",{staticClass:"wr_alert_text"},[t._v("\n                    "+t._s(t.content)+"\n                ")]):t._e()],1)],{mpcomid:"1"}),t._v(" "),t.buttons&&t.buttons.length>0?r("view",{class:[{wr_alert_buttons:!0,wr_alert_buttons_Stack:t.isStack}]},t._l(t.buttons,(function(e,n){return r("view",{key:n,class:{wr_alert_buttons_item:!0,wr_alert_buttons_item_Delete:"delete"===e.type},attrs:{"aria-role":"button","hover-class":"wr_commonActive",eventid:"3_1_"+n},on:{click:function(e){t.handleButtonClick(n)}}},[t._v("\n                "+t._s(e.title)+"\n            ")])}))):t._e()],2)],1)},staticRenderFns:[]},(function(t){r(692)}),null,null);e.default=a.exports},380:function(e,r,n){var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(e,r,n,o){var i,a=arguments.length,s=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,n):o;if("object"==("undefined"==typeof Reflect?"undefined":(0,t.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(a<3?i(s):a>3?i(r,n,s):i(r,n))||s);return a>3&&s&&Object.defineProperty(r,n,s),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c=s(n(5)),l=n(13),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"progressBarInnerStyle",{get:function(){if(!this.max||0===this.max||!this.score)return"";var t=this.score.toFixed(2),e=100*parseFloat(t)/this.max;return"width: "+Math.min(parseFloat(e.toFixed(2)),100)+"%"},enumerable:!0,configurable:!0}),a([l.Prop({default:!0})],e.prototype,"max",void 0),a([l.Prop({default:0})],e.prototype,"score",void 0),a([l.Component],e)}(c.default);r.default=u},43:function(t,e,r){r.r(e);var n=r(37),o=r(3),i=r(2),a=r(78),s={components:{Alert:n.default},data:function(){return{}},methods:{show:function(){this.$refs.alert.showModal()},handleUserInfoAuthorization:function(t){var e=this;console.log("handleUserInfoAuthorization:",t),wx.showLoading({title:"登录中…",mask:!0}),a.default.checkAuthorize().then((function(t){var r=getCurrentPages(),n=r[r.length-1],a="/"+n.route,s=n.options,c=a+"?";for(var l in s)if(s.hasOwnProperty(l)){var u=s[l];c+=l+"="+u+"&"}c=c.substring(0,c.length-1),e.$refs.alert.closeModal(),o.default.login({needGetToken:!0,success:function(t){wx.hideLoading(),wx.reLaunch({url:c})},fail:function(t){wx.hideLoading(),console.log("login failed:",t),i.default.reportKVLog({itemname:"refuseAuthroize"}),wx.reLaunch({url:c})}})}))},submitForm:function(t){var e=t.mp.detail.formId;e&&setTimeout((function(){console.log("timeout report formId"),i.default.reportFormId({formId:e,scene:1})}),8e3)}}},c=r(7)(s,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("alert",{ref:"alert",attrs:{"custom-selector":"wr_AuthorizationPrompt","content-selector":"authorization_prompt_checker","needs-close-button":!1,"show-animation":!1,eventid:"0_2",mpcomid:"0"},on:{confirm:t.handleConfirm}},[r("view",{staticClass:"wr_AuthorizationPrompt_logo"}),t._v(" "),r("view",{staticClass:"wr_AuthorizationPrompt_title"},[t._v("\n        登录微信读书\n    ")]),t._v(" "),r("view",{staticClass:"wr_AuthorizationPrompt_subtitle"},[t._v("\n        百万好书免费读\n    ")]),t._v(" "),r("form",{attrs:{"report-submit":"true",eventid:"1_1"},on:{submit:t.submitForm}},[r("button",{staticClass:"wr_btn wr_btn_Big wr_AuthorizationPrompt_button",attrs:{"hover-class":"wr_commonActive","form-type":"submit","open-type":"getUserInfo",eventid:"2_0"},on:{getuserinfo:t.handleUserInfoAuthorization}},[t._v("\n            授权登录\n        ")])],1)],1)},staticRenderFns:[]},(function(t){r(805)}),null,null);e.default=c.exports},483:function(t,e,r){r.r(e);var n=r(8),o=r.n(n),i=r(4),a=r.n(i),s=r(33),c=r.n(s),l=r(10),u=r.n(l),d=r(59),p=r.n(d),_=r(48),h=r.n(_),f=r(2),m=r(15),v=r(131),g=r(165),w=new v.a,C=function t(e,r){h()(this,t),this.text=e+"×",this.value=r},b=function(){function t(e,r){h()(this,t),this.backgroundAudioManager=e,this.errCount=0,this.accessToken="",this.playingChapter=null,this.playingParagrahIndex=null,this.playBackRate=1,this.nextChapter={chapter:null,content:null},this.initAudioSetting(r)}return p()(t,[{key:"init",value:function(t){var e=t.bookTitle,r=t.chapterTitle,n=t.cover;return this.backgroundAudioManager.title=r,this.backgroundAudioManager.epname=r,this.backgroundAudioManager.singer=e,this.backgroundAudioManager.coverImgUrl=n,this.dirPath=wx.env.USER_DATA_PATH+"/ttsCache",w.createDir(this.dirPath)}},{key:"setPlayBackRate",value:function(t){this.playBackRate=t}},{key:"playFromParagraphAndSentenceIndex",value:function(){var t=u()(a.a.mark((function t(e,r,n,o,i,s){var l,u,d,p,_=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.playingChapter=n,l=n.bookId,u=n.chapterUid,!(o.length<=e)){t.next=6;break}return console.log("已播完"),s(n),t.abrupt("return");case 6:return d=g.default.splitParagraph(l,u,o),t.next=9,this.getAccessToken();case 9:t.t0=a.a.keys(d);case 10:if((t.t1=t.t0()).done){t.next=16;break}if(!(p=t.t1.value)){t.next=14;break}return t.delegateYield(a.a.mark((function t(){var n,s,h,f,m,v,g,w;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=parseInt(p))>=e||0===e)){t.next=34;break}s=!0,h=!1,f=void 0,t.prev=5,m=c()(d[n]);case 7:if(s=(v=m.next()).done){t.next=20;break}if(!((g=v.value).sentenceIndex>=r||0===r||n>e)){t.next=17;break}if(w=o[n].substring(g.start,g.end),i(n,g.sentenceIndex),_.playingParagrahIndex=n,setTimeout((function(){n<d.length&&_.preLoadAudioFile(n,d,o,l,u)}),200),!(w&&w.length>0)){t.next=17;break}return t.next=17,_.playContent(w,g.fileName,l,u);case 17:s=!0,t.next=7;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(5),h=!0,f=t.t0;case 26:t.prev=26,t.prev=27,!s&&m.return&&m.return();case 29:if(t.prev=29,!h){t.next=32;break}throw f;case 32:return t.finish(29);case 33:return t.finish(26);case 34:d&&d.length-n<4&&_.nextChapter&&_.nextChapter.content&&_.preloadNextChapter();case 35:case"end":return t.stop()}}),t,_,[[5,22,26,34],[27,,29,33]])}))(),"t2",14);case 14:t.next=10;break;case 16:s(n);case 17:case"end":return t.stop()}}),t,this)})));return function(e,r,n,o,i,a){return t.apply(this,arguments)}}()},{key:"preloadNextChapter",value:function(){var t=u()(a.a.mark((function t(){var e,r,n,o,i,s,c,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.nextChapter,r=e.chapter,n=e.content,o=r.bookId,i=r.chapterUid,s=g.default.splitParagraph(o,i,n),t.next=5,this.getAccessToken();case 5:for(c=t.sent,l=0;l<=2;l++)this.preloadParagraph(c,o,n[l],s[l],i);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"tryPlayAudio",value:function(t,e,r,n,o){var i=this;return this.playAudio(t).then((function(){i.errCount=0})).catch((function(a){return console.log("playContent error:",a," errCount:",i.errCount),i.handlePlayAudioError(t,e,r,n,o)}))}},{key:"handlePlayAudioError",value:function(t,e,r,n,o){var i=this;return w.readFile(t).then((function(a){return console.log("read error audio file :",a),w.removeFile(t).then((function(){return i.retryPlayContent(e,r,n,o)}))}))}},{key:"retryAfterTokenExpired",value:function(t,e,r,n,o){var i=this;return this.updateAccessToken(null),this.getAccessToken().then((function(t){return i.retryPlayContent(e,r,n,o)}))}},{key:"playContent",value:function(){var t=u()(a.a.mark((function t(e,r,n,i){var s,c,l,u=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.errCount>15)){t.next=5;break}return s={errCode:-1,errMsg:"失败太多次了"},console.log("playContent error:",s),this.backgroundAudioManager.stop(),t.abrupt("return",o.a.reject(s));case 5:if(c=this.filePathWithName(r),!w.isFileExist(c)){t.next=10;break}return console.log("playContent hit cache"),t.abrupt("return",this.tryPlayAudio(c,e,r,n,i));case 10:return console.log("playContent has no cache"),t.next=13,this.getAccessToken();case 13:return l=t.sent,t.abrupt("return",f.default.getWeixinTTSAudio({text:e,accessToken:l,filePath:c,spd:this.spd,per:this.per,bookId:n,chapterUid:i}).then((function(){return u.tryPlayAudio(c,e,r,n,i)})).catch((function(t){return t&&-13===t.errCode&&u.retryAfterTokenExpired(c,e,r,n,i),t&&t.errMsg&&t.errMsg.indexOf("file storage limit is exceeded")?w.removeDir(u.dirPath,!0).then((function(){return w.createDir(u.dirPath).then((function(t){return u.handlePlayAudioError(c,e,r,n,i)}))})):u.handlePlayAudioError(c,e,r,n,i)})));case 15:case"end":return t.stop()}}),t,this)})));return function(e,r,n,o){return t.apply(this,arguments)}}()},{key:"preLoadAudioFile",value:function(){var t=u()(a.a.mark((function t(e,r,n,o,i){var s,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<0||!r||!n||r.length-e<2)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.getAccessToken();case 4:for(s=t.sent,c=0;c<=2;c++)this.preloadParagraph(s,o,n[e+c],r[e+c],i);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}()},{key:"preloadParagraph",value:function(t,e,r,n,o){if(r&&n&&n.length){var i=!0,a=!1,s=void 0;try{for(var l,u=c()(n);!(i=(l=u.next()).done);i=!0){var d=l.value,p=r.substring(d.start,d.end),_=this.filePathWithName(d.fileName);w.isFileExist(_)||this.preloadSentence(p,t,_,e,d,o)}}catch(t){a=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}}}},{key:"preloadSentence",value:function(t,e,r,n,o,i){var a=this;f.default.getWeixinTTSAudio({text:t,accessToken:e,filePath:r,spd:this.spd,per:this.per,bookId:n,chapterUid:i}).catch((function(s){w.removeFile(r),o.retryCount?o.retryCount=1:o.retryCount+=1,o.retryCount<2&&(s&&-13===s.errCode?(a.updateAccessToken(null),a.getAccessToken().then((function(){a.preloadSentence(t,e,r,n,o,i)}))):setTimeout((function(){a.preloadSentence(t,e,r,n,o,i)}),2e3))}))}},{key:"filePathWithName",value:function(t){return wx.env.USER_DATA_PATH+"/ttsCache/v2_"+t+"_"+(this.spd&&this.spd.value?this.spd.value:0)+"_"+this.per+"_"+this.errCount+".mp3"}},{key:"retryPlayContent",value:function(t,e,r,n){return this.errCount++,this.errCount<=1?this.playContent(t,e,r,n):(f.default.reportRealKVLog({key:44175}),o.a.resolve())}},{key:"playAudio",value:function(t,e,r){var n=this;return console.log("playAudio src:",t),t?(console.log(t),this.backgroundAudioManager.title=this.playingChapter.title||this.title||"第"+this.playingChapter.chapterIdx+"章",this.backgroundAudioManager.src=t,this.backgroundAudioManager.playBackRate=this.playBackRate,new o.a((function(t,e){n.backgroundAudioManager.onError((function(t){console.log("backgroundAudioManager onError:",t),e(t)})),n.backgroundAudioManager.onEnded((function(){console.log("backgroundAudioManager onEnded:",new Date),t()}))}))):o.a.reject({errMsg:"invalid src"})}},{key:"playTTS",value:function(){this.backgroundAudioManager&&(this.backgroundAudioManager.play(),this.savePlayingProgress())}},{key:"pauseTTS",value:function(){this.backgroundAudioManager&&(this.backgroundAudioManager.pause(),this.savePlayingProgress())}},{key:"stopTTS",value:function(){this.backgroundAudioManager&&(this.backgroundAudioManager.stop(),this.savePlayingProgress())}},{key:"savePlayingProgress",value:function(){if(this.playingChapter&&this.playingChapter.bookId&&this.playingChapter.chapterIdx){var t=this.playingChapter.bookId+"_tts";m.default.setStorage({key:t,data:{chapterIdx:this.playingChapter.chapterIdx,paragraphIndex:this.playingParagrahIndex}})}}},{key:"updateAccessToken",value:function(t){this.accessToken=t,m.default.setStorageSync("ttsToken",{token:t})}},{key:"getAccessToken",value:function(){var t=u()(a.a.mark((function t(){var e,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.accessToken){t.next=2;break}return t.abrupt("return",o.a.resolve(this.accessToken));case 2:if(!(e=m.default.getStorageSync("ttsToken"))||!e.token){t.next=5;break}return t.abrupt("return",o.a.resolve(e.token));case 5:return t.next=7,f.default.getWeixinTTSToken();case 7:return r=t.sent,this.updateAccessToken(r.token),t.abrupt("return",o.a.resolve(r.token));case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initAudioSetting",value:function(t){this.spd=new C("1",6),this.per=t,console.log("init tts lecturer",this.per)}},{key:"setTTSVoice",value:function(t){this.per=t,console.log("init tts lecturer",this.per)}}]),t}();e.default=b},52:function(t,e,r){r.r(e);var n={props:{isLoading:{type:Boolean,default:!0},customSelector:{type:[Object,String],default:""}}},o=r(7)(n,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLoading?r("view",{class:[{wr_loading:!0},t.customSelector]},[r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"}),t._v(" "),r("view",{staticClass:"wr_loading_blade"})]):t._e()},staticRenderFns:[]},(function(t){r(748)}),null,null);e.default=o.exports},54:function(t,e,r){r.r(e);var n=r(0),o=r(49),i=r(35),a=r(37),s=r(80),c=r(2),l=r(12),u=new s.a,d={components:{Alert:a.default},data:function(){return{displayInfiniteDays:0}},computed:{redeemedInfiniteDays:function(){return i.store.state.redeemedInfiniteDays},appRedeemableDays:function(){return i.store.getters.appRedeemableDays},buttonLabel:function(){return"去微信读书 app 阅读"}},methods:{show:function(){this.displayInfiniteDays=this.redeemedInfiniteDays,this.displayInfiniteDays&&this.$refs.alert.showModal()},dismiss:function(){l.default.reportExp("infiniteCard"),this.$refs.alert.closeModal()},goToApp:function(){if(o.store.dispatch(n.KV_LOG_REPORT,{itemname:"Wp_Infinite_App_Clk"}),this.appRedeemableDays>0)return u.openWxCard(this.appRedeemableDays);this.$emit("notify",{intent:"免费阅读",source:"infinite"})},submitForm:function(t){var e=t.mp.detail.formId;e&&c.default.reportFormId({formId:e,scene:1})}}},p=r(7)(d,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("alert",{ref:"alert",attrs:{"content-selector":"wr_InfiniteCardPrompt","needs-close-button":!0,"show-animation":!1,mpcomid:"0"}},[r("view",{staticClass:"wr_InfiniteCardPrompt_title"},[t._v("你已获得"+t._s(t.displayInfiniteDays)+"天无限卡")]),t._v(" "),r("view",{staticClass:"wr_InfiniteCardPrompt_title"},[t._v("百万好书无限畅读")]),t._v(" "),r("view",{staticClass:"wr_InfiniteCardPrompt_card"},[r("view",{staticClass:"wr_InfiniteCardPrompt_card_denomination"},[r("text",{staticClass:"wr_InfiniteCardPrompt_card_denomination_value",domProps:{textContent:t._s(t.displayInfiniteDays)}}),t._v(" "),r("text",{staticClass:"wr_InfiniteCardPrompt_card_denomination_unit"},[t._v("天无限卡")])])]),t._v(" "),r("form",{attrs:{"report-submit":"true",eventid:"1_1"},on:{submit:t.submitForm}},[r("button",{staticClass:"wr_btn wr_btn_Big wr_InfiniteCardPrompt_button",attrs:{"hover-class":"wr_commonActive","form-type":"submit","open-type":"launchApp","app-parameter":"weread://home",eventid:"2_0"},on:{error:t.goToApp,click:t.dismiss}},[t._v("\n            "+t._s(t.buttonLabel)+"\n        ")])],1)],1)},staticRenderFns:[]},(function(t){r(761)}),null,null);e.default=p.exports},624:function(t,e,r){r.r(e);var n={props:{progress:{type:Number,required:!0}},data:function(){return{bgStyleDefault:'background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><circle transform="rotate(-90, 30, 30)" id="a" cx="30" cy="30" r="28" stroke="rgba(255, 255, 255, .5)" stroke-width="4" fill="none" stroke-dasharray="176" stroke-dashoffset="0"> </circle> </svg>\')',bgStyleBackground:'background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><circle transform="rotate(-90, 30, 30)" id="a" cx="30" cy="30" r="28" stroke="rgba(255, 255, 255, .1)" stroke-width="4" fill="none" stroke-dasharray="176" stroke-dashoffset="0"> </circle> </svg>\')'}},computed:{bgStyle:function(){return'background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"><circle transform="rotate(-90, 30, 30)" cx="30" cy="30" r="28" stroke="rgba(255, 255, 255, .5)" stroke-width="4" stroke-opacity="0.2" fill="transparent"/> <circle transform="rotate(-90, 30, 30)" id="a" cx="30" cy="30" r="28" stroke="rgba(255, 255, 255, .5)" stroke-width="4" fill="none" stroke-dasharray="176" stroke-dashoffset="'+Math.round(176+176*this.progress)+"\"> </circle> </svg>')"}}},o=r(7)(n,{render:function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"miniPlayer_progress_container"},[1===this.progress?e("view",{staticClass:"miniPlayer_progress default",style:this.bgStyleDefault}):e("view",{staticClass:"miniPlayer_progress",style:this.bgStyle}),this._v(" "),e("view",{staticClass:"miniPlayer_background",style:this.bgStyleBackground})])},staticRenderFns:[]},(function(t){r(742)}),null,null);e.default=o.exports},678:function(t,e){},68:function(t,e,r){r.r(e);var n={props:{title:{type:String,required:!0},rating:{type:String,required:!0},type:{type:String,default:"default",validator:function(t){return["default","listItem"].indexOf(t)>-1}}},computed:{imageSvgUrl:function(){return"https://weread-1258476243.file.myqcloud.com/miniprogram/assets/reader/book_ratings_"+{"烂书一本":"40","不值一读":"60","褒贬不一":"70","值得一读":"80","脍炙人口":"85","好评如潮":"90","神作":"100"}[this.title]+".svg"},typeSelector:function(){return"listItem"===this.type?"book_rating_item_label_ListItem":""}}},o=r(7)(n,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return"待评分"===t.title?r("text",{class:["book_rating_item_label_text",t.typeSelector]},[t._v("\n    待评分\n")]):"评分不足"===t.title?r("text",{class:["book_rating_item_label_text",t.typeSelector]},[t._v("\n    评分不足\n")]):""===t.title?r("view",{class:["book_rating_item_label_number",t.typeSelector]},[t._v("\n    "+t._s(t.rating)),r("text",{staticClass:"book_rating_item_label_number_suffix"},[t._v("%")])]):r("image",{class:["book_rating_item_label_number_image",t.typeSelector],attrs:{mode:"heightFix",src:t.imageSvgUrl}})},staticRenderFns:[]},(function(t){r(736)}),null,null);e.default=o.exports},680:function(t,e){},682:function(t,e){},684:function(t,e){},690:function(t,e){},692:function(t,e){},694:function(t,e){},71:function(t,e,r){r.r(e);var n=r(321),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:[t.customSelector]},[r("Mask",{ref:"mask",attrs:{"needs-close-button":t.needsCloseButton,"responds-to-mask-dismiss":t.needsCloseButton,"show-animation":t.showAnimation,eventid:"1_0",mpcomid:"0"},on:{click:t.handleMaskClick}}),t._v(" "),r("view",{class:[t.showAnimation?{wr_modal:!0,wr_modal_Show:t.showing,wr_modal_Hide:t.hiding,wr_modal_ForBtn:t.needsCloseButton,wr_alert:!0}:{wr_modal:!0,wr_modal_Visible:t.showing,wr_modal_ForBtn:t.needsCloseButton},t.animationSelector,t.contentSelector],attrs:{"disable-scroll":"true",eventid:"1_2"},on:{touchmove:function(t){t.stopPropagation()},animationend:t.handleAnimationEnd}},[t._t("default",[r("view",{staticClass:"wr_alert_cnt"},[r("view",{staticClass:"wr_alert_title"},[t._v("\n                    "+t._s(t.title)+"\n                ")]),t._v(" "),t.content&&t.contentNeedsScroll?r("scroll-view",{staticClass:"wr_alert_text",attrs:{"scroll-top":"right","scroll-y":"true"}},[r("view",{staticClass:"wr_alert_text_value"},[t._v("\n                        "+t._s(t.content)+"\n                    ")])]):t.content?r("view",{staticClass:"wr_alert_text"},[t._v("\n                    "+t._s(t.content)+"\n                ")]):t._e()],1)],{mpcomid:"1"}),t._v(" "),t.buttons&&t.buttons.length>0?r("view",{class:[{wr_alert_buttons:!0,wr_alert_buttons_Stack:t.isStack}]},t._l(t.buttons,(function(e,n){return r("view",{key:n,class:{wr_alert_buttons_item:!0,wr_alert_buttons_item_Delete:"delete"===e.type},attrs:{"aria-role":"button","hover-class":"wr_commonActive",eventid:"3_1_"+n},on:{click:function(e){t.handleButtonClick(n)}}},[t._v("\n                "+t._s(e.title)+"\n            ")])}))):t._e()],2)],1)},staticRenderFns:[]},(function(t){r(791)}),null,null);e.default=i.exports},713:function(t,e){},73:function(t,e,r){var n=r(0),o=r(49),i={props:{customSelector:{type:[Object,String],default:""},needsCloseButton:{type:Boolean},respondsToMaskDismiss:{type:Boolean,default:!0},showAnimation:{type:Boolean,default:!0},closeMaskCallback:{type:Function,default:null}},data:function(){return{showing:!1,hiding:!1}},methods:{showMask:function(){this.hiding=!1,this.showing=!0},closeMask:function(){this.hiding=!0,this.showing=!1},handleMaskClick:function(t){this.respondsToMaskDismiss&&(this.closeMask(),this.$emit("click",t)),this.closeMaskCallback&&this.closeMaskCallback()},handleAnimationEnd:function(){this.hiding&&(this.hiding=!1),this.$emit("animationend")},handleMaskDismissFormReport:function(t){t&&t.target&&t.target.formId&&(console.log("[Mask] formid report",t.target.formId),o.default.dispatch(n.REPORT_FORMID,{formId:t.target.formId,scene:1}))}}},a=r(7)(i,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{class:["wr_mask",t.showAnimation?{wr_mask_Show:t.showing,wr_mask_Hide:t.hiding}:{wr_mask_Visible:t.showing},t.customSelector],attrs:{"disable-scroll":"true",eventid:"0_1"},on:{touchmove:function(t){t.stopPropagation()},click:t.handleMaskClick,animationend:t.handleAnimationEnd}},[r("form",{attrs:{"report-submit":"",eventid:"1_0"},on:{submit:t.handleMaskDismissFormReport}},[t.needsCloseButton?r("button",{staticClass:"wr_mask_closeBtn",attrs:{"aria-role":"button","aria-label":"关闭浮层","hover-class":"wr_commonActive","form-type":"submit"}}):t._e()],1)],1)},staticRenderFns:[]},(function(t){r(694)}),null,null);e.a=a.exports},732:function(t,e){},734:function(t,e){},736:function(t,e){},738:function(t,e){},740:function(t,e){},742:function(t,e){},744:function(t,e){},748:function(t,e){},752:function(t,e){},754:function(t,e){},756:function(t,e){},761:function(t,e){},771:function(t,e){},773:function(t,e){},79:function(t,e,r){r.r(e);var n=r(312),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isActive?r("view",{staticClass:"miniLecturePlayer"},[r("view",{staticClass:"miniLecturePlayer_cover_container",attrs:{eventid:"1_0"},on:{click:t.handleGotoPlayer}},[r("view",{class:["miniLecturePlayer_cover",{miniLecturePlayer_cover_playing:t.isPlaying}]},[r("book-cover",{attrs:{src:t.currentCover,width:40,mpcomid:"0"}})],1),t._v(" "),r("view",{staticClass:"miniLecturePlayer_progress"},[r("player-progress",{attrs:{progress:t.currentTime/t.duration,mpcomid:"1"}})],1)]),t._v(" "),t.isPlaying?r("view",{staticClass:"miniLecturePlayer_pause",attrs:{eventid:"1_1"},on:{click:t.handleAudioPause}}):r("view",{staticClass:"miniLecturePlayer_play",attrs:{eventid:"1_2"},on:{click:t.handleAudioPlay}}),t._v(" "),r("view",{staticClass:"miniLecturePlayer_close"},[r("view",{staticClass:"miniLecturePlayer_close_clickArea",attrs:{eventid:"2_3"},on:{click:t.handleClosePanel}})])]):t._e()},staticRenderFns:[]},(function(t){r(740)}),"data-v-12963b82",null);e.default=i.exports},791:function(t,e){},805:function(t,e){},813:function(t,e){},815:function(t,e){},819:function(t,e){},82:function(t,e,r){var n=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Date(1e3*parseInt(t)),o=n.getMonth()+1,i=n.getDate(),a="";if(a=e?o+"月"+i+"日":(o<10?"0"+o:o)+"."+(i<10?"0"+i:i),r){var s=n.getHours(),c=n.getMinutes();a+=" "+s+":"+(c<10?"0"+c:c)}return a};e.a={scheme:function(t,e){var r="https://weread.qq.com/wrpage/infinite/lottery?";switch(t){case"auto":r+="auto=1&";break;case"join":case"share":r+="collageId="+e+"&"}return r+="isAnimateTitleView=1&isAnimateNavBarBackground=1&isShowNavBarShadow=0&isStatusbarLight=1&backgroundColor=%23282c3c&navBarTintColor=%23ffffff&navBarTitleColor=%23ffffff&navBarBackgroundColor=%237F000000",r="weread://browse?userinfo=1&style=1&url="+encodeURIComponent(r),console.log("scheme:",r),r},formatCollageDesc:function(t){var e="";return t?(t.issue&&(e+="第&nbsp;"+t.issue+"&nbsp;期&nbsp;&nbsp;&nbsp;"),t.startTime&&t.expiredTime&&(e+=n(t.startTime)+"&nbsp;-&nbsp;"+n(t.expiredTime)),e):e},fixedLengthMembersArray:function(t){var e=[];return t&&t.members?t.lackMembers>0?e=t.members.concat(new Array(t.lackMembers).fill({})):t.members?t.members:e:e},dateFormat:n}},821:function(t,e){},836:function(t,e){},850:function(t,e){},862:function(t,e){},912:function(t,e){},914:function(t,e){},916:function(t,e){},946:function(t,e){},969:function(t,e){},97:function(t,e,r){r.r(e);var n=r(313),o=r.n(n),i=r(7)(o.a,{render:function(){var t=this.$createElement,e=this._self._c||t;return this.displayCount?e("view",{class:["wr_readingCount",this.customSelector]},[e("view",{staticClass:"wr_readingCount_icon"}),this._v("\n    "+this._s(this.displayCount)+"\n")]):this._e()},staticRenderFns:[]},(function(t){r(744)}),null,null);e.default=i.exports},971:function(t,e){},998:function(t,e){}}]);