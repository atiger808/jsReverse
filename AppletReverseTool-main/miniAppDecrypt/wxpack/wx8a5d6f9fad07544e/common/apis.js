(global.webpackJsonpMpvue=global.webpackJsonpMpvue||[]).push([["common/apis"],{11:function(e,t,n){n.r(t);var r=n(8),o=n.n(r),a=n(23),i=n.n(a),u=n(17),s=n.n(u),c=n(3),d=n(74),l=n.n(d),f=[new RegExp("log/logkv")];function p(e,t){if(f.some((function(t){return!t.test(e)}))){console.log("wx request encounter an error with "+e+": "+s()(t));try{l.a.setTagsContext({source:"request",requestUrl:e}),l.a.captureException(new Error(s()(t)),{level:"error"})}catch(t){console.warn("sentry report error: "+t)}}}function m(e){return[new RegExp("/hera"),new RegExp("/log/logkv"),new RegExp("/log/wprealosslog")].some((function(t){return t.test(e)}))}function g(e,t){return""===(t=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}(t)).trim()?e:e+(e.indexOf("?")>-1?"&"+t:"?"+t)}function h(e){m(e.url)||console.log("[Request]",s()(e)),e.dataType=e.dataType?e.dataType:"json";var t=e.data,n=e.url,r=e.header;function o(){var a=c.default.getUser(),u=g(n,{vid:a.vid,skey:a.skey,platform:a.Platform});m(u)||console.log("[Request] Start, url: %s",u),wx.request({method:e.type,url:encodeURI(u),data:t,header:r,dataType:e.dataType,success:function(t){var r=t.data||{},a=r.errcode||r.result&&r.result.errCode||r.errCode;-2010!==a&&-2012!==a?t.statusCode&&t.statusCode.toString().startsWith("2")?(m(u)||console.log("[Request] Success",t&&function(e){return"object"===(void 0===e?"undefined":i()(e))&&(e=s()(e)),e.length>300?e.slice(0,300)+"...（显示已截短）":e}(r)),e.success&&e.success(t.data)):502===t.statusCode?console.error("Request 502",n):(p(n,t),e.error&&e.error(t)):c.default.login({needGetToken:!0,success:function(e){var t=c.default.getUser();n=function(e,t){return e.indexOf("book/chapterread")>-1&&e.indexOf("token=")>-1&&t&&(console.log("older url:",e),e=e.replace(/&token=*.*/,"&token="+t),console.log("new url:",e)),e}(n,t.token),o()},fail:function(t){e&&e.error(t)}})},fail:function(t){e.error&&e.error(t)},complete:function(t){e.complete&&e.complete(t)}})}if(!~n.indexOf("wrpage")&&n.startsWith("https://weread.qq.com")){var a=c.default.getNodeDomain();n=n.replace("https://weread.qq.com",a)}n.startsWith("http")||(n=c.default.getDomain()+"/"+n),e.needlessLogin||c.default.isLogin()?o():c.default.login({needGetToken:!0,success:function(e){o()},fail:function(t){t&&502===t.statusCode?console.error("Request 502"):(p("login",t),e&&e.error(t))}})}t.default={getTXCloudFunctionURL:function(e){if(e.startsWith("http")||e.startsWith("https"))return e;var t=c.default.getUser(),n=t&&t.TXCloudTestEnv?"test":"release",r="https://lambda.weread.qq.com";return e.startsWith("/")?r+"/"+n+e:r+"/"+n+"/"+e},request:h,get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];return new o.a((function(r,o){h({url:e,needlessLogin:n,data:t,success:function(e){r(e)},error:function(e){o(e)}})}))},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json";return new o.a((function(o,a){h({type:"POST",dataType:r,url:e,needlessLogin:n,data:t,success:function(e){o(e)},error:function(e){a(e)}})}))},getSCF:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r=this.getTXCloudFunctionURL(e);return this.get(r,t,n).then((function(e){return e.errCode<0?o.a.reject(e):e}))},postSCF:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",a=this.getTXCloudFunctionURL(e);return this.post(a,t,n,r).then((function(e){return e.errCode<0?o.a.reject(e):e}))},reset:function(){wx.hideNavigationBarLoading()},uploadLocalFile:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{"content-type":"multipart/form-data"};return new o.a((function(o,i){e.startsWith("http")||(e=c.default.getDomain()+"/"+e);var u=c.default.getUser(),s=g(e,{vid:u.vid,skey:u.skey,platform:u.Platform});wx.uploadFile({url:s,filePath:n,name:t,formData:r,header:a,success:function(e){o(e)},fail:function(e){i(e)}})}))},dowloadFile:function(e,t){return new o.a((function(n,r){var o=c.default.getUser(),a=g(e,{vid:o.vid,skey:o.skey,platform:o.Platform});wx.downloadFile({url:a,header:t,success:function(e){200===e.statusCode?n(e.tempFilePath):r(e)},fail:function(e){r(e)}})}))}}},16:function(e,t,n){n.r(t);var r,o=n(4),a=n.n(o),i=n(10),u=n.n(i),s=n(17),c=n.n(s),d=n(23),l=n.n(d),f=n(8),p=n.n(f),m=n(3),g=n(2),h=n(89),v=n(297),y=n(74),k=n.n(y),w=(r=u()(a.a.mark((function e(t){var n,r,o,i=t.name,u=t.data;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("cloudFunction "+i+"  Reques start"),n=Date.now(),r=m.default.getUser(),m.default.isLogin()){e.next=7;break}return o=new Date,console.log("cloud function start login"),e.abrupt("return",I().then((function(e){return console.log("cloud function end login use time:",new Date-o),w({name:i,data:u})})));case 7:return u||(u={}),u.vid||(u.vid=r.vid),u.skey||(u.skey=r.skey),u.pf||(u.pf=r.Platform),e.abrupt("return",G({name:i,data:u}).then((function(e){if(!e.result)return p.a.reject({errMsg:"Empty response"});var t=e.result;return setTimeout((function(){return h.default.instance.injectCampaignTime(i,Date.now()-n)}),0),-2010===t.errCode||-2012===t.errCode||-2010===t.errcode||-2012===t.errcode?b>=3?p.a.reject({errMsg:"login error"}):(b++,I().then((function(){var e=m.default.getUser();return u.vid=e.vid,u.skey=e.skey,u.pf=e.Platform,w({name:i,data:u})})).catch((function(e){return console.log("cloud login error:",e),p.a.reject(e)}))):t.errCode<0||t.errcode<0||t.errorCode?(console.log("error cloudFunction < 0: ["+i+"], requestId = "+e.requestID),b=0,p.a.reject(t)):(b=0,p.a.resolve(t))})));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),b=0;function I(){return new p.a((function(e,t){m.default.login({needGetToken:!0,success:function(t){console.log("loginPromise succ"),e(t)},fail:function(e){console.log("loginPromise error"),t(e)}})}))}function G(e){var t=e.name,n=e.data,r=m.default.getUser(),o=r&&r.cloudFunctionTestEnv,a=+new Date;return!n.module&&o?n.module="wrlogictest":n.module||(n.module="wrlogic"),new p.a((function(e,o){wx.cloud.callFunction({name:t,data:n}).then((function(o){console.log("[cloudFunction] succ",t,o.requestID,"Request body:",c()(n||{}),"Response:",function(e){return"object"===(void 0===e?"undefined":l()(e))&&(e=c()(e)),e.length>350?e.slice(0,350)+"...（显示已截短）":e}(o.result)),wx.reportPerformance&&v.satisfies(r.SDKVersion,">=2.9.2")&&wx.reportPerformance(1002,+new Date-a),e(o)})).catch((function(e){console.error("[cloudFunction] error",t,"Request body:",n,e),e&&g.default.monitor({action:"cloudFunction_error",code:e.errCode||e.errcode||500}),k.a.captureException(new Error(c()(e)),{level:"error"}),g.default.reportKVLog({itemname:"cfErr_"+t}),o(e)}))}))}t.default=w},2:function(e,t,n){n.r(t);var r=n(65),o=n.n(r),a=n(4),i=n.n(a),u=n(10),s=n.n(u),c=n(6),d=n.n(c),l=n(8),f=n.n(l),p=n(17),m=n.n(p),g=n(11),h=n(3),v=n(15),y=n(66),k=n(405),w=n(16),b=n(118),I=0;function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],r=arguments[3],o=arguments[4];return k.a.parse(e,"",t,n,r,o)}function C(){var e=h.default.getUser();return e&&e.paperBookScfTestEnv?"https://weread.qq.com/wrpaperbookscf-rc":"https://weread.qq.com/wrpaperbookscf"}t.default={loadBookShelf:function(){return g.default.post("shelf/sync","")},loadMpCover:function(e){var t=e.bookIds;return g.default.post("mp/cover",m()({bookIds:t}))},loadStore:function(){return h.default.getUser().openBannerPreview?g.default.get("https://weread.qq.com/mp/home/store?isTest=1"):g.default.get("https://weread.qq.com/mp/home/store")},loadLimitBookShelf:function(e){var t=e.count,n=void 0===t?3:t;return g.default.get("https://weread.qq.com/mp/home/miniShelf?withLecture=1&count="+n)},loadBookStoreRanking:function(){return g.default.get("market/list?type=14&rn=1")},loadBookStoreNovelRanking:function(){return g.default.get("market/list?subtype=1&rn=1")},loadBookStoreLectureCategories:function(){return g.default.get("market/list?subtype=2&rn=1")},loadBookstoreRecommendationBook:function(){return g.default.get("promo/list?type=recommend_new&subtype=0&count=10")},loadRecommendBooks:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="?type="+e;return t&&(r+="&count="+t),n&&(r+="&maxIdx="+n),g.default.post("store/miniRecommend"+r,"")},loadSelectedNovels:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return g.default.get("store/weixin?type=3&count="+e+"&maxIdx="+t)},loadHotReadingBooks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return g.default.get("market/category?categoryId=2000&count="+e+"&maxIdx="+t)},weixinRecommend:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return g.default.get("https://weread.qq.com/wrpage/wechat/search/miniProgram/weixinRecommend?count="+e+"&maxIdx="+t)},loadGuessBooks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return g.default.get("promo/list?type=recommend_new&count="+e+"&maxIdx="+t)},loadTopReadingBooks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return g.default.get("market/category?categoryId=all&rank=1&count="+e+"&maxIdx="+t)},loadStoreCategories:function(){return g.default.get("store/weixin?type=2&category=1")},loadStoreTop100:function(){return g.default.get("market/list?type=14")},loadTop100:function(){return g.default.get("market/categories?ranklist=1&categoryId=all")},loadCategories:function(){return g.default.get("market/categories?categoryId=0")},loadCategoryBooks:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)return f.a.reject(new Error("missing categoryId"));var o="?categoryId="+e;return t&&(o+="&count="+t),n&&(o+="&maxIdx="+n),r&&(o+="&rank=1"),g.default.post("market/category"+o)},loadLecturesRecommend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return g.default.get("promo/list?type=recommend_new&subtype=2&count="+e)},searchBook:function(e){e.count||(e.count=10);var t="?count="+e.count;return e.keyword&&(t+="&keyword="+e.keyword),e.outer&&(t+="&outer="+e.outer),e.fromBookId&&(t+="&fromBookId="+e.fromBookId),e.maxIdx&&(t+="&maxIdx="+e.maxIdx),g.default.post("store/search"+t)},loadSimilarBooks:function(e,t){return g.default.get("book/similar?isPromote=1&recommendList=1&bookId="+e+"&count="+t)},loadPodcastRecommends:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return g.default.get("book/podcastrecommend?bookId="+e+"&type="+t+"&count="+n+"&maxIdx="+r)},loadFriendReadingBooks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="?";return e&&(n+="count="+e),n+=t?"&maxIdx="+t:"&synckey=0",g.default.get("discover"+n)},loadBookInfo:function(e){return g.default.get("book/info?bookId="+e)},loadChapterInfos:function(e,t,n){n||(n=[0]);var r={bookId:e,synckeys:n};t&&(r.chapters=t);var o=m()(r);return g.default.post("https://weread.qq.com/mp/reader/chapterinfos",o)},loadChapterEPubContent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="EPUBHTML_"+e+"_"+t,o=v.default.getStorageSync(r);if(o){var a=G(o,n,e,t);return f.a.resolve(a)}return g.default.get("https://weread.qq.com/mp/reader/epub-contents?v=2&bookid="+e+"&chapters="+t).then((function(o){if(o.data&&o.data.length>0){var a=b.a.chk(o.data);return G(b.a.dT(a),n,e,t,r)}return{}})).catch((function(e){return console.log("loadChapterEPubContent err: ",e),{}}))},loadGovernmentAffairsReadingData:function(e){var t=h.default.getUser();return t.openWxWorkTestEnv&&(e.test=!0),Object(w.default)({name:"governmentAffairsReading",data:d()({vid:t.vid,skey:t.skey,pf:t.platform},e)})},reportGovernmentAffairsReadingOssLog:function(e){var t=e.scorpid,n=void 0===t?"":t,r=e.action,o=void 0===r?"":r,a=e.source,i=void 0===a?"":a,u=e.value,s=void 0===u?0:u,c=Object(y.formatOssLogTime)(new Date),d="https://oss.weread.qq.com/hera/osslog",l=h.default.getUser(),f=[l.vid,l.Platform,l.OS,"","",c,n,i,o,s,l.openid];return console.log("governmentAffairsReadingOssLog ",d+"?logid=80001074&logContent="+f.join(",")),g.default.get(d+"?logid=80001074&logContent="+f.join(",")).catch((function(e){console.log("osslog error",e)}))},loadMiniBookList:function(e){var t=h.default.getUser();return Object(w.default)({name:"miniBooklist",data:d()({vid:t.vid,skey:t.skey,pf:t.platform},e)})},loadChapterContent:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments[4];return s()(i.a.mark((function u(){var s,c,d,l;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return(s=h.default.getUser()).isWhitelisted,c="",s.token&&"none"!==n&&(c="&token="+s.token),console.log("reader unlock: ",s.token,n),d="https://weread.qq.com/mp/reader/txt-contents?bookid="+e+"&chapters="+t+c,l=null,i.abrupt("return",g.default.get(d).then((function(i){var u=i.data;if(u.token&&(s.token=u.token,h.default.saveUserInfo(s)),"none"!==n&&u.price>0&&1===u.tokenInvalid&&(s.skey="",v.default.setStorageSync("userInfo",s),I<3))return I++,r.loadChapterContent(e,t,"",o);l=u;var c=b.a.chk(l.content);return l.content=b.a.dT(c),"epub"===a?r.loadChapterEPubContent(e,t,o).then((function(e){return e&&e.html&&(l.ePubData=e),l})):l})).catch((function(e){throw console.log("loadChapterContent:",e),e})));case 8:case"end":return i.stop()}}),u,r)})))()},uploadReadProgressAndTime:function(e){var t=e.bookId,n=e.chapterIdx,r=e.chapterUid,a=e.progress,i=e.readingTime,u=void 0===i?0:i,s=e.ttsTime,c=void 0===s?0:s,d=e.chapterOffset,l=void 0===d?0:d,f={bookId:t};return n&&r&&(f=o()(f,{appId:123456,chapterUid:r,chapterIdx:n,wpChapterOffset:l})),u&&(f.readingTime=u),c&&(f.ttsTime=c),a&&(f.progress=a),console.log("postData:",f),g.default.post("book/read",m()(f)).then((function(e){return e||{}})).catch((function(e){return console.log("loadReadProgress error:",e),{}}))},loadReviewList:function(e,t,n){return n||(n="0"),g.default.get("book/detailinfo?listTypes=1&bookId="+e+"&synckey=0&maxIdx="+n+"&count="+t)},loadFriendReviewList:function(e,t){return g.default.get("review/list?listType=4&bookId="+e+"&synckey=0&maxIdx=0&count="+t+"&listmode=4").catch((function(e){return console.log("loadFriendReviewList:",e),null}))},loadReadingUser:function(e){return g.default.get("book/readingStat?showUserNum=4&bookId="+e).catch((function(){return null}))},loadFriendSameReading:function(e){return g.default.get("review/sameTimeReading?bookId="+e+"&isFriend=1")},addToBookShelf:function(e,t){var n={bookIds:[e],isLecture:t};return g.default.post("https://weread.qq.com/mp/shelf/addToShelf",m()(n)).then((function(e){if(!e||0!==e.errCode)throw e.errCode}))},checkIfBookShelfFull:function(){return g.default.get("https://weread.qq.com/mp/shelf/shelfFull")},getCosCredential:function(e){return g.default.get("cos/getcredential?name="+e)},getCosNotify:function(e,t){return g.default.post("cos/notify?name="+e+"&path="+t)},deleteFromBookshelf:function(e,t){var n={bookIds:[e]};return t&&(n={lectureBookIds:[e]}),g.default.post("shelf/delete",m()(n))},secretBook:function(e){var t={bookIds:[e.bookId],private:e.secret?1:0};return g.default.post("book/secret",m()(t))},buyBook:function(e,t){var n={bookId:e,pf:h.default.isAndroid?"wechat_wx-2001-android-100-weread":"weread_wx-2001-iap-2001-iphone",zoneid:"1",release:"1",price:parseFloat(t),source:"miniProgram"};return g.default.post("pay/buyBook",m()(n))},buyChapters:function(e,t,n,r){var o=h.default.isAndroid?"wechat_wx-2001-android-100-weread":"weread_wx-2001-iap-2001-iphone",a={bookId:e,chapterIds:t,totalprice:parseFloat(n),zoneid:"1",release:"1",pf:o,isautopay:r?"1":"0"};return g.default.post("pay/buyChapters",m()(a))},cancelAutoBuy:function(e,t){var n={bookId:e+"",type:t};return g.default.post("pay/cancelAutoBuy",m()(n))},queryBalance:function(){var e={zoneid:"1",release:"1",pf:h.default.isAndroid?"wechat_wx-2001-android-100-weread":"weread_wx-2001-iap-2001-iphone"};return g.default.post("pay/balance",m()(e))},infiniteTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return g.default.get("pay/memberCardSummary?snapshot="+e)},giftDetail:function(e){return g.default.get("gift/detail?giftId="+e)},buyBookGift:function(e,t,n,r){var o={bookId:e,giftMsg:n,price:r,payType:t,count:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,pf:h.default.isAndroid?"wechat_wx-2001-android-100-weread":"weread_wx-2001-iap-2001-iphone",release:1};return console.log("post %o",o),g.default.post("gift/send",m()(o))},giftComment:function(e,t){var n={giftId:e,comment:t};return g.default.post("gift/comment",m()(n))},giftView:function(e){return g.default.get("gift/view?bookId="+e)},payItem:function(){return g.default.get("pay/item?channel=0&synckey=0")},queryUserInfiniteActiveType:function(){return g.default.get("act/activeinfinite").then((function(e){var t=e&&e.birdBox,n=e&&e.userType;return"newuser"===n&&(n="unactive"),{activeType:n,birdBox:t}}))},queryUserInfiniteStatus:function(e,t,n,r,o){var a="act/sendinfinite?cmd=query&type="+e+"&source="+t;return n&&r&&(a+="&toVid="+n+"&benefitId="+r),o&&(a+="&toPlatform="+o),g.default.get(a).catch((function(e){return console.log("queryUserInfiniteStatus error:",e),null}))},receiveInfinite:function(e,t,n,r){var o="act/sendinfinite?cmd=receive&type="+e+"&source="+t;return n&&(o+="&toVid="+n),r&&(o+="&toPlatform="+r),g.default.get(o)},reportKVLog:function(e){var t=e.itemname,n=e.value,r="?key=78503281&itemName="+t+"&value="+((void 0===n?1:n)||1);return g.default.get("https://oss.weread.qq.com/hera/logkv"+r,"",!0)},reportRealKVLog:function(e){return e.key,f.a.resolve()},reportOsslog:function(e){var t=h.default.getUser(),n={key:80000411,Vid:t.Vid,Platform:t.Platform,OS:t.OS,Version:t.Version};return n.param=e,g.default.post("https://weread.qq.com/wrpage/wechat/search/log/apposslog",m()(n))},loadReviewDetail:function(e){return g.default.get("review/single?reviewId="+e)},publishBookReview:function(e){var t=e.bookId,n=e.content,r=e.newRatingLevel,o=e.type,a=void 0===o?4:o,i=e.isPrivate,u={bookId:t,content:n,newRatingLevel:r,type:a,isPrivate:void 0===i?0:i,chapterUid:e.chapterUid};return g.default.post("review/add",m()(u))},deleteBookReview:function(e){var t={reviewId:e};return g.default.post("review/delete",m()(t))},userPersonalProfile:function(e){var t=e.userVid;return g.default.get("user/profile?gender=1&signature=1&vDesc=1&location=1&totalReadingTime=1&currentReadingTime=1&finishedBookCount=1&followerCount=1&followingCount=1&totalLikedCount=1&isFollowing=1&userVid="+t)},userProfileSimple:function(e){var t=e.userVid;return g.default.get("user/profile?gender=1&totalReadingTime=1&userVid="+t)},userProfileInfo:function(e){return g.default.get("user?userVid="+e)},userProfile:function(e){return e?g.default.get("user/profile?userVid="+e+"&gender=1"):(console.warn("触发了 vid 不存在的操作"),new f.a((function(e){h.default.login({success:function(){e()}})})).then((function(){var e=h.default.getUser().vid;return g.default.get("user/profile?userVid="+e+"&gender=1")})))},friendShelfCommon:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="shelf/friendCommon?userVid="+e+"&synckey=0";return t>0&&(n+="&minCount="+t),g.default.get(n)},userProfileReviews:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return g.default.get("review/list?listType=6&synckey=0&maxIdx=0&userVid="+e+"&rangeType=2&mine="+t+"&listMode=1")},userProfileWorks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return g.default.get("shelf/opus?userVid="+e+"&count="+t+"&listType="+n+"&listMode="+r)},userProfileBooklists:function(e){return g.default.get("booklists?userVid="+e+"&type=1&synckey=0&count=4")},getPayItem:function(){return g.default.get("pay/item?channel=1&synckey=0")},reportFormId:function(e){var t=e.formId,n=e.scene,r=h.default.getUser(),o={formId:t,vid:r.vid,appId:"wx8a5d6f9fad07544e",scence:n,openId:r.openid};return g.default.post("miniprogram/formid",m()(o))},loadSearchTags:function(e){var t=e.count,n=void 0===t?10:t;return n>100&&(n=100),g.default.get("promo/list?type=hotsearch&count="+n)},followFriend:function(e){var t=e.vid,n=e.isUnfollow;return g.default.post("friend/follow",{vid:parseInt(t),isUnfollow:n})},free3books:function(e){var t=e.count,n=void 0===t?3:t,r=e.maxIdx,o=void 0===r?0:r;return g.default.get("promo/list?type=free3book&count="+n+"&from=wechat&maxIdx="+o)},free3booksReceive:function(e){var t={bookId:e.bookId};return g.default.post("gift/newuser",m()(t))},downloadMpQrCode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a={scene:encodeURIComponent(e),page:t,width:n,auto_color:!r,line_color:r,is_hyaline:o},i="https://res.weread.qq.com/fetch?wxacode=wp&p="+m()(a);return g.default.dowloadFile(i,{"content-type":"image/png"})},markBookFinished:function(e){var t=e.bookId,n=e.isCancel,r={bookId:t,isCancel:void 0===n?0:n};return g.default.post("book/setfinish",m()(r))},top100RankShareInfo:function(e){var t=e.categoryId,n=e.finishCount;return g.default.get("market/ranklistShare?categoryId="+t+"&finishCount="+n)},chatSessionList:function(e){return g.default.get("chat/sessionlist?synckey="+e)},sendChatMessage:function(e,t){var n={type:e.type,content:e.content,clientTime:(new Date).getTime(),sid:"v_"+t};return g.default.post("chat/send",n)},getUnlockList:function(e){return g.default.get("https://weread.qq.com/wrpage/wechat/search/miniProgram/getUnlockList?userVid="+e)},setUnlockList:function(e,t){return g.default.post("https://weread.qq.com/wrpage/wechat/search/miniProgram/setUnlockList?userVid="+e,{value:t})},getUnlockRecord:function(e){return g.default.get("https://weread.qq.com/wrpage/wechat/search/miniProgram/getUnlockRecord?userVid="+e)},setUnlockRecord:function(e,t){return g.default.post("https://weread.qq.com/wrpage/wechat/search/miniProgram/setUnlockRecord?userVid="+e,{value:t})},uploadLocalFile:function(e,t,n,r,o){return g.default.uploadLocalFile(e,t,n,r,o)},readingInfinite:function(){return g.default.get("infinite/reading")},readingInfiniteInfo:function(){return g.default.get("infinite/reading?cmd=query")},giftCollectionActivity:function(){var e=h.default.getUser(),t=e&&e.activityCardsPreview;return Object(w.default)({name:"activityCardList",data:{version:5,pr3view:t}})},sendTempleMsgForUnlockSucc:function(e){var t=e.senderVid,n=e.selfUser,r=e.unlockCount,o=e.bookId,a={data:{keyword1:{value:n.name+" 成功帮你解锁 "+r+" 章"},keyword2:{value:"继续邀请好友，可免费解锁更多章节"}},toVid:+t,template_id:"Gzn_MdtfV2adHBg0BadK77s1ljPHGxma382UBvo-7Zw",page:"pages/unlock/main?senderVid="+t+"&bookId="+o+"&from=wpMsg_unlock"};return g.default.post("wp/sendmsg",m()(a))},getWeixinTTSToken:function(){return g.default.get("tts/token")},getWeixinTTSAudio:function(e){var t=e.text,n=e.accessToken,r=e.filePath,o=e.bookId,a=e.per,i=e.chapterUid;console.log("tts preload: ",t);var u=h.default.getUser().vid;return new f.a((function(e,s){g.default.post("https://ae.weixin.qq.com/aetts",{uid:u,busi_type:1,key_prefix:o,token:n,chapter_id:i,model_name:3===a?"male3":"female3",text_utf8:t,version:"mini_program"}).then((function(t){if(t&&t.baseResponse&&-13===t.baseResponse.ret)s({errCode:-13});else if(t&&t.audio_url){var n=t.audio_url;wx.downloadFile({url:n,filePath:r,success:function(t){e(r)},fail:function(e){s(e)}})}else t&&t.audio_data?wx.getFileSystemManager().writeFile({filePath:r,data:t.audio_data,encoding:"base64",success:function(t){e(r)},fail:function(e){s(e)}}):s(new Error("tts request error"))})).catch((function(e){s(e)}))}))},getTTSAudio:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;console.log("getTTSAudio  accessToken:",t);var a=h.default.getUser().vid,i="tex="+encodeURI(encodeURI(e))+"&lan=zh&cuid="+a+"&ctp=1&aue=3&tok="+t+"&spd="+r+"&per="+o;return new f.a((function(e,t){console.log("start download audio"),wx.downloadFile({url:"https://tsn.baidu.com/text2audio?"+i,filePath:n,success:function(r){if(console.log("download file res:",r),r.header&&r.header["Content-Type"]&&"audio/mp3"!==r.header["Content-Type"])t({});else if(200===r.statusCode)e(n);else{var o={errMsg:"err statusCode "+r.statusCode};t(o)}},fail:function(e){t(e)}})}))},sendTempleMsg:function(){return g.default.post("wp/sendmsg",m()({data:{keyword1:{value:"还差1人助力即得“为中国科幻助力”活动重磅礼包"},keyword2:{value:"再邀3位好友助力可再得终极礼包。"}},toVid:330410352,template_id:"Gzn_MdtfV2adHBg0BadK77s1ljPHGxma382UBvo-7Zw",page:"pages/index/main?vol=7&from=wpMsg_infiniteDay"}))},sendTempleMsgForInviteNewuser:function(e){var t=e.inviter,n={data:{keyword1:{value:e.invitee.name+"已加入微信读书"},keyword2:{value:"1天体验卡已存入你的账户"}},toVid:t.vid,template_id:"sGxLCT44IbiX3WPslpS2wMZBJDeFzyaSYlJaS6VHIAg",page:"pages/index/main?from=wpMsg_inviteNewUser"};return g.default.post("wp/sendmsg",m()(n))},redPacketDetail:function(e){return g.default.get("pay/membercardcouponpacket?cmd=get&packetId="+e)},redPacketReceive:function(e){return g.default.get("pay/membercardcouponpacket?cmd=recv&packetId="+e)},infiniteDayLatestIssue:function(){return g.default.get("https://weread.qq.com/wrpage/infinite/monthly/data/latest")},infiniteDayPageData:function(e){return g.default.get("https://weread.qq.com/wrpage/infinite/monthly/data/"+e)},infiniteDayReviewSingle:function(e){return g.default.get("https://weread.qq.com/review/single?synckey=0&commentsCount=20&commentsDirection=1&likesCount=20&likesDirection=1&reviewId=CM_iday"+e)},infiniteDayLikeDetail:function(e){var t=e.senderVid,n=e.vol;return g.default.get("gift/getlike/detail?senderVid="+t+"&vol="+n)},infiniteDayVote:function(e){var t={votedVid:e.votedVid,vol:e.vol};return g.default.post("gift/getlike/vote",m()(t))},reviewLike:function(e,t){return g.default.post("review/like",{reviewId:e,isUnlike:t})},commentRreview:function(e,t){return g.default.post("review/comment",{reviewId:e,content:t})},commentReviewComment:function(e,t,n){return g.default.post("review/comment",{reviewId:e,content:t,toUserVid:n})},lockDetail:function(e){var t=e.lockId,n=e.unlockerVid;return g.default.get("lock/detail?lockId="+t+"&unlockerVid="+n)},unlockChapter:function(e){var t=e.lockId,n=e.unlockerVid;return g.default.get("lock/unlock?lockId="+t+"&unlockerVid="+n)},acceptInvite:function(e){var t={inviter:e.inviter,invitee:e.invitee};return g.default.post("https://weread.qq.com/wrpage/wechat/search/miniProgram/acceptInvite",m()(t))},readConfig:function(){var e=h.default.getUser(),t=e.userConfig&&e.userConfig.synckey||0;return Object(w.default)({name:"readConfig",data:{synckey:t}}).then((function(e){return e}))},typoGameTest:function(){return Object(w.default)({name:"battleGameScore",data:{requestType:"adsScore",userLevel:2}})},dummyInterface:function(){return new f.a((function(e){setTimeout((function(){e({requestID:"dummy",result:{}})}),500)}))},commonCloudFuncRequest:function(e,t){return Object(w.default)({name:e,data:t}).then((function(e){return f.a.resolve(e)})).catch((function(n){return console.error("commonCloudFuncRequest: "+e,"API",t,n),f.a.reject(n)}))},collaborationInfo:function(e){var t=encodeURIComponent(e);return g.default.get("https://weread.qq.com/wrpage/act/collaboration/presentation/data/"+t)},collaborationReceiveBook:function(e,t,n){var r={vid:h.default.getUser().vid,actionName:e,bookIds:t,authorVids:n};return g.default.post("https://weread.qq.com/wrpage/act/collaboration/receive",m()(r))},getWeChatPayV2Sign:function(e){return g.default.post("busifavor/sign",m()({cmd:"v2",rawText:e}))},collaborationReceiveInfinite:function(e,t,n,r,o,a,i){var u={vid:h.default.getUser().vid,actionName:e,channelId:t};return n&&(u.isCouponCard=n,u.wxOpenId=r,u.nonce=o,u.associate=a,u.ciphertext=i),g.default.post("https://weread.qq.com/wrpage/act/collaboration/receiveInfinite",m()(u))},checkCoupon:function(e,t,n,r){var o={openid:e,nonce:t,ciphertext:r,associate:n};return g.default.post("busifavor/checkcoupon",m()(o))},addUpBookNotification:function(e,t){var n="add";return t||(n="del"),g.default.get("wx/upbook?type=wp&cmd="+n+"&bookId="+e)},checkUpBookNotifyState:function(e){return g.default.get("wx/upbook?type=wp&cmd=get&bookId="+e)},infiniteDayLike:function(e,t){return Object(w.default)({name:"infiniteDayLike",data:{issue:e}})},infiniteDayConfigsXiaomiVideoURL:function(e){return g.default.get("svp/geturl?svpid=0bf2xmg3oaan2ealjyzywzpxdo6dw65q3nya&code=fake&vid="+e)},infiniteDayConfigsXiaomi:function(e){var t=e.issue,n=e.pr3view,r=e.benefitId,o=e.toVid,a=h.default.getUser();return Object(w.default)({name:"infiniteDayConfigsXiaomi",data:{vid:a.vid,skey:a.skey,pf:a.platform,issue:t,pr3view:n,benefitId:r,toVid:o}})},infiniteDayConfigsTclVideoURL:function(e){return g.default.get("svp/geturl?svpid=0bf2riabwaaafiaaxd3ipbqxzcwddofaagya&code=fake&vid="+e)},infiniteDayConfigsTcl:function(e){var t=e.issue,n=e.pr3view,r=e.benefitId,o=e.toVid,a=h.default.getUser();return Object(w.default)({name:"infiniteDayConfigsTcl",data:{vid:a.vid,skey:a.skey,pf:a.platform,issue:t,pr3view:n,benefitId:r,toVid:o}})},infiniteDayConfigsVivo:function(e){var t=e.issue,n=e.pr3view,r=e.benefitId,o=e.toVid,a=h.default.getUser();return Object(w.default)({name:"infiniteDayConfigsVivo",data:{vid:a.vid,skey:a.skey,pf:a.platform,issue:t,pr3view:n,benefitId:r,toVid:o}})},infiniteDayConfigsCosta:function(e){var t=e.issue,n=e.pr3view,r=e.benefitId,o=e.toVid,a=h.default.getUser();return Object(w.default)({name:"infiniteDayConfigsCosta",data:{vid:a.vid,skey:a.skey,pf:a.platform,issue:t,pr3view:n,benefitId:r,toVid:o}})},infiniteDayConfigs:function(e){var t=e.issue,n=e.pr3view,r=e.benefitId,o=e.toVid,a=h.default.getUser();return Object(w.default)({name:"infiniteDayConfigs",data:{vid:a.vid,skey:a.skey,pf:a.platform,issue:t,pr3view:n,benefitId:r,toVid:o}})},infiniteDaySendGift:function(e){var t=e.issue,n=e.giftIndices;return Object(w.default)({name:"infiniteDaySendGift",data:{issue:t,giftIndices:n}})},getMpAccessToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=e?1:0,g.default.get("wx/accesstoken?type=mp&force="+e)},decodeWxCardCode:function(e,t){var n="https://api.weixin.qq.com/card/code/decrypt?access_token="+t,r={encrypt_code:e};return g.default.post(n,m()(r),!1)},mpCoverInfo:function(e){var t=e.bookId,n=h.default.getUser();return Object(w.default)({name:"mpCoverInfo",data:{vid:n.vid,skey:n.skey,pf:n.platform,bookId:t}})},queryExchangeMoney:function(){return g.default.post("exchange",m()({pf:"weread_wx-2001-iap-2001-iphone",zoneid:1}))},appInviteFriend:function(e){return g.default.get("friend/invited?masterVid="+e)},trendWeeklyData:function(e){return Object(w.default)({name:"trendWeeklyData",data:{shareVid:e}})},uploadDataToMP:function(){return Object(w.default)({name:"uploadAllBookIdsToSearchPF",data:{}})},infiniteTrialSendGift:function(){return Object(w.default)({name:"infiniteTrialSendGift",data:{}})},infiniteGiftQuery:function(){return Object(w.default)({name:"infiniteGiftQuery",data:{}})},readingGroupInfo:function(e){var t=e.groupId,n=e.inviteCode,r=e.queryVid;return Object(w.default)({name:"readingGroupInfoV3",data:{groupId:t,inviteCode:n,queryVid:r}})},readingGroupReviews:function(e){var t=e.groupId,n=e.shareVid,r=e.count,o=e.maxId;return Object(w.default)({name:"readingGroupReviews",data:{groupId:t,shareVid:n,count:r,maxId:o}})},readingGroupCreate:function(){return Object(w.default)({name:"readingGroupCreate"})},readingGroupJoin:function(e){var t=e.inviteCode;return Object(w.default)({name:"readingGroupJoin",data:{inviteCode:t}})},readingGroupLeave:function(e){var t=e.dismissVid,n=e.groupId;return Object(w.default)({name:"readingGroupLeave",data:{filtervid:t,groupId:n}})},readingGroupRedeem:function(e){var t=e.rewardId;return Object(w.default)({name:"readingGroupRedeemReward",data:{rewardId:t}})},readingGroupRedeemTaskReward:function(e){var t=e.rewardId;return Object(w.default)({name:"readingGroupRedeemTaskReward",data:{rewardId:t}})},readingGroupNudge:function(e){var t=e.toVid;return Object(w.default)({name:"readingGroupNudge",data:{toVid:t}})},readingGroupConsent:function(e){var t=e.consent;return Object(w.default)({name:"readingGroupConsent",data:{consent:t}})},readingGroupUpdate:function(e){var t=e.groupId,n=e.groupName;return Object(w.default)({name:"readingGroupUpdate",data:{groupId:t,groupName:n}})},readingGroupRespondBrandingOffer:function(e){var t=e.groupId,n=e.selection;return Object(w.default)({name:"readingGroupRespondBrandingOffer",data:{groupId:t,selection:n}})},readingGroupShouldShowUpgradeNotice:function(){return new f.a((function(e){v.default.getStorage({key:"readingGroupUpgradeNotice",success:function(t){e(t.data)},fail:function(){e(0)}})}))},loadRelatedBookData:function(e){var t=this,n=e.bookId;return s()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.default.get("related/bookinfo?bookId="+n).catch((function(e){return console.log("loadPrimarySkuData err",e),{}})));case 1:case"end":return e.stop()}}),e,t)})))()},loadBookChapterInfo:function(e){var t=this,n=e.bookId,r=e.localReadChapterUid,o=e.chapterUid,a=e.useToken,u=e.section;return s()(i.a.mark((function e(){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=h.default.getUser()).isWhitelisted,a||delete(s=d()({},s)).token,!a||s.token){e.next=10;break}return console.log("token is empty"),s.skey="",v.default.setStorageSync("userInfo",s),e.next=9,new f.a((function(e,t){return h.default.login({needGetToken:!0,success:function(t){e(t)},error:function(e){t(e)}})}));case 9:s=e.sent;case 10:return e.abrupt("return",g.default.post("https://weread.qq.com/mp/reader/index?v=2",m()({bookId:n,localReadChapterUid:r,chapterUid:o,userInfo:d()({},s,{token:s.token||""})})).then((function(e){if(e&&e.data){var i=e.data;return i.chapterContent&&i.chapterContent.token&&(s.token=i.chapterContent.token,h.default.saveUserInfo(s)),a&&i.chapterContent.price>0&&1===i.chapterContent.tokenInvalid?(s.skey="",v.default.setStorageSync("userInfo",s),I<3?(I++,t.loadBookChapterInfo({bookId:n,localReadChapterUid:r,chapterUid:o,userInfo:s,section:u})):i):i}throw{errCode:-500,errMsg:"request error"}})).then((function(e){var r=e;return r.book&&r.book.format&&"epub"===r.book.format&&r.chapterContent&&r.chapterContent.chapterIdx?t.loadChapterEPubContent(n,r.chapterContent.chapterIdx,u).then((function(e){return e&&e.html&&(r.ePubData=e),r})):r})).then((function(e){return e.chapterContent&&e.chapterContent.content?d()({},e,{chapterContent:d()({},e.chapterContent,{content:b.a.dH(b.a.chk(e.chapterContent.content))})}):e})).catch((function(e){return e})));case 11:case"end":return e.stop()}}),e,t)})))()},formatTime:function(){var e=new Date;return 1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate()},getReaderUnlockStatus:function(){return Object(w.default)({name:"readerUnlock",data:{oper:"getStatus",timestamp:this.formatTime()}})},reportReaderShareUnlock:function(e){var t=e.bookId,n=e.shareVid;return Object(w.default)({name:"readerUnlock",data:{oper:"reportShareUnlock",bookId:t,shareVid:n,timestamp:this.formatTime()}})},reportReaderAdUnlock:function(e){return Object(w.default)({name:"readerUnlock",data:{oper:"reportReaderAdUnlock",timestamp:this.formatTime(),bookId:e}})},decreaseFreeChapter:function(){return Object(w.default)({name:"readerUnlock",data:{oper:"decreaseFreeChapter",timestamp:this.formatTime()}})},addReaderAdWatchTimes:function(){return Object(w.default)({name:"readerUnlock",data:{oper:"addReaderUnlockTimes",timestamp:this.formatTime()}})},loadBookChapterInfoCloud:function(e){var t=e.bookId,n=e.localReadChapterUid,r=e.chapterUid,o=e.userInfo;return Object(w.default)({name:"bookReader",data:{bookId:t,localReadChapterUid:n,chapterUid:r,userInfo:o}})},sendGrafanaLog:function(e){return g.default.post("https://oss.weread.qq.com/hera/miniprogramlog",e).catch((function(e){console.log("report grafana log error",e)}))},consumeCard:function(e){var t=e.code;return Object(w.default)({name:"WxCardDecode",data:{code:t}})},top200List:function(e){return g.default.get("market/category?categoryId="+e.categoryId+"&count=200&rank=1")},top200Style:function(e){return g.default.get("market/categories?categoryId="+e.categoryId+"&rank=1")},analysisLog:function(e,t){var n="",r=h.default.getUser();if(t)try{n=m()(t)}catch(e){console.log("[analysislog] stringify json error")}g.default.post("https://oss.weread.qq.com/hera/chlog",{extra:n,itemname:e,pf:"ios_wp"===r.Platform?1:2,vid:r.vid}).catch((function(){}))},monitor:function(e){var t=e.code,n=void 0===t?0:t,r=e.action;r&&r.length&&g.default.get("https://oss.weread.qq.com/hera/monitor/wp/"+r+"/"+n)},roundtableConfigs:function(e){var t=e.vol;return Object(w.default)({name:"roundtableConfigs",data:{issue:t}})},roundtableLike:function(e){var t={reviewId:"CM_yidui"+e.vol,isUnlike:e.liked?0:1};return g.default.post("review/like",m()(t))},roundtableDislike:function(e){var t={reviewId:"CM_yidui"+e.vol,cancel:e.disliked?0:1};return g.default.post("review/dislike",m()(t))},sendDebutCard:function(e){var t=e.vol,n=e.userType;return g.default.get("sendcard?type=bookdebut&issue="+t+"&userType="+n)},claimRebates:function(e){var t=e.packetId;return g.default.get("pay/memberCardCouponPacket?cmd=get&packetId="+t)},shareOneGetOneRedeem:function(e){var t=e.campaignId,n=e.senderVid,r=e.bookId,o=e.authorVid;return g.default.post("https://weread.qq.com/share-one-get-one/redeem",{campaignId:t,senderVid:n,bookId:r,authorVid:o})},shareGetRedeem:function(e){var t=e.bookId,n=e.type,r=e.scene,o=e.timestamp,a=e.sn,i=e.vol,u=e.senderVid,s=e.authorVid,c={bookId:t,type:n,scene:r,timestamp:o,sn:a,vol:i,senderVid:u};return s&&(c.authorVid=s),g.default.post("shareget",c)},getRelatedArticles:function(e,t,n,r){return g.default.get("storyfeed/getRelatedArticles?itemtype="+t+"&count="+n+"&reviewId="+e+"&hints="+r)},videoFeedList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return g.default.get("storyfeed/get?itemtype=3&count="+e)},videoFeedReport:function(e){return console.log("api.videoFeedReport body: ",m()(e)),g.default.post("storyfeed/report",m()(e))},infiniteCardingSendGift:function(e){var t=e.benefitId,n=e.counterpartVid,r=e.userType,o=e.shareUserType,a=e.shareSource,i=e.toPlatform;return Object(w.default)({name:"infiniteCardingSendGift",data:{benefitId:t,counterpartVid:n,userType:r,shareUserType:o,shareSource:a,toPlatform:i}})},getEducation:function(e){return g.default.post("edu/promoget",m()(e))},checkIsWhiteUser:function(){var e=h.default.getUser().vid;return e?Object(w.default)({data:{vid:e},name:"whitelisted_user"}).then((function(e){return!(!e||!e.isWhitelisted)||(h.default.setIsWhiteUser(!1),h.default.saveUserInfo({isWhitelisted:!1}),!1)})):(h.default.setIsWhiteUser(!1),f.a.resolve(!1))},getUserFeedbackSubscribeInfo:function(){return Object(w.default)({name:"feedbackSubscribe",data:{TriggerName:"getSubscribeInfo"}})},updateUserFeedbackSubscribeInfo:function(e){return Object(w.default)({name:"feedbackSubscribe",data:d()({TriggerName:"updateSubscribeInfo"},e)})},requestBookShareImageCache:function(e){return g.default.get("https://weread.qq.com/shareimage/cache?templateId=book_share&identifier="+e)},fetchBookIdsInShelf:function(e){var t=e.join(",");return g.default.get("shelf/bookIds?bookIds="+t).then((function(e){var t={};return e.data.forEach((function(e){t[e.bookId]=e.onShelf})),t}))},fetchLectureBookIdsInShelf:function(e){var t=e.join(",");return g.default.get("shelf/bookIds?Lbookids="+t).then((function(e){var t={};return e.data.forEach((function(e){t[e.lectureBookId]=e.onShelf})),t}))},paperBookChopperStatus:function(e){return g.default.post(C()+"/chopperStatus",d()({},e,{version:3})).then((function(e){return e}))},paperBookChop:function(e){return g.default.post(C()+"/chopperFriendChop",d()({},e,{version:3})).then((function(e){return e}))},paperBookAction:function(e){return g.default.post(C()+"/chopperAction",e).then((function(e){return e}))},paperBookChopperLottery:function(e){return g.default.post(C()+"/chopperLottery",e).then((function(e){return e}))},paperBookRecommend:function(e){var t=e.count,n=e.maxIdx;return g.default.get("paper/recommend?count="+t+"&maxidx="+n+"&scene=relDiscount")},exchangeBookRecommend:function(e){return g.default.get("exchange/bookrecommend?count=9&source=chopper&bookId="+e)},readForGift:function(e){var t=e.bookId,n=e.authorVid,r=e.startTime,o=e.expiredTime;return Object(w.default)({name:"readForGift",data:{act:"chopper",bookId:t.toString(),lectureVid:parseInt(n)||0,startTime:r||0,endTime:o||0}})}}},264:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(11));t.default={loadLectureInfo:function(e,t){var n="lecture/list?bookId="+e;return t&&(n+="&userVid="+t),o.default.get(n)},loadChapterAudio:function(e,t){return o.default.get("audio/geturl?quality=1&audioId="+e+"&reviewId="+t)},loadListeningNum:function(e){return o.default.get("book/listeningStat?bookId="+e)},loadListeningUser:function(e,t){var n=t?1:2;return o.default.get("book/listeningStat?bookId="+e+"&listeningList="+n).then((function(e){return e.listenUsers}))},loadBookReviewList:function(e,t,n){return o.default.get("review/list?bookId="+e+"&chapterUid="+t+"&count="+n+"&listMode=2&listType=8").catch((function(e){return console.log("loadBookReviewList:",e),{}}))},loadLectureReviewList:function(e){return o.default.get("review/single?synckey=0&likesCount=500&commentsCount=500&likesDirection=1&commentsDirection=1&reviewId="+e).catch((function(e){return console.log("loadLectureReviewList:",e),{}}))},publishLectureReview:function(e,t,n,r){var a={reviewId:e,content:t,toUserVid:n,toCommentId:r};return o.default.post("review/comment",JSON.stringify(a)).catch((function(e){return console.log("publishLectureReview:",e),{}}))},commentLike:function(e,t){void 0===t&&(t=!1);var n={commentId:e,isUnlike:t};return o.default.post("review/commentlike",JSON.stringify(n)).catch((function(e){return console.log("commentLike:",e),{}}))},deleteComment:function(e){var t={commentId:e};return o.default.post("review/delComment",JSON.stringify(t)).catch((function(e){return console.log("deleteComment:",e),{}}))},uploadLectureProgressAndTime:function(e){return e=Object.assign(e,{appId:123456}),console.log("postData:",e),o.default.post("book/read",JSON.stringify(e)).then((function(e){return e||{}})).catch((function(e){return console.log("uploadLectureProgressAndTime error:",e),{}}))},loadListenCount:function(e,t){return o.default.get("book/newlisteningstat?total=1&bookId="+e+"&lecturerVid="+t)}}},3:function(e,t,n){n.r(t);var r,o,a,i=n(17),u=n.n(i),s=n(65),c=n.n(s),d=n(8),l=n.n(d),f=n(6),p=n.n(f),m=n(4),g=n.n(m),h=n(10),v=n.n(h),y=n(66),k=n(15),w=n(78),b=n(74),I=n.n(b),G=n(296),C=n(2),T=(r=v()(g.a.mark((function e(t,n,r){var o,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("wrlogin start"),t){e.next=5;break}return console.log("wrlogin error: has no code"),F({failed:W}),e.abrupt("return");case 5:if(o=U+"/wplogin?code="+t+"&type=hypo2"+(n?"&gettoken=1":""),L.vid&&!r){e.next=9;break}return e.next=9,S();case 9:return j=Math.floor((new Date).getTime()/1e3),M++,e.next=13,E(o,L).catch((function(e){return{failed:e}}));case 13:a=e.sent,O=!1,a.failed?F(a.failed):(a.skeyValidTime=(new Date).getTime()+72e5,z(a),A(L)),i=a.vid,u=a.skey,wx.request({url:"https://i.weread.qq.com/user?userVid="+i+"&vid="+i+"&skey="+u+"&platform="+L.Platform,success:function(e){console.log("save weread userinfo:",e),e&&e.data&&e.data.name&&z({name:e.data.name||"",avatar:e.data.avatar})}});case 17:case"end":return e.stop()}var i,u}),e,this)}))),function(e,t,n){return r.apply(this,arguments)}),S=(o=v()(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.checkAuthorizeSync();case 2:if(t=e.sent,n={fail:N},!t){e.next=8;break}return e.next=7,new l.a((function(e,t){wx.getUserInfo({success:function(t){console.log("getuserInfo",t),e(t.userInfo)},fail:function(e){console.log("getWXUserInfo error:",e),t(e)}})})).catch((function(e){return{fail:e}}));case 7:n=e.sent;case 8:n.fail?z({authorized:!1,nickName:"",gender:0}):z(p()({},n,{authorized:!0}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),R=(a=v()(g.a.mark((function e(t){var n,r,o=t.needGetToken,a=t.success,i=void 0===a?null:a,u=t.fail,s=void 0===u?null:u,c=t.authorizeLogin,d=void 0!==c&&c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("start login"),null!=i&&B.push(i),null!=s&&D.push(s),n=Math.floor((new Date).getTime()/1e3),!O){e.next=7;break}return console.log("login error: isLoginning"),e.abrupt("return");case 7:if(!(M>10&&n-j<10)){e.next=11;break}return console.log("login error: 登录频率限制"),F({errMsg:"登录频率限制"}),e.abrupt("return");case 11:return O=!0,e.next=14,H();case 14:return r=e.sent,e.next=17,T(r,o,d);case 17:O=!1,console.log("end login");case 19:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),q=!1,x=!1,U="https://i.weread.qq.com",V="https://weread.qq.com",P=null;console.log("node_env:","productiondomain:",U);var B=[],D=[],L=Q(),_=!1;!function(){wx.getFileSystemManager?wx.getFileSystemManager().readFile({filePath:"static/version.svg",encoding:"utf8",success:function(e){console.log("read versionfile success:",e&&e.data),L.appversion=e&&e.data&&e.data.trim(),I.a.setRelease(L.appversion)},fail:function(e){console.log("read versionfile failed :",e),L.appversion="unkown"}}):L.appversion="sdkUnsupport";wx.getSystemInfo({success:function(e){var t=J(e);L=c()({},L,t),console.log("updateUserInfoVersion:",L)}})}();var O=!1,M=0,j=0,A=function(e){for(var t=void 0;(t=B.shift())&&t;)t(e);D=[]},F=function(e){for(var t=void 0;(t=D.shift())&&t;)t(e);B=[]},W={errCode:-2100,errMsg:"获取code失败"},N={errCode:-2101,errMsg:"获取微信用户信息失败"};function E(e,t){return t.Platform&&(e=e+"&platform="+t.Platform),new l.a((function(n,r){wx.request({url:e,method:"POST",data:t,success:function(e){console.log("login weread1 : %o: ",e);var t=e.data;t&&(!t.errcode||0===t.errcode)&&t.vid&&t.skey?n(t):r(e)},fail:function(e){console.log("Error getWrReadUserInfo: %o",e),r(e)}})}))}function z(e){L=c()(L,e),console.log("saveUserInfo: source:",e,"new:",L),k.default.setStorage({key:"userInfo",data:L})}function H(){console.log("getWxloginCode start");var e=new Date;return new l.a((function(t,n){wx.login({timeout:5e3,success:function(e){console.log("getWxloginCode res : ",e),e.code?t(e.code):t()},fail:function(e){console.log("getWxloginCode error :",u()(e)),C.default.monitor({action:"getWxLoginCode_error",code:500}),t()},complete:function(){console.log("getWxloginCode complete"),console.log("get code use time:",new Date-e),t()}})}))}function Q(){var e=k.default.getStorageSync("userInfo")||{};return e.Version||(e=J(wx.getSystemInfoSync())),e.theme=e.theme?e.theme:"light",e.hasShownVideoFeedDot=e.hasShownVideoFeedDot||!1,e}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};console.log("platform:",e&&e.platform);var n=e&&e.platform&&-1!==e.platform.indexOf("android"),r=e&&e.platform&&-1!==e.platform.indexOf("ios"),o=e&&e.environment&&"wxwork"===e.environment||!1;return t.isWxWork=o,t.isAndroid=n,t.Version=e.version,t.OS=e.system,t.isLowPerformanceDevice=Object(G.a)(e),t.model=e.model,t.windowWidth=e.windowWidth,t.windowHeight=e.windowHeight,t.Platform=n?"android_wp":r?"ios_wp":"wp",t.isIpadSize=!1,t.statusBarHeight=e.statusBarHeight,t.navigationTitleBarHeight=48,n||(t.navigationTitleBarHeight=44),t.navigationBarHeight=t.statusBarHeight+t.navigationTitleBarHeight,t.SDKVersion=e.SDKVersion,t.unsupportedSDK=-1===y.default.compareVersion(e.SDKVersion,"1.7.3"),e.screenHeight>=1024&&e.screenWidth>=768&&(t.isIpadSize=!0),t}t.default={isLogin:function(){var e=this.getUser();return!e.skey||e.skeyValidTime&&new Date-e.skeyValidTime>0?(console.log("skey 过期：",e.key,e.skeyValidTime),e.skey="",!1):!O&&e.vid&&e.skey},login:R,getUser:function(){if(L||(L=Q()),L.vid&&L.skey)return L;var e=k.default.getStorageSync("userInfo")||{};return L=c()(L,e)},saveUserInfo:z,getConfigs:function(){return L.userConfig&&L.userConfig.configs?L.userConfig.configs:{}},getDomain:function(){return U},getNodeDomain:function(){return V},setDomain:function(e){U=e},setNodeDomain:function(e){V=e},getCloudFunctionTestEnv:function(){return q},setCloudFunctionTestEnv:function(e){q=e},getCloudFunctionTest:function(){return x},setCloudFunctionTest:function(e){x=e},isAndroid:L.isAndroid,clearUserInfo:function(){L=null},handleUserInfoAuthorization:function(e,t,n){wx.showLoading({title:"登录中…",mask:!0});var r=e.target.userInfo;console.log("handleUserInfoAuthorization userInfo:",r),z(p()({},r,{name:r.nickName})),R({needGetToken:!0,success:function(e){wx.hideLoading(),wx.showToast({title:"登录成功",icon:"none"}),t&&t(e)},fail:function(e){wx.hideLoading(),n&&n(e)},authorizeLogin:!0})},getCampaignDebugVol:function(){return P},setCampaignDebugVol:function(e){P=e},getIsWhiteUser:function(){return _},setIsWhiteUser:function(e){_=!!e}}},55:function(e,t,n){var r=n(16),o=n(64),a=Object(o.default)(wx.getStorage),i=Object(o.default)(wx.setStorage);t.a={mcGameUser:function(e){var t=e.vid,n=e.info;return Object(r.default)({name:"mcGameUserS2",data:{vid:t,info:n}})},mcGameMyLevel:function(){return Object(r.default)({name:"mcGameMyLevelS2"})},mcGameQuestion:function(e){var t=e.vid,n=e.pass,o=void 0===n?1:n,a=e.reset,i=void 0===a?0:a;return Object(r.default)({name:"mcGameQuestionS2",data:{vid:t,pass:o,reset:i}})},mcGameReportIssue:function(e){var t={vid:e.vid,questionID:e.questionID,reportType:"wrongQuestion"};return this.mcGameReport(t)},mcGameHint:function(e){var t={vid:e.vid,questId:e.questId,reportType:"hint"};return this.mcGameReport(t)},checkIsWhiteUser:function(e){var t=e.vid;return Object(r.default)({name:"whitelisted_user",data:{vid:t}})},mcGameWrong:function(e){var t={vid:e.vid,questId:e.questId,right:e.right,reportType:"answerResult"};return this.mcGameReport(t)},mcGameReport:function(e){return Object(r.default)({name:"mcGameReportS2",data:e})},mcGameFailureCount:function(){return a({key:"mcGameFailureCount"}).then((function(e){return e.data})).catch((function(){return 0}))},mcGameIncreaseFailureCount:function(){return this.mcGameFailureCount().then((function(e){return i({key:"mcGameFailureCount",data:parseInt(e)+1})}))},mcGameResetFailureCount:function(){return i({key:"mcGameFailureCount",data:0})},mcGameTotalRank:function(e){var t=e.vid;return Object(r.default)({name:"mcGameTotalRankS2",data:{vid:t}})},mcGameGroupRanks:function(e){var t=e.vid,n=e.encryptedData,o=e.iv,a=e.wxCode,i=e.reportOnly;return Object(r.default)({name:"mcGameGroupRankS2",data:{vid:t,encryptedData:n,iv:o,wxCode:a,reportOnly:i}})},mcGameMissTokenQuestions:function(){return this.mcGameSettings({type:"misQuestions"})},handleMissTokenQuestion:function(e){var t={type:"handleQuestion",handleType:e.type,quesId:e.quesId};return this.mcGameSettings(t)},mcGameSettings:function(e){return Object(r.default)({name:"mcGameSettings",data:e})}}},72:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(16)),i=o(n(3)),u=o(n(11));t.default={initBattleGameUserInfo:function(e,t){var n={name:e,avatar:t};return a.default({data:n,name:"battleGameUser"})},queryBattle:function(){return this.battleGameStart({requestType:"queryBattle"})},sponsorFriend1V1Battle:function(e,t,n){return this._sponsorBattle(e,t,1,n)},reSponsorFriend1V1Battle:function(e,t){return this._reSponsorBattle(e,t,1)},transformBattleToRaceGameDouble:function(e,t){var n={requestType:"transformBattleToRaceGameDouble",battleId:e,raceGameType:t};return this.battleGameStart(n)},sponsorAutoMatch1V1Battle:function(e,t){var n=i.default.getUser(),r={name:n.name,avatar:n.avatar,userLevel:e,battleLevel:t,type:2,requestType:"sponsorBattle"};return this._battleGameAutoMatch(r)},dismissInvite1V1Battle:function(e,t){return this.battleGameStart({requestType:"dismissBattle",battleId:e,activityId:t})},reSponsorAutoMatch1V1Battle:function(e,t){return this._reSponsorBattle(e,t,2)},cancelAutoMatch1V1Battle:function(e){var t={requestType:"cancelAutoMatch",battleId:e};return this._battleGameAutoMatch(t)},addBattleRobot:function(e,t,n){var r={requestType:"askRobotJoin",battleId:e,userLevel:t,battleLevel:n};return this.battleGameStart(r)},_sponsorBattle:function(e,t,n,o){var a=i.default.getUser(),u=r({requestType:"sponsorBattle",name:a.name,avatar:a.avatar,battleId:e,activityId:t,type:n},o);return this.battleGameStart(u)},_reSponsorBattle:function(e,t,n){var r={requestType:"reSponsorBattle",battleId:e,type:n,userLevel:t};return this.battleGameStart(r)},quitInviteBattle:function(e,t){var n={requestType:"quitInviteBattle",battleId:e,activityId:t};return this.battleGameStart(n)},joinFriendBattleGame:function(e,t){var n=i.default.getUser(),r={battleId:e,requestType:"joinInviteBattle",name:n.name,avatar:n.avatar,userLevel:t};return this.battleGameStart(r)},startInviteBattle:function(e,t,n){var r={battleId:e,sponsorBattleLevel:t,challengerBattleLevel:n,requestType:"startInviteBattle"};return this.battleGameStart(r)},reportBattleResult:function(e,t,n,r,o,a){return this.battleGamePlay({battleId:e,battleVol:t,roundStartTime:n,right:r,questionIndex:o,type:a,requestType:"reportBattleResult"})},reportBattleStart:function(e){return this.battleGameStart({battleId:e,reportType:"reportBattleStart"})},reportBattleFinish:function(e,t,n){return this.battleGamePlay({battleId:e,battleVol:t,questionIndex:n,requestType:"reportRoundFinish"})},reportBattleQuit:function(e){return this.battleGameStart({battleId:e,requestType:"reportBattleQuit"})},reportBattleOnline:function(e){return this.battleGameStart({battleId:e,requestType:"reportBattleOnline"})},battleGameStart:function(e){return a.default({data:r({},e),name:"battleGameStart"})},battleGamePlay:function(e){return a.default({data:r({},e),name:"battleGamePlay"})},battleGameRank:function(e){return a.default({data:{requestType:"levelRank",type:e},name:"battleGameRank"})},_battleGameAutoMatch:function(e){return a.default({data:r({},e),name:"battleGameAutoMatch"})},reportLog:function(e){var t=e.itemname,n=i.default.getUser(),r=n.vid,o=n.Platform,a="";try{a=JSON.stringify(e)}catch(e){console.log(e)}u.default.post("https://oss.weread.qq.com/hera/miniprogramanalysislog",{extra:a,itemname:t,pf:"ios_wp"===o?1:2,vid:r})},battleGameSettingsInit:function(){return this._battleGameSettings({requestType:"init"})},battleGameSetUserVolInfo:function(e){var t=r({requestType:"setUserVolInfo"},e);return this._battleGameSettings(t)},resetUserInfo:function(e){var t={requestType:"resetUserInfo",resetType:e};return this._battleGameSettings(t)},_battleGameSettings:function(e){return a.default({data:r({},e),name:"battleGameSettings"})},_battleGameMarket:function(e){return a.default({data:r({},e),name:"battleGameMarket"})},checkIsWhiteUser:function(e){return a.default({data:{vid:e},name:"whitelisted_user"})},fetchMarketDetail:function(){return this._battleGameMarket({requestType:"getProduct"})},scorePurchase:function(e){return this._battleGameMarket(r({requestType:"purchase"},e))},getUserScore:function(){return this._battleGameMarket({requestType:"getUserScoreAll"})},getMarketLottery:function(e){return this._battleGameMarket({requestType:"getLotteryInfo",lotteryId:e}).then((function(e){return e.lotteryInfo}))},drawMarketLottery:function(e){return this._battleGameMarket({requestType:"lotteryDraw",lotteryId:e})},reportAdWatched:function(e){return a.default({data:r({requestType:"adsScore"},e),name:"battleGameScore"})},reportRankProtect:function(e){return a.default({data:{requestType:"rankProtect",rankScore:e},name:"battleGameScore"})},reportAdDoubleScore:function(e){return a.default({data:{requestType:"addUserScore",score:e},name:"battleGameScore"})},refreshMarkerBooks:function(){return this._battleGameMarket({requestType:"update"})},resetLotteryRecord:function(){return this._battleGameSettings({requestType:"resetLotteryRecord"})},refreshInventory:function(){return this._battleGameMarket({requestType:"updateInventory"})},refreshProp:function(){return this._battleGameMarket({requestType:"resetProduct",type:"PROP"})},getUserProfile:function(e){return a.default({data:{vid:e},name:"battleGameProfile"})},reportWrongAnswer:function(e,t){return a.default({data:{vid:i.default.getUser().vid,questionID:e,userSelection:t,action:"report"},name:"raceGameWrongAnswer"})},raceGameStatus:function(){return a.default({data:{reportType:"raceGameVictory"},name:"raceGameReport"})},battleGameGrey:function(){return a.default({data:{type:"battleGameGrey"},name:"battleGamePressure"})},battleGameMonitor:function(e){u.default.get("https://oss.weread.qq.com/hera/monitor/wp/"+e+"/500")},_battleGameMessage:function(e){return a.default({data:r({},e),name:"battleGameMessage"})},fetchBattleGameMessages:function(){return this._battleGameMessage({requestType:"getMessages"})},sendBattleGameMessage:function(e){return this._battleGameMessage({requestType:"sendMessage",battleId:e.battleId,message:e.battleGameMessage.content})},clearBattleGameMessage:function(e){return this._battleGameMessage({requestType:"clearMessage",battleId:e.battleId})},getAllScoreMarketProduct:function(){return this._battleGameMarket({requestType:"getAllProduct"})},checkActivity:function(){return this._battleGameMarket({requestType:"getMarketActivityStatus"}).then((function(e){return!!e.status})).catch((function(){return!1}))},setActivityStatus:function(e){return this._battleGameMarket({requestType:"setMarketActivityStatus",status:e})}}},78:function(e,t,n){n.r(t);var r=n(4),o=n.n(r),a=n(10),i=n.n(a),u=n(8),s=n.n(u);t.default={checkAuthorize:function(){return new s.a((function(e,t){wx.getSetting({success:function(n){console.log("getSetting success:",n),n.authSetting["scope.userInfo"]?e({succ:1}):wx.authorize({scope:"scope.userInfo",success:function(){e({succ:1})},fail:function(e){console.error("wx.authorize fail：",e),t(e)}})},fail:function(t){console.log("getSetting error:",t),e({errCode:-2011,errMsg:"需要用户授权，获取设置失败"})}})})).catch((function(e){return e}))},checkAuthorizeSync:function(){var e=this;return i()(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("start checkAuthorizeSync"),t.next=3,e.checkAuthorize();case 3:return n=t.sent,console.log("checkAuthorizeSync res:",n.succ),t.abrupt("return",1===n.succ);case 6:case"end":return t.stop()}}),t,e)})))()}}},93:function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(16)),i=o(n(3)),u=o(n(11));t.default={raceGameInitUser:function(e){return a.default({data:r({},e,{whiteUser:i.default.getIsWhiteUser()}),name:"raceGameUser"})},raceGameGetQuestion:function(e){return a.default({data:r({},e,{whiteUser:i.default.getIsWhiteUser()}),name:"raceGameQuestionV2"})},raceGameReport:function(e){return a.default({data:r({},e,{whiteUser:i.default.getIsWhiteUser()}),name:"raceGameReportV2"})},raceGameRevert:function(e){return a.default({data:r({},e),name:"raceGameRevert"})},raceGameProps:function(e){return a.default({data:r({},e),name:"raceGamePlayProps"})},raceGamePropsPurchase:function(e){return this.raceGameProps({propsType:e,requestType:"purchase"})},raceGamePropsPurchaseWithAd:function(e){return this.raceGameProps({propsType:e,requestType:"adPurchase"})},raceGamePropsConsume:function(e){return this.raceGameProps({propsType:e,requestType:"consume"})},raceGamePropsInit:function(){return this.raceGameProps({requestType:"loadGameProps"})},raceGamePropsShare:function(e){return a.default({data:r({},e),name:"raceGameSendProps"})},raceGameClearRedDot:function(){return this.raceGameProps({requestType:"clearNewPropRedDot"})},raceGameReportSuccess:function(e,t){var n={reportType:"gameResult",success:1,level:e,retry:t,correctCount:12,withBattleGame:1};return this.raceGameReport(n)},raceGameReportFail:function(e,t,n,r){var o={reportType:"gameResult",success:0,level:e,questionID:t,userSelection:n,correctCount:r};return this.raceGameReport(o)},raceGameProgress:function(e){var t={reportType:"raceProgress",gameType:e};return this.raceGameReport(t)},raceGameReportAdWatched:function(){return this.raceGameReport({reportType:"adWatched"})},raceGameUserType:function(){return u.default.get("act/activeinfinite").then((function(e){return"brown"===(e&&e.userType)})).catch((function(){return!1}))},raceGameRevertUpdate:function(){return this.raceGameRevert({type:"checkRevert"})},raceGameShare:function(e,t){var n={reportType:"gameShare",shareVid:e,name:t};return this.raceGameReport(n)},raceGameSuccCnt:function(){return this.raceGameReport({reportType:"successCount"})},raceGameCoinByAndConsume:function(){return this.raceGameCoin({type:"purchaseConsume"})},raceGameCoinConsume:function(){return this.raceGameCoin({type:"consume"})},raceGameCoin:function(e){return a.default({data:r({},e,{whiteUser:i.default.getIsWhiteUser()}),name:"raceGameCoinV2"})},raceGameDescreseOffsiteAssitanceCount:function(){return this.raceGameReport({reportType:"shareContinue"})},raceGameLoginResurrectionClick:function(){return this.raceGameReport({reportType:"reNewAction",actionType:"click"})},raceGameLoginResurrectionUse:function(){return this.raceGameReport({reportType:"reNewAction",actionType:"use"})},checkIsWhiteUser:function(e){return a.default({data:{vid:e},name:"whitelisted_user"})},raceGameInitFriendHelp:function(e){return this.raceGameRevert({type:"revertQuestion",shareVid:e,isSupportReverted:!0})},raceGameReportFriendHelp:function(e,t){return this.raceGameRevert({type:"reportRevert",qId:t,qIndex:e})},raceGameHelpResult:function(e,t,n,r,o){return this.raceGameRevert({type:"revertResult",qId:t,shareVid:n,name:r,avatar:o,success:e})},raceGameHelpUse:function(){return this.raceGameRevert({type:"useRevert"})},raceGameGetQuestionWithQId:function(e){return this.raceGameRevert({type:"question",qId:e})},raceGameRank:function(e){return a.default({data:{type:e},name:"raceGameRanking"})},analysisLog:function(e,t){var n="",r=i.default.getUser();if(t)try{n=JSON.stringify(t)}catch(e){console.log("[analysisLog] parse json error.")}u.default.post("https://oss.weread.qq.com/hera/miniprogramanalysislog",{extra:n,itemname:e,pf:"ios_wp"===r.Platform?1:2,vid:r.vid})},raceGameSetting:function(e){return a.default({data:e,name:"raceGameSettings"})},raceGameAddRemainTime:function(e){var t={type:"addRemainTime",remainTime:e.remainTime};return this.raceGameSetting(t)},raceGameAddInviteCoinTime:function(e){var t={type:"addInviteCoinTime",invite:e.inviteTime,coin:e.coinTime,shareContinue:e.shareContinue};return this.raceGameSetting(t)},raceGameDeleteAccount:function(){return this.raceGameSetting({type:"deleteAccount"})},raceGameDeleteAllAccount:function(){return this.raceGameSetting({type:"deleteAllAccount"})},raceGameClearGameProps:function(){return this.raceGameSetting({type:"clearGameProps"})},raceGameResetLevel:function(e){var t={type:"resetLevel",level:e};return this.raceGameSetting(t)},raceGameVolDetail:function(e){var t={type:"getVolDetail",vol:e};return this.raceGameSetting(t)},raceGameResetGameResult:function(e){var t={type:"resetGameResult",success:e};return this.raceGameSetting(t)},raceGameAddGameProps:function(e){var t={type:"addGameProp",propType:e};return this.raceGameSetting(t)},raceGameReportWrongQuestion:function(e,t){return a.default({data:{questionID:t,reportType:"wrongQuestion",vid:e},name:"mcGameReport"})},raceGameReportQuestionAnsResult:function(e,t){return a.default({data:{questId:e,reportType:"quesAnswerResult",right:t},name:"mcGameReport"})},raceGameCanSettingVol:function(){return this.raceGameSetting({type:"getCanSettingVol"})},raceGameSettingVolInfinite:function(e,t,n){var r={type:"setVolData",infiniteDays:e,successCnt:t,settingVol:n};return this.raceGameSetting(r)},raceGameSettingVolTime:function(e,t){var n={type:"setVolTime",startTime:e,endTime:t};return this.raceGameSetting(n)},raceGameUpdateVolInfinite:function(e){var t={type:"updateVolInfinite",updateVol:e};return this.raceGameSetting(t)},raceGameUpdateVolUserLevel:function(e){var t={type:"updateUserLevelInfo",updateVol:e};return this.raceGameSetting(t)},raceGameGetWrongAnswerList:function(e,t){return a.default({data:{action:"get",vid:i.default.getUser().vid,startIndex:e,limit:t},name:"raceGameWrongAnswer"})},raceGameDeleteWrongAnswer:function(e){return a.default({data:{action:"delete",vid:i.default.getUser().vid,questionID:e},name:"raceGameWrongAnswer"})},raceGameUpdateGameType:function(e){return this.raceGameReport({reportType:"updateGameType",gameType:e})}}}}]);