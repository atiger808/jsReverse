var e=require("../../@babel/runtime/helpers/interopRequireDefault")(require("../../@babel/runtime/helpers/typeof"));require("../../common/manifest.js"),require("../../common/vendor.js"),require("../../common/protos.js"),require("../../common/components.js"),require("../../common/apis.js"),require("../../common/others.js"),(global.webpackJsonpMpvue=global.webpackJsonpMpvue||[]).push([["pages/index/main"],{229:function(e,t,o){o.r(t),o.d(t,"logger",(function(){return n}));var i=function(){return"[index "+new Date+"] "},n={log:function(){for(var e,t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];(e=console).log.apply(e,[i()].concat(o))},warn:function(){for(var e,t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];(e=console).warn.apply(e,[i()].concat(o))},error:function(){for(var e,t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];(e=console).error.apply(e,[i()].concat(o))}}},284:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default={scheme:function(e){return"weread://browse?userinfo=1&style=1&url="+encodeURIComponent("https://weread.qq.com/free-library?isAnimateNavBarBackground=1&type="+e)}}},334:function(t,o,i){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=this&&this.__decorate||function(t,o,i,n){var r,a=arguments.length,s=a<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,i):n;if("object"==("undefined"==typeof Reflect?"undefined":(0,e.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,i,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(o,i,s):r(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(o,"__esModule",{value:!0});var u=i(13),d=i(9),p=c(i(31)),h=c(i(24)),f=c(i(14)),_=c(i(22)),m=c(i(18)),v=c(i(54)),g=c(i(52)),b=c(i(29)),y=c(i(233)),C=c(i(231)),k=c(i(634)),w=c(i(79)),I=c(i(545)),L=c(i(556)),O=c(i(620)),T=c(i(621)),x=c(i(622)),S=c(i(623)),A=l(i(0)),D=c(i(12)),R=c(i(50)),P=c(i(15)),B=i(229),E=c(i(2)),G=c(i(16)),F=c(i(3)),$=l(i(99)),V=c(i(89)),M=i(46),U=c(i(63)),N=c(i(635)),j=c(i(128)),W=[[{categoryId:9e5,name:"文学艺术"},{categoryId:11e5,name:"哲学社科"}]],K=null,q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.authorized=!0,t.dataError=!1,t.isWhitelisted=!1,t.campaign="",t.shouldShowBottomPromt=!1,t.csPromptIntent="阅读百万好书",t.csPromptSource="bookstoreBottom",t.activeTab=0,t.tabBarFixed=!1,t.currentTabHeight=0,t.listHeights=[],t.autoSwiper=!0,t.shouldShowAd=!1,t.pageTabBar=["福 利","书 城","听 书"],t.currentPageTab=1,t.pageTabClickRecord={},t.scorpid="",t.industry="",t.shouldAuthXiaoWei=!0,t.navbarTitle="微信读书",t.navbarBackgroundColor="#FFF",t.dispatchedPageTabSwitch=1,t.pageScrollRecordForTab={},t}return r(t,e),Object.defineProperty(t.prototype,"searchBarTop",{get:function(){return this.navigationBarHeight-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabBarTop",{get:function(){return this.searchBarTop+50},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"username",{get:function(){var e=this.user;return e&&e.name&&0!==e.name.length?e.name:"游客"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user",{get:function(){return this.$store.state.profile.user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"navigationBarHeight",{get:function(){return this.$store.getters.navigationBarHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookStoreCurrentCategoryDetails",{get:function(){var e=this.activeCategory;return this.$store.getters.bookStoreCategoryDetails(e,this.activeTab)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newInfiniteDay",{get:function(){return this.$store.state.profile.newInfiniteDay},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookStoreRecommendations",{get:function(){return this.$store.getters.bookStoreRecommendations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookStoreCategoryList",{get:function(){return this.$store.getters.bookStoreCategoryList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookStoreRankingList",{get:function(){return this.$store.getters.bookStoreRankingList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookStoreCategoryDetails",{get:function(){var e=this;return function(t){return e.$store.getters.bookStoreCategoryDetails(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookStoreWxProfile",{get:function(){return this.$store.getters.bookStoreWxProfile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookStoreCategories",{get:function(){return this.$store.getters.bookStoreCategories},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWxWork",{get:function(){var e=F.default.getUser();return e&&e.isWxWork&&this.industry&&this.scorpid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wxWorkBanner",{get:function(){return this.$store.getters.governmentAffairsReadingBanner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeRecommend",{get:function(){return this.$store.getters.closeRecommend},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabBar",{get:function(){var e=[{categoryId:0,name:this.closeRecommend?"精选":"推荐"},{categoryId:1,name:"分类"},{categoryId:2,name:"排行"}];console.log(this.bookStoreCategories);var t=this.bookStoreCategories.map((function(e){return{categoryId:e.categoryid,name:e.title}}));return t.length?e.concat(t).map((function(e){return e.name&&(e.name=e.name.replace("榜","")),e})):e.concat(W[0])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasMore",{get:function(){switch(this.activeTab){case 0:return this.bookStoreRecommendations.length<100;case 1:case 2:return!1;default:return!this.bookStoreCurrentCategoryDetails.books||!!(this.bookStoreCurrentCategoryDetails.hasMore&&this.bookStoreCurrentCategoryDetails.books.length<100)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeCategory",{get:function(){return this.tabBar[this.activeTab].categoryId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listHeight",{get:function(){return this.currentTabHeight<600?"100vh":this.currentTabHeight+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLowPerformanceDevice",{get:function(){return this.$store.getters.isLowPerformanceDevice},enumerable:!0,configurable:!0}),t.prototype.handleWxWorkBannerImageClick=function(){if(this.isWxWork){this.$store.dispatch(A.REPORT_GOVERNMENT_AFFAIRS_READING_OSS_LOG,{action:"click",source:this.industry,scorpid:this.scorpid,value:1});var e="/pages/governmentAffairsReadingBookList/main?industry="+this.industry+"|"+this.scorpid;wx.navigateTo({url:e})}},t.prototype.handlePageTabClick=function(e){e!==this.currentPageTab?this.switchPageTab(e):wx.pageScrollTo({duration:200,scrollTop:0})},t.prototype.switchPageTab=function(e){this.currentPageTab=e,0===e?(this.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_BookStore_Ent_Event"}),this.$store.commit(A.INFINTE_COLLECTION_CLICKED),this.$refs.giftCollectionList&&this.$refs.giftCollectionList.initData()):1===e?this.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_BookStore_Ent"}):2===e&&(this.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_BookStore_Ent_LectureList"}),this.$refs.indexLectureList&&this.$refs.indexLectureList.initData())},t.prototype.openAndReport=function(e,t){t&&this.$store.dispatch(A.KV_LOG_REPORT,{itemname:t}),wx.navigateTo({url:e})},t.prototype.openSearch=function(){this.openAndReport("/pages/search/main","Wp_Search_Clk")},t.prototype.openFeedback=function(){this.openAndReport("/pages/chat/main","Wp_Feedback_Clk")},t.prototype.openSetting=function(){this.openAndReport("/pages/setting/main","Wp_Setting_Clk")},t.prototype.openCategoryList=function(){this.openAndReport("/pages/categories/main")},t.prototype.openBookShelf=function(){this.openAndReport("/pages/bookshelf/main","Wp_Store_Bookshelf_Clk"),this.$store.commit(A.NEW_INFINITE_DAY,{hasNewDay:!1})},t.prototype.handleBookShelfLongPress=function(){this.checkIsWhiteUser().then((function(){wx.showToast({title:"开启彩蛋",icon:"none"})}))},t.prototype.openCategory=function(e){this.openAndReport("/pages/category/main?categoryId="+e,"Wp_Classification_Clk_"+e)},t.prototype.openBook=function(e,t,o,i){t?this.openAndReport("/pages/lecture/player/main?bookId="+e+"&type="+(o?"LECTURE":"TTS"),i):this.openAndReport("/pages/reader/main?bookId="+e,i)},t.prototype.openFeaturedBooks=function(e){this.openAndReport("/pages/featuredBooks/main?type="+e)},t.prototype.openTop100=function(e){this.openAndReport("/pages/top100/main?categoryId="+e,"Wp_Store_Top100_"+e)},t.prototype.handleTabBarClick=function(e,t){var o=this;if(this.activeTab!==e){if(this.activeTab=e,!this.checkTabDataExist(e)){var i=new Promise((function(e){return e(null)}));switch(e){case 0:i=this.$store.dispatch(A.LOAD_BOOKSTORE_RECOMMENDATION_BOOKS,{isInit:!0});break;case 1:i=this.$store.dispatch(A.INIT_BOOKSTORE_CATEGORIES);break;case 2:i=this.$store.dispatch(A.INIT_BOOKSTORE_RANKING);break;default:i=this.$store.dispatch(A.INIT_BOOKSTORE_RECOMMENDATION_CATEGORY,{categoryId:this.activeCategory})}i.then((function(){}))}this.scrollToTop();var n="";this.currentTabHeight=this.listHeights[e];var r=!this.autoSwiper;this.tabBar.forEach((function(e,t){e.categoryId===o.activeCategory&&(n="Wp_BookStore_Tab_"+(t+1)+"_Clk")})),r&&(this.$store.dispatch(A.KV_LOG_REPORT,{itemname:n}),t?this.$store.dispatch(A.KV_LOG_REPORT,{itemname:n+"_Swipe"}):this.$store.dispatch(A.KV_LOG_REPORT,{itemname:n+"_Click"}))}else t||(this.scrollToTop(),0===e&&this.$store.dispatch(A.LOAD_BOOKSTORE_RECOMMENDATION_BOOKS,{isInit:!0}).then((function(){B.logger.log("推荐数据加载成功")})))},t.prototype.scrollToTop=function(){var e=this;this.isLowPerformanceDevice||wx.createSelectorQuery().select(".index_tab").boundingClientRect().selectViewport().scrollOffset().exec((function(t){var o=t[0],i=t[1];if(o&&i){var n=o.top+i.scrollTop-e.tabBarTop+2;o.top<0&&wx.pageScrollTo({duration:0,scrollTop:n})}}))},t.prototype.checkTabDataExist=function(e){var t=this.tabBar[e].categoryId;switch(t){case 0:return!!this.$store.getters.bookStoreRecommendations.length;case 1:return!!this.$store.getters.bookStoreCategoryList.length;case 2:return!!this.$store.getters.bookStoreRankingList.length;default:var o=this.$store.getters.bookStoreCategoryDetails(t);return o&&o.books&&o.books.length}},t.prototype.handleBannerImageClick=function(e,t){this.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_Banner_Clk"}),t?wx.navigateToMiniProgram?wx.navigateToMiniProgram({appId:t,path:e,envVersion:"develop",fail:function(e){console.log("navigateToMiniProgram failed",e)}}):console.log("not support wx.navigateToMiniProgram"):wx.navigateTo({url:e})},t.prototype.handleBottomDownloadTipClick=function(){D.default.reportCustomerPfClk("bookstoreBottom"),this.csPromptIntent="阅读百万好书",this.csPromptSource="bookstoreBottom",this.$refs.customerServicePrompt&&this.$refs.customerServicePrompt.show()},t.prototype.handleCampaignViewNotification=function(e){console.log("[CampaignView] notification",e),e&&"showCustomerServicePrompt"===e.action&&(void 0!==e.intent&&(this.csPromptIntent=e.intent),void 0!==e.source&&(this.csPromptSource=e.source),this.$refs.customerServicePrompt.action())},t.prototype.handleSwiperAnimationFinish=function(e){var t=e.mp.detail;this.cacheListHeight(),this.handleTabBarClick(t.current,!0)},t.prototype.cacheListHeight=function(){this.listHeights[this.activeTab]=this.currentTabHeight||0},t.prototype.resetListHeight=function(){var e=this,t=".index_main_swiper_item_category_"+this.activeTab,o=this.activeTab;wx.createSelectorQuery().select(t).boundingClientRect((function(t){t&&t.height&&e.activeTab===o&&(e.currentTabHeight=t.height)})).exec()},t.prototype.tryRouteDispatch=function(){var e=this.$root.$mp.appOptions.query,t="",o=this.$root.$mp.query.campaign||null,i=this.$root.$mp.query.pageTab||null;if(o)return this.switchPageTab(1),wx.pageScrollTo({duration:0,scrollTop:0}),this.campaign===o?this.$refs.campaignView&&this.$refs.campaignView.refresh():(this.campaign=o,console.log("本次展示的活动卡片",this.campaign)),!1;if(e.scene){var n=decodeURIComponent(e.scene);"top100"===n.substring(0,6)&&(e.redirect="top100",e.categoryId=n.substring(7))}if(!o&&parseInt(i)>=0&&parseInt(i)<=2&&(this.$refs.giftCollectionList&&this.$refs.indexLectureList?this.switchPageTab(parseInt(i)):this.dispatchedPageTabSwitch=parseInt(i)),e.redirect&&e.redirect.length>0)return"videoFeedDetail"===e.redirect&&(this.$refs.indexLectureList?this.switchPageTab(2):this.dispatchedPageTabSwitch=2),t="/pages/"+e.redirect+"/main?",Object.keys(e).forEach((function(o){"redirect"!==o&&(t+=o+"="+e[o]+"&")})),console.log("routeDispatch url:",t),wx.navigateTo({url:t}),!0;var r=P.default.getStorageSync("shouldRecoverReader");return console.log("shouldRecoverBookId:",r),!(!r||!r.bookId||(wx.navigateTo({url:"/pages/reader/main?bookId="+r.bookId}),0))},t.prototype.loadMore=function(){if(this.hasMore)switch(this.activeTab){case 0:this.$store.dispatch(A.LOAD_BOOKSTORE_RECOMMENDATION_BOOKS,{isInit:!1}),this.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_BookStore_Recommend_LoadMore"});break;case 1:case 2:break;default:this.$store.dispatch(A.LOAD_BOOKSTORE_RECOMMENDATION_CATEGORY,{categoryId:this.activeCategory,maxIdx:10*Math.ceil(this.bookStoreCurrentCategoryDetails.books.length/10)}),this.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_BookStore_Category_LoadMore"})}},t.prototype.resolveGovernmentAffairsReadingQuery=function(){var e=this.$root.$mp.query.industry||"",t=decodeURIComponent(e);if(-1!==t.indexOf("|")){var o=t.split("|");if(2===o.length){var i=o[0],n=o[1];this.industry=i,this.scorpid=n,F.default.saveUserInfo({industry:i,scorpid:n})}}else this.industry="",this.scorpid=""},t.prototype.loadGovernmentAffairsReadingBanner=function(){var e=this;this.resolveGovernmentAffairsReadingQuery(),this.isWxWork&&this.$store.dispatch(A.LOAD_GOVERNMENT_AFFAIRS_READING_BANNER,{type:"banner",industry:this.industry}).then((function(){console.log("wxWorkBanner",e.wxWorkBanner),""!==e.wxWorkBanner&&e.$store.dispatch(A.REPORT_GOVERNMENT_AFFAIRS_READING_OSS_LOG,{action:"expo",source:e.industry,scorpid:e.scorpid,value:1}).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},t.prototype.loadData=function(e){var t=this;void 0===e&&(e=!0),this.dataError=!1;var o=+new Date;e&&wx.showLoading({title:"加载中…",mask:!0}),this.showInfiniteCardIfNeeded(),this.loadGovernmentAffairsReadingBanner(),this.$store.dispatch(A.INIT_RECENTREAD),this.$store.dispatch(A.BALANCE),this.$store.dispatch(A.INIT_BOOKSTORE_COMBINED).then((function(){wx.hideLoading(),t.$store.dispatch(A.QUERY_INFINITE,!0),t.$store.dispatch(A.INIT_MINE_USER_INFO),t.bookStoreRecommendations&&t.bookStoreRecommendations.length||(t.handleTabBarClick(1,!1),t.activeTab=1,t.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_BookStore_Recommendations_Empty"})),$.trySendGiftToShareFriend(t.$root.$mp.appOptions.query),t.showAuthorizationForXiaoweiIfNeeded(),R.default(t.$root.$mp.appOptions),t.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_BookStore_Ent_All"}),t.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_BookStore_Ent"}),t.$store.dispatch(A.SYNC_CONFIG),t.$store.dispatch(A.LAST_APP_LOGINTIME),wx.reportPerformance&&wx.reportPerformance(1001,+new Date-o)})).catch((function(e){if(V.default.instance.injectCommon({renderError:1}).send(!0),B.logger.error("store index loadData error:",e),-2011===e.errCode)return t.authorized=!1,void t.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_Authroize_Exp"});E.default.monitor({code:500,action:"index_render_error"}),t.dataError=!0,wx.hideLoading()})).finally((function(){wx.hideLoading()}))},t.prototype.showInfiniteCardIfNeeded=function(){$.shouldShowInfiniteCard({isIndexPage:!0,campaign:this.campaign})&&$.default().then((function(e){console.log("promptType:",e)})).catch((function(e){console.error("[InfiniteCard]",e.message)}))},t.prototype.handleHideXiaoweiModal=function(){this.navbarBackgroundColor="#FFF",this.navbarTitle="微信读书"},t.prototype.showAuthorizationForXiaoweiIfNeeded=function(){var e=this.$root.$mp.appOptions,t=this.$root.$mp.query,o=decodeURIComponent(t.openId),i=F.default.getUser().openid;if(e&&e.referrerInfo&&e.referrerInfo.appId&&o){var n=e.referrerInfo.appId;console.log("xiaoWeiOpenid",o),console.log("wxOpenid",i),this.shouldAuthXiaoWei=i===o,"wxdbf8ce643cc5ab0b"===n?(this.$refs.xiaoweiAuthorization.show("app"),this.navbarTitle="微信听书",this.navbarBackgroundColor="transparent"):"wx2f7ed488e07ed7ee"===n&&(this.$refs.xiaoweiAuthorization.show("mp"),this.navbarTitle="微信听书",this.navbarBackgroundColor="transparent")}},t.prototype.handleAdLoad=function(){E.default.reportKVLog({itemname:"Ad_Load"})},t.prototype.handleAdError=function(e){console.log("[Ad] error",e.mp.detail),E.default.reportKVLog({itemname:"Ad_Error",value:e.mp.detail.errCode}),this.shouldShowAd=!1},t.prototype.handleAdClose=function(){console.log("[Ad] close"),E.default.reportKVLog({itemname:"Ad_Close"}),this.shouldShowAd=!1},t.prototype.checkSDKVersionValid=function(){return!F.default.getUser().unsupportedSDK||(this.$store.dispatch(A.KV_LOG_REPORT,{itemname:"Wp_app_unsupported"}),wx.redirectTo({url:"/pages/incompatible/main"}),!1)},t.prototype.navigateToKitchen=function(){this.isWhitelisted&&wx.navigateTo({url:"/pages/kitchen/main"})},t.prototype.checkIsWhiteUser=function(){var e=this,t=F.default.getUser().vid;return t||(this.isWhitelisted=!1,F.default.setIsWhiteUser(!1)),G.default({data:{vid:t},name:"whitelisted_user"}).then((function(t){e.isWhitelisted=t.isWhitelisted,F.default.setIsWhiteUser(t.isWhitelisted),F.default.saveUserInfo({isWhitelisted:e.isWhitelisted})}))},t.prototype.defaultShareAppMessage=function(){return{imageUrl:"https://rescdn.qqmail.com/weread/cover/reader_share.f443a6025b.png",path:"/pages/index/main?from=mainShare",title:this.user.name+"邀请你来免费阅读好书"}},t.prototype.prepareForAd=function(){U.default(F.default.getUser().SDKVersion,"1.9.97")>=0&&(this.shouldShowAd=!0)},t.prototype.onCloseRecommendChange=function(){this.loadData()},t.prototype.onCurrentPageTabChange=function(e){0===e&&j.default.report({scheme:"activity",source:this.$root.$mp.appOptions.scene})},t.prototype.onShow=function(){var e=this;B.logger.log("page show"),this.$refs.navigationBar&&this.$refs.navigationBar.refreshControls(),K||(K=setInterval((function(){e.resetListHeight()}),1e3)),this.$store.dispatch(A.SYNC_USER_SETTING)},t.prototype.onHide=function(){B.logger.log("page hide"),V.default.instance.disconnect()},t.prototype.onShareAppMessage=function(e){var t=this.defaultShareAppMessage();return 1!==this.currentPageTab?t.path="/pages/index/main?from=mainShare&pageTab="+this.currentPageTab:this.campaign?t=this.$refs.campaignView.generateShareOpt()||t:e&&e.target&&e.target.id&&(t=$.infiniteShareMessage(e)),B.logger.log("share app message: ",t),t},t.prototype.onPageScroll=function(e){var t=this;this.autoSwiper&&(this.autoSwiper=!1),wx.createSelectorQuery().select(".index_tab").boundingClientRect((function(e){e&&e.top&&(e.top<t.tabBarTop?t.tabBarFixed=!0:t.tabBarFixed=!1)})).exec(),this.pageScrollRecordForTab[this.currentPageTab]=e.scrollTop},t.prototype.onLoad=function(e){var t=this;if(B.logger.log("onload options:",JSON.stringify(e)),this.checkSDKVersionValid()){var o=this.tryRouteDispatch();this.$root.$mp.query.campaign?this.autoSwiper=!0:this.autoSwiper=!1,o?setTimeout((function(){t.loadData(!1)}),2e3):(V.default.instance.init({common:{from:this.$root.$mp.query.from||""},extra:{campaign:this.$root.$mp.query.campaign||""},page:"index",selector:".index_performance_tracker"}),this.loadData()),M.loadFontFace({fonts:[M.CustomFontFace.SOURCE_HAN_SERIF_CN_BOLD,M.CustomFontFace.SOURCE_HAN_SERIF_CN_MEDIUM,M.CustomFontFace.DIN_MEDIUM]}),wx.onUserCaptureScreen&&wx.onUserCaptureScreen((function(){t.$store.state.stopShowFeedbackTip||wx.showModal({cancelText:"不再提示",confirmText:"去反馈",content:'你可以从书城首页的"反馈"入口再次找到我们',success:function(e){e.confirm?wx.navigateTo({url:"/pages/chat/main"}):e.cancel&&t.$store.commit(A.STOP_SHOW_FEEDBACK_TIP)},title:"向微信读书反馈问题？"})}));var i=F.default.getUser();E.default.analysisLog("mp_index_sdkVersion_Report",{SDKVersion:i.SDKVersion})}},t.prototype.mounted=function(){this.$refs.navigationBar&&this.$refs.navigationBar.refreshControls(),this.prepareForAd(),1!==this.dispatchedPageTabSwitch&&this.switchPageTab(this.dispatchedPageTabSwitch),this.$refs.privacyAgreement&&this.$refs.privacyAgreement.tryShowModal()},t.prototype.onReachBottom=function(){this.hasMore&&1===this.currentPageTab&&this.loadMore()},s([u.Watch("currentPageTab")],t.prototype,"onCurrentPageTabChange",null),s([u.Component({components:{Avatar:h.default,BookCover:f.default,CampaignView:I.default,CategoryList:L.default,CommonBookList:O.default,CustomerServicePrompt:_.default,EmptyView:m.default,GiftCollectionList:C.default,IndexLectureList:k.default,InfiniteCardPrompt:v.default,Loader:g.default,NavigationBar:b.default,PinTips:y.default,RankingList:T.default,RecommendedList:x.default,MiniLecturePlayer:w.default,XiaoweiAuthorization:S.default,PrivacyAgreement:N.default},computed:a({},d.mapGetters({banner:"bookStoreBanner",bookStoreCategories:"bookStoreCategories",bookStoreCategoryDetails:"bookStoreCategoryDetails",bookStoreCategoryList:"bookStoreCategoryList",bookStoreRankingList:"bookStoreRankingList",bookStoreRecommendations:"bookStoreRecommendations",bookStoreWxProfile:"bookStoreWxProfile",categories:"bookStoreCategories",infiniteRemainingDays:"infiniteRemainingDays",isLowPerformanceDevice:"isLowPerformanceDevice",recentRead:"bookStoreRecentRead",recommendation:"bookStoreRecommendations",searchTips:"searchTips",shouldBlockedUser:"shouldBlockedUser",shouldShowGiftCollectionDot:"shouldShowGiftCollectionDot",shouldShowVideoDot:"shouldShowVideoDot",infiniteLabelText:"infiniteLabelText",wxWorkBanner:"governmentAffairsReadingBanner"}))})],t)}(u.Mixins(p.default));o.default=q},336:function(t,o,i){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=this&&this.__decorate||function(t,o,i,n){var r,a=arguments.length,s=a<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,i):n;if("object"==("undefined"==typeof Reflect?"undefined":(0,e.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,i,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(o,i,s):r(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(o,"__esModule",{value:!0});var u=c(i(5)),d=i(13),p=i(9),h=l(i(0)),f=c(i(14)),_=c(i(52)),m=c(i(18)),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLoadError=!1,t}return r(t,e),Object.defineProperty(t.prototype,"indexLectureList",{get:function(){return this.$store.state.indexLectureList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indexLectureListGuessBooks",{get:function(){return this.$store.state.indexLectureListGuess.showing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeRecommend",{get:function(){return this.$store.getters.closeRecommend},enumerable:!0,configurable:!0}),t.prototype.initData=function(){var e=this;return console.log("[IndexLectureList] initData"),(!this.indexLectureList.length||this.indexLectureList.length<1)&&(this.onLoadError=!1,this.$store.dispatch(h.INIT_LECTURE_CATEGORIES).then((function(t){console.log("[IndexLectureList] initData res: ",t),e.onLoadError=!1})).catch((function(t){console.log("[IndexLectureList] initData err: ",t),e.onLoadError=!0})))},t.prototype.handleLectureClick=function(e,t){var o=!t||t.istts||t&&t.user&&0===t.user.userVid;wx.navigateTo({url:"/pages/lecture/player/main?bookId="+e+"&type="+(o?"TTS":"LECTURE")})},t.prototype.handleSectionShuffle=function(){console.log("[IndexLectureList] handleSectionShuffle"),this.$store.dispatch(h.LECTURE_CATEGORIES_RECOMMEND_SHUFFLE).then((function(e){console.log("[IndexLectureList] handleSectionShuffle res: ",e)})).catch((function(e){return console.log("[IndexLectureList] handleSectionShuffle err: ",e),e}))},t.prototype.handleSectionMore=function(e){console.log("查看更多: ",e),isNaN(+e)?wx.navigateTo({url:"/pages/top200/main?categoryId="+e+"&isLecture=1"}):wx.navigateTo({url:"/pages/category/main?categoryId="+e+"&isLecture=1"})},s([d.Component({components:{BookCover:f.default,EmptyView:m.default,Loader:_.default},computed:a({},p.mapGetters({indexLectureList:"indexLectureList"}))})],t)}(u.default);o.default=v},337:function(t,o,i){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=this&&this.__decorate||function(t,o,i,n){var r,a=arguments.length,s=a<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,i):n;if("object"==("undefined"==typeof Reflect?"undefined":(0,e.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,i,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(o,i,s):r(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(o,"__esModule",{value:!0});var u=c(i(5)),d=i(13),p=i(9),h=l(i(522)),f=c(i(12)),_=c(i(22)),m=c(i(668)),v=c(i(28)),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.userType=0,t.shouldShowDebut=!1,t.initParams=null,t.openFromAppScene=!1,t}return r(t,e),Object.defineProperty(t.prototype,"shouldBlockedUser",{get:function(){return this.$store.getters.shouldBlockedUser},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debutBookInfo",{get:function(){return h.store.state.debutBookInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readingCount",{get:function(){return h.store.state.readingCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debutStatus",{get:function(){return h.store.state.debutStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMySelf",{get:function(){return h.store.state.isMySelf},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vol",{get:function(){return h.store.state.vol},enumerable:!0,configurable:!0}),t.prototype.mounted=function(){console.log("[Debut] mounted"),this.loadData()},t.prototype.loadData=function(){var e=this.$root.$mp.appOptions;this.openFromAppScene=v.default.openFromAppShare(e),console.log("[Debut] loadData:",this.openFromAppScene);var t=this.$root.$mp.appOptions.query;t.bookId&&t.senderVid&&t.vol?(this.userType=parseInt(t.userType||0),this.initParams={from:"index",bookId:t.bookId,senderVid:t.senderVid,vol:t.vol},this.loadRemoteData(this.initParams)):console.error("without params in debut:",e)},t.prototype.loadRemoteData=function(e){var t=this;h.store.dispatch(h.DEBUT_INIT,e).then((function(){t.shouldShowDebut=!0,t.refreshChildComponent(),t.autoReceiveBook(),f.default.reportExp("debut","act")})).catch((function(e){t.shouldShowDebut=!1,console.error("[debut]",e)}))},t.prototype.refreshChildComponent=function(){this.$refs.debutLib&&this.$refs.debutLib.refresh&&this.$refs.debutLib.refresh()},t.prototype.handleLaunchApp=function(){var e={vol:this.vol,userType:this.userType};h.store.dispatch(h.DEBUT_SEND_CARD,e).then((function(){console.log("handleLaunchApp succeed")})).catch((function(){console.error("handleLaunchApp error")}))},t.prototype.handleReceiveBook=function(e){var t=this;if(void 0===e&&(e=!1),e||wx.showLoading({title:"领取中…",mask:!0}),!this.initParams)return wx.showToast({title:"领取失败",icon:"none"});var o={campaignId:"debut_"+this.initParams.vol,bookId:this.initParams.bookId,senderVid:this.initParams.senderVid};h.store.dispatch(h.DEBUT_RECEIVE,o).then((function(o){wx.hideLoading(),e||(o&&1===o.succ?(wx.showToast({title:"领取成功",icon:"none"}),t.initParams&&t.loadRemoteData(t.initParams)):wx.showToast({title:"领取失败，请重试",icon:"none"}))})).catch((function(t){console.log("handleReceiveBook error",t),wx.hideLoading(),e||wx.showToast({title:"领取失败，请重试",icon:"none"})}))},t.prototype.autoReceiveBook=function(){console.log("Debut 领取状态",this.debutStatus),this.initParams&&this.initParams.senderVid&&!this.isMySelf&&this.handleReceiveBook(!0)},s([d.Component({components:{CustomerServicePrompt:_.default,DebutBook:m.default},computed:a({},p.mapState({profile:function(e){return e.profile},user:function(e){return e.profile.user}}),p.mapGetters({canShow30DayCard:"canShow30DayCard"}))})],t)}(u.default);o.default=g},338:function(t,o,i){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(t,o,i,n){var r,a=arguments.length,s=a<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,i):n;if("object"==("undefined"==typeof Reflect?"undefined":(0,e.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,i,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(o,i,s):r(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(o,"__esModule",{value:!0});var l=s(i(5)),u=i(13),d=s(i(103)),p=s(i(14)),h=s(i(12)),f=s(i(523)),_=s(i(39)),m=c(i(0)),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.launchAppClickTime=0,t.forceCancelLaunchApp=!1,t}return r(t,e),Object.defineProperty(t.prototype,"readingCountText",{get:function(){if(this.readingCount&&this.readingCount>0){var e=d.default(this.readingCount);return e.number+e.unit}return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionButtonLabel",{get:function(){return this.isMySelf?1===this.status?"免费阅读":2===this.status?"去微信读书获得最新赠书":"立即阅读 · 好友查看后获赠书籍":"分享免费领"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldSelfResponseLaunchApp",{get:function(){return!this.isMySelf&&this.openFromAppScene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debutButtonType",{get:function(){return this.shouldSelfResponseLaunchApp?"launchApp":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scheme",{get:function(){return f.default.scheme()},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.launchAppClickTime=0,this.forceCancelLaunchApp=!1},t.prototype.openReader=function(e){wx.navigateTo({url:"/pages/reader/main?bookId="+e})},t.prototype.handleActionButtonClick=function(){this.isMySelf?(this.$store.dispatch(m.KV_LOG_REPORT,{itemname:"Wp_Debut_Action_MySelf_Clk"}),this.bookInfo&&this.openReader(this.bookInfo.bookId)):this.shouldSelfResponseLaunchApp&&(this.$store.dispatch(m.KV_LOG_REPORT,{itemname:"Wp_Debut_Action_Share_Clk"}),this.$emit("launchApp")),h.default.reportClk("debut","act")},t.prototype.launchAppFailed=function(){_.default("debut",this.$root.$mp.appOptions),this.$emit("showDownloadGuide")},t.prototype.handleBookClick=function(){this.bookInfo&&this.bookInfo.bookId&&(h.default.reportClk("debut","act"),this.openReader(this.bookInfo.bookId))},a([u.Prop()],t.prototype,"bookInfo",void 0),a([u.Prop({default:0})],t.prototype,"status",void 0),a([u.Prop({default:!0})],t.prototype,"isMySelf",void 0),a([u.Prop({default:0})],t.prototype,"senderVid",void 0),a([u.Prop()],t.prototype,"readingCount",void 0),a([u.Prop({default:!1})],t.prototype,"openFromAppScene",void 0),a([u.Prop({default:!1})],t.prototype,"appLoginOutDay",void 0),a([u.Component({components:{BookCover:p.default}})],t)}(l.default);o.default=v},339:function(t,o,i){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,i=arguments.length;o<i;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=this&&this.__decorate||function(t,o,i,n){var r,a=arguments.length,s=a<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,i):n;if("object"==("undefined"==typeof Reflect?"undefined":(0,e.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,i,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(o,i,s):r(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(o,"__esModule",{value:!0});var u=c(i(5)),d=i(13),p=i(9),h=l(i(271)),f=c(i(12)),_=c(i(134)),m=c(i(669)),v=c(i(670)),g=c(i(3)),b=c(i(28)),y=c(i(2)),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shouldShowFreeLibrary=!1,t.initParams=null,t.openFromAppScene=!1,t}return r(t,e),Object.defineProperty(t.prototype,"shareBook",{get:function(){return h.store.state.shareBook},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shareBookInfo",{get:function(){return this.shareBook?this.shareBook.bookInfo:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vol",{get:function(){return h.store.state.vol||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return h.store.state.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shareGetType",{get:function(){return"lecture"===this.type?1:0},enumerable:!0,configurable:!0}),t.prototype.mounted=function(){console.log("[FreeLibrary] mounted"),this.loadData()},t.prototype.loadData=function(){var e=this.$root.$mp.appOptions;this.openFromAppScene=b.default.openFromAppShare(e),console.log("[FreeLibrary V2] loadData:",this.openFromAppScene);var t=this.$root.$mp.query,o=t.bookId,i=t.vol,n={type:t.type,bookId:o,vol:i,senderVid:t.senderVid},r=parseInt(t.authorVid);r&&(n.authorVid=r),this.initParams=n,this.loadRemoteData(n)},t.prototype.loadRemoteData=function(e){var t=this;h.store.dispatch(h.FREE_LIBRARY_CAMPAIGN,e).then((function(){"book"===t.type?f.default.reportExp("freeLibrary","act"):f.default.reportExp("freeLibraryLecture","act"),t.shouldShowFreeLibrary=!0,t.refreshChildComponent(),t.autoReceiveBook()})).catch((function(e){t.shouldShowFreeLibrary=!1,console.error("[FreeLibrary V2]",e)}))},t.prototype.refreshChildComponent=function(){this.$refs.freeLectureLib&&this.$refs.freeLectureLib.refresh&&this.$refs.freeLectureLib.refresh(),this.$refs.freeBookLib&&this.$refs.freeBookLib.refresh&&this.$refs.freeBookLib.refresh()},t.prototype.reportShareGiftLogInfo=function(e){return _.default.reportInfo({source:"mp|campaign",message:e})},t.prototype.reportShareGiftLogError=function(e){return _.default.reportError({source:"mp|campaign",message:e})},t.prototype.reportShareGiftLogErrorWithCode=function(e,t){return _.default.reportError({source:"mp|campaign",message:e,errorCode:t})},t.prototype.sendBookIfNeed=function(){var e=this,t=this.$root.$mp.query,o=parseInt(t.senderVid),i=t.bookId,n=this.shareGetType,r=this.vol,a=parseInt(t.authorVid),s=parseInt(t.timestamp),c=t.scene,l=t.sn;if(o&&i){_.default.reportExp({source:"mp|campaign",senderVid:o,bookId:i,type:n,vol:r,authorVid:a,timestamp:s,scene:c,sn:l});var u=g.default.getUser();return u&&u.vid?u.vid===o?(console.log("sendBookIfNeed","本人打开，不触发赠书"),this.reportShareGiftLogInfo("本人打开，不触发赠书")):r?void 0===n?(console.log("sendBookIfNeed","缺少类型参数",n),this.reportShareGiftLogError("缺少类型参数")):s&&c&&l?y.default.shareGetRedeem({bookId:i,type:n,scene:c,timestamp:s,sn:l,vol:r,senderVid:o,authorVid:a}).then((function(e){console.log("sendBookIfNeed succeed",e)})).catch((function(t){return t.data&&-2653===t.data.errcode?(console.log("sendBookIfNeed failed",t),wx.showToast({title:"本周你已帮其他用户解锁过该福利",icon:"none"}),e.reportShareGiftLogInfo("本周你已帮其他用户解锁过该福利")):t.data&&-2656===t.data.errcode?(console.log("sendBookIfNeed failed",t),e.reportShareGiftLogInfo("活动已过期")):(console.error("sendBookIfNeed failed",t),e.reportShareGiftLogErrorWithCode("领取失败",t.data&&t.data.errcode))})):(console.log("sendBookIfNeed","缺少验证参数",s,c,l),this.reportShareGiftLogError("缺少验证参数")):(console.log("sendBookIfNeed","缺少期数",r),this.reportShareGiftLogError("缺少期数")):(console.error("sendBookIfNeed","无法判断身份，不能触发赠书"),this.reportShareGiftLogError("无法判断身份，不能触发赠书"))}console.log("sendBookIfNeed","无有效赠书参数，不触发赠书",o,i)},t.prototype.autoReceiveBook=function(){console.log("autoReceiveBook",this.type),this.sendBookIfNeed()},s([d.Component({components:{FreeLibraryLecture:m.default,FreeLibraryBook:v.default},computed:a({},p.mapGetters({canShow30DayCard:"canShow30DayCard"}),p.mapState({profile:function(e){return e.profile},user:function(e){return e.profile.user}}))})],t)}(u.default);o.default=C},340:function(t,o,i){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(t,o,i,n){var r,a=arguments.length,s=a<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,i):n;if("object"==("undefined"==typeof Reflect?"undefined":(0,e.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,i,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(o,i,s):r(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var c=s(i(5)),l=i(13),u=s(i(14)),d=s(i(12)),p=s(i(39)),h=s(i(284)),f=s(i(28)),_=s(i(103)),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.launchAppClickTime=0,t.MAX_CLICK_CAPTURE_TIME=f.default.MAX_CLICK_CAPTURE_TIME,t.forceCancelLaunchApp=!1,t}return r(t,e),Object.defineProperty(t.prototype,"scheme",{get:function(){return h.default.scheme("lecture")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"freeLibraryButtonType",{get:function(){return this.openFromAppScene&&!this.forceCancelLaunchApp?"launchApp":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formattedBookStat",{get:function(){if(this.bookStat&&this.bookStat>0){var e=_.default(this.bookStat);return e.number+e.unit}return""},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.launchAppClickTime=0,this.forceCancelLaunchApp=!1},t.prototype.handleTap=function(){this.openFromAppScene&&!this.forceCancelLaunchApp?(this.launchAppClickTime++,this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&(this.forceCancelLaunchApp=!0)):this.appLoginOutDay?this.jumpToFreeLibraryDetail(!0):this.jumpToFreeLibraryDetail(!1),d.default.reportClk("freeLibraryLecture","act")},t.prototype.launchAppFailed=function(){p.default("freeLibrary",this.$root.$mp.appOptions),this.jumpToFreeLibraryDetail(!0)},t.prototype.jumpToFreeLibraryDetail=function(e){void 0===e&&(e=!1),this.launchAppClickTime=0;var t="/pages/freeLibraryV2/main?type=lecture";e&&(t+="&showGuide=1"),wx.navigateTo({url:t})},t.prototype.handleClickBook=function(){if(!this.bookInfo)return console.error("handleClickBook failed, missing book info",this.bookInfo);d.default.reportClk("freeLibraryLecture","act");var e=this.bookInfo.hasLecture?"LECTURE":"TTS",t="/pages/lecture/player/main?bookId="+this.bookInfo.bookId+"&type="+e;wx.navigateTo({url:t})},a([l.Prop()],t.prototype,"bookInfo",void 0),a([l.Prop()],t.prototype,"bookStat",void 0),a([l.Prop()],t.prototype,"senderVid",void 0),a([l.Prop()],t.prototype,"authorVid",void 0),a([l.Prop({default:!1})],t.prototype,"openFromAppScene",void 0),a([l.Prop({default:!1})],t.prototype,"appLoginOutDay",void 0),a([l.Component({components:{BookCover:u.default}})],t)}(c.default);o.default=m},341:function(t,o,i){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(t,o,i,n){var r,a=arguments.length,s=a<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,i):n;if("object"==("undefined"==typeof Reflect?"undefined":(0,e.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,i,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(o,i,s):r(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var c=s(i(5)),l=i(13),u=s(i(14)),d=s(i(12)),p=s(i(39)),h=s(i(284)),f=s(i(28)),_=s(i(103)),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.launchAppClickTime=0,t.MAX_CLICK_CAPTURE_TIME=f.default.MAX_CLICK_CAPTURE_TIME,t.forceCancelLaunchApp=!1,t}return r(t,e),Object.defineProperty(t.prototype,"scheme",{get:function(){return h.default.scheme("book")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"freeLibraryButtonType",{get:function(){return this.openFromAppScene&&!this.forceCancelLaunchApp?"launchApp":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formattedBookStat",{get:function(){if(this.bookStat&&this.bookStat>0){var e=_.default(this.bookStat);return e.number+e.unit}return""},enumerable:!0,configurable:!0}),t.prototype.refresh=function(){this.launchAppClickTime=0,this.forceCancelLaunchApp=!1},t.prototype.handleTap=function(){this.openFromAppScene&&!this.forceCancelLaunchApp?(this.launchAppClickTime++,this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&(this.forceCancelLaunchApp=!0)):this.appLoginOutDay?this.jumpToFreeLibraryDetail(!0):this.jumpToFreeLibraryDetail(!1),d.default.reportClk("freeLibrary","act")},t.prototype.launchAppFailed=function(){p.default("freeLibrary",this.$root.$mp.appOptions),this.jumpToFreeLibraryDetail(!0)},t.prototype.jumpToFreeLibraryDetail=function(e){void 0===e&&(e=!1),this.launchAppClickTime=0;var t="/pages/freeLibraryV2/main?type=book";e&&(t+="&showGuide=1"),wx.navigateTo({url:t})},t.prototype.handleClickBook=function(){if(!this.bookInfo)return console.error("handleClickBook failed, missing book info",this.bookInfo);d.default.reportClk("freeLibrary","act");var e="/pages/reader/main?bookId="+this.bookInfo.bookId;wx.navigateTo({url:e})},a([l.Prop()],t.prototype,"bookInfo",void 0),a([l.Prop()],t.prototype,"bookStat",void 0),a([l.Prop()],t.prototype,"senderVid",void 0),a([l.Prop({default:!1})],t.prototype,"openFromAppScene",void 0),a([l.Prop({default:!1})],t.prototype,"appLoginOutDay",void 0),a([l.Component({components:{BookCover:u.default}})],t)}(c.default);o.default=m},342:function(t,o,i){var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(t,o,i,n){var r,a=arguments.length,s=a<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,i):n;if("object"==("undefined"==typeof Reflect?"undefined":(0,e.default)(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,i,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(o,i,s):r(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var c=s(i(5)),l=s(i(223)),u=i(13),d=s(i(234)),p=s(i(15)),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.tryShowModal=function(){var e=p.default.getStorageSync("privacyAgreement");console.log("[PrivacyAgreement]","tryShowModal",e),e||this.$refs.modal.showModal()},t.prototype.showModal=function(){this.$refs.modal.showModal()},t.prototype.closeModal=function(){this.$refs.modal.closeModal()},t.prototype.handleAgree=function(){p.default.setStorageSync("privacyAgreement",!0),this.$refs.modal.closeModal()},t.prototype.handleDisagree=function(){wx.showToast({title:"须同意后才可继续使用微信读书",icon:"none"})},t.prototype.gotoWebview=function(e){var t=l.default.stringifyUrl({url:"/pages/webview/main",query:{url:e}});wx.navigateTo({url:t})},t.prototype.gotoPrivacyAgreement=function(){this.gotoWebview("https://web.at.qq.com/weread/miniprogram/weread_user_privacy_miniprogram.html")},t.prototype.gotoUserAgreement=function(){this.gotoWebview("https://web.at.qq.com/weread/miniprogram/weread_user_agreement_miniprogram.html")},a([u.Component({components:{BottomModal:d.default}})],t)}(c.default);o.default=h},522:function(e,t,o){var i,n,r=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?n(e.value):new o((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var o,i,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break}n[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(o(5)),l=s(o(9)),u=(s(o(42)),s(o(2))),d=s(o(3));c.default.use(l.default),t.DEBUT_INIT="DEBUT_INIT",t.DEBUT_RECEIVE="DEBUT_RECEIVE",t.DEBUT_SEND_CARD="DEBUT_SEND_CARD";var p={actions:((i={})[t.DEBUT_INIT]=function(e,o){var i=e.commit;return r(this,void 0,void 0,(function(){var e;return a(this,(function(n){return(e=d.default.getCampaignDebugVol())&&(o.debugVol=e),[2,u.default.commonCloudFuncRequest("debutInit",o).then((function(e){return e&&(e.from=o.from||"",e.vol=o.vol,i(t.DEBUT_INIT,e)),e}))]}))}))},i[t.DEBUT_RECEIVE]=function(e,o){var i=e.commit;return r(this,void 0,void 0,(function(){return a(this,(function(e){return[2,u.default.shareOneGetOneRedeem(o).then((function(e){return i(t.DEBUT_RECEIVE),e})).catch((function(e){return console.error("shareOneGetOneRedeem error",e),{succ:0}}))]}))}))},i[t.DEBUT_SEND_CARD]=function(e,t){return r(this,void 0,void 0,(function(){return a(this,(function(e){return[2,u.default.sendDebutCard(t).then((function(){console.log("api sendDebutCard succeed")})).catch((function(e){console.error("api sendDebutCard error",e)}))]}))}))},i),getters:{},mutations:((n={})[t.DEBUT_INIT]=function(e,t){var o=t.dateVol,i=t.isMySelf,n=t.debutBook,r=t.readingCount,a=t.sender,s=t.vol;e.vol=s,e.dateVol=o,e.isMySelf=i;var c,l,u=(l=null,(c=n)&&(l={bookId:c.bookId,author:c.author,cover:c.cover,title:c.title,payType:c.payType,paid:c.paid,isChapterPaid:c.isChapterPaid}),l);e.debutBookInfo=u,e.debutStatus=function(e,t){if(!t)return 0;var o=function(e){var t=e,o=t.substr(0,4),i=t.substr(4,2),n=t.substr(6,2);return new Date(o+"-"+i+"-"+n+" 21:00:00").getTime()+6048e5}(e),i=0,n=1&t.payType;return(n&&t.paid||!n&&t.isChapterPaid)&&(i=1),1!==i&&Date.now()>o&&(i=2),i}(o,u),e.readingCount=parseInt(r),e.sender={userVid:a.userVid,name:a.name,avatar:a.avatar}},n[t.DEBUT_RECEIVE]=function(e){e.debutStatus=1},n),plugins:[],state:{debutBookInfo:null,dateVol:"",debutStatus:0,isMySelf:!1,readingCount:0,sender:null,vol:0}};t.store=new l.default.Store(p)},523:function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default={scheme:function(){return"weread://home?tab=1"}}},545:function(e,t,o){o.r(t);var i,n,r=o(337),a=o.n(r),s=o(7)(a.a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.shouldShowDebut?o("view",{staticClass:"debut_campaign"},[o("debut-book",{ref:"debutLib",attrs:{"book-info":e.debutBookInfo,"open-from-app-scene":e.openFromAppScene,"app-login-out-day":e.canShow30DayCard,"is-my-self":e.isMySelf,status:e.debutStatus,"sender-vid":e.initParams.senderId,"reading-count":e.readingCount,eventid:"2_0",mpcomid:"0"},on:{receive:e.handleReceiveBook,launchApp:e.handleLaunchApp}}),e._v(" "),o("customer-service-prompt",{ref:"customerServicePrompt",attrs:{source:"debut",mpcomid:"1"}})],1):e._e()])},staticRenderFns:[]},(function(e){o(856)}),null,null).exports,c=o(6),l=o.n(c),u=o(36),d=o(35),p=o(105),h=o(37),f={components:{Alert:h.default},methods:{show:function(){this.$refs.alert.showModal()},dismiss:function(){this.$refs.alert.closeModal()}}},_=o(7)(f,{render:function(){var e=this.$createElement,t=this._self._c||e;return t("Alert",{ref:"alert",attrs:{"needs-close-button":!0,"show-animation":!0,"content-selector":"lotteryHistory_ruleAlert",mpcomid:"0"}},[t("view",{staticClass:"lotteryHistory_ruleAlert_title"},[this._v("组队抽奖活动规则")]),this._v(" "),t("view",{staticClass:"lotteryHistory_ruleAlert_cnt"},[this._v("\n        1. 奖品为2天、5天、7天、30天、365天体验卡。"),t("br"),this._v("\n        2. 队伍满员后队长将额外获得一次抽奖机会。"),t("br"),this._v("\n        3. 当队伍仅有你一人时，你可加入其他队伍。"),t("br"),this._v("\n        4. 每期队伍成员不能与往期完全相同。\n    ")],1)])},staticRenderFns:[]},(function(e){o(864)}),null,null).exports,m=o(12),v=o(0),g=o(82),b=o(3),y=o(28),C=o(9),k={components:{InfiniteLotteryAvatar:p.a,InfiniteLotteryRuleAlert:_},props:{},data:function(){return{showCoverBtn:!1,finishLoadingData:!1,myCollageAppScheme:g.a.scheme(),activityId:null,reportFormIdCount:0,clickTimeCount:0,MAX_CLICK_CAPTURE_TIME:y.default.MAX_CLICK_CAPTURE_TIME}},computed:l()({},Object(C.mapGetters)({needAuthorized:"needAuthorized",canShow30DayCard:"canShow30DayCard",shouldBlockedUser:"shouldBlockedUser"}),{appRedeemableDays:function(){return d.store.getters.appRedeemableDays},collage:function(){return u.h.state.collage},myCollage:function(){return u.h.state.myCollage},hasHistory:function(){return u.h.state.hasHistory},isSelfCollage:function(){return u.h.state.isSelfCollage},collageMembersArray:function(){return g.a.fixedLengthMembersArray(this.collage)},collageDateStr:function(){return g.a.formatCollageDesc(this.collage)},collapsePanel:function(){var e=this.collage,t=this.myCollage;return!(!this.isSelfCollage||2===e.status)||!(!t.collageId||0===e.status&&0===t.status&&t.members&&1===t.members.length)},teamSuccess:function(){return!(!this.isSelfCollage||1!==this.collage.status)},appLoginOut30Day:function(){return this.canShow30DayCard}}),mounted:function(){this.loadData()},methods:{generateShareOpt:function(){this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_Lottery_Index_share"}),m.default.reportClk("infiniteLottery_Index_Share","act");var e=this.collage.collageId,t=this.$root.$mp.appOptions.query.activity||1,o={},i=b.default.getUser();return o.title=i.name+"邀请你参与微信读书体验卡抽奖，中奖率100%",o.imageUrl="https://weread-1258476243.file.myqcloud.com/miniprogram/campaign_infinite_lottery_bw_new.png",o.path="/pages/index/main?campaign=infiniteLottery&collageId="+e+"&activity="+t,o},loadData:function(){var e=this;this.clickTimeCount=0;var t=this.$root.$mp.appOptions.query,o={};t.collageId?o.collageId=t.collageId:t.issue?o.issue=t.issue:t.auto&&(o.auto=t.auto),console.log("InfiniteLottery LoadData",t,o),u.h.dispatch(u.a,o).then((function(t){e.finishLoadingData=!0,e.initShareActivityMessage(t),console.log("showCoverBtn isShowing:",e.showCoverBtn)})),t.activity&&1===t.activity?this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_infiniteLottery_activity"}):this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_infiniteLottery_normal"}),m.default.reportExp("infiniteLottery","act"),this.reportFormIdCount=0},handleUserInfoAuthorization:function(e){var t=this;e&&e.target&&e.target.userInfo&&b.default.handleUserInfoAuthorization(e,(function(){t.$store.dispatch(v.UPDATE_USERINFO)}))},goToHistory:function(){wx.navigateTo({url:"/pages/infiniteLotteryHistory/main"})},showRule:function(){this.$refs.ruleAlert.show()},doCreate:function(){var e=this;u.h.dispatch(u.c).then((function(t){t&&e.appRedeemableDays&&e.showDownloadGuideIfNeeded()}))},doJoin:function(){var e=this;wx.showLoading({title:"加入中…"}),u.h.dispatch(u.e,{collageId:this.collage.collageId}).then((function(t){if(wx.hideLoading(),t&&(t.errcode||t.errCode)){var o=t.errcode||t.errCode;-2670===o?wx.showToast({icon:"none",title:"加入失败，队伍成员不可与往期完全相同！"}):-2883===o?wx.showToast({icon:"none",title:"你的账号存在风险，暂时无法参与活动！"}):-2671===o?wx.showToast({icon:"none",title:"该团已满！"}):-2672===o?wx.showToast({icon:"none",title:"你已加入过该团！"}):wx.showToast({icon:"none",title:"加入失败，请重试！"})}else wx.showToast({icon:"none",title:"加入成功"}),e.showDownloadGuideIfNeeded()}))},showDownloadGuideIfNeeded:function(){this.appLoginOut30Day?this.$emit("notify",{action:"showCustomerServicePrompt",intent:"组队抽取无限卡",source:"infiniteLottery"}):console.log("showDownloadGuideIfNeeded userActive black")},goToMyCollage:function(){var e="/pages/infiniteLottery/main";this.appRedeemableDays&&(e+="?showDownload=1"),wx.navigateTo({url:e}),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_Lottery_Index_ToMyCollage"}),m.default.reportClk("infiniteLottery","act")},captureToCreateLottery:function(){this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Lottery_Index_ToCreate"}),m.default.reportClk("infiniteLottery","act"),this.doCreate()},captureToJoinLottery:function(){var e=this.appRedeemableDays;this.doJoin(e),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_Lottery_Index_ToJoin"}),m.default.reportClk("infiniteLottery","act")},initShareActivityMessage:function(e){if(e&&e.activityMessage&&e.activityMessage.activityId&&e.collage&&e.collage.collageId){var t=e.activityMessage;this.activityId=t.activityId;var o=e.collage.collageId;wx.updateShareMenu({withShareTicket:!0,isUpdatableMessage:!0,activityId:this.activityId,templateInfo:{parameterList:[{name:"member_count",value:(t.member_count||1)+""},{name:"room_limit",value:(t.room_limit||5)+""},{name:"path",value:"/pages/index/main?campaign=infiniteLottery&collageId="+o+"&activity=1"},{name:"version_type",value:"release"}]}})}},handleReportFormIdSubmit:function(e){this.reportFormIdCount>5||e&&e.target&&e.target.formId&&(this.reportFormIdCount++,this.$store.dispatch(v.REPORT_FORMID,{formId:e.target.formId,scene:2}))}}},w=o(7)(k,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{class:["infiniteLottery",{collapse:e.collapsePanel,no_button:e.teamSuccess}]},[e.collapsePanel?o("view",{staticClass:"infiniteLottery_hd"},[o("view",{staticClass:"infiniteLottery_title"},[e._v("组队抽取体验卡")]),e._v(" "),e.hasHistory?o("button",{staticClass:"infiniteLottery_goToHistory",attrs:{eventid:"2_2"},on:{click:e.goToHistory}},[e._v("组队记录")]):e._e()],1):o("view",{staticClass:"infiniteLottery_hd"},[o("view",{staticClass:"infiniteLottery_title"},[e._v("组队抽取体验卡")]),e._v(" "),e.collageDateStr?o("view",{staticClass:"infiniteLottery_date"},[o("text",{attrs:{decode:!0}},[e._v(e._s(e.collageDateStr))])]):o("view",{staticClass:"infiniteLottery_date"},[e._v(" ")]),e._v(" "),e.hasHistory?o("button",{staticClass:"infiniteLottery_goToHistory",attrs:{eventid:"2_0"},on:{click:e.goToHistory}},[e._v("组队记录")]):e._e(),e._v(" "),o("view",{staticClass:"infiniteLottery_rule"},[o("view",{staticClass:"infiniteLottery_rule_cnt",attrs:{eventid:"3_1"},on:{click:e.showRule}},[e._v("奖品为2天、5天、7天、30天、365天体验卡。队伍满员后队长将额外获得一次抽奖机会。当队伍仅有你一人时，你可加入其它队伍。每期队伍成员不能与往期完全相同。")])])],1),e._v(" "),o("view",{staticClass:"infiniteLottery_bd"},[o("view",{staticClass:"infiniteLottery_members"},[0===e.collage.status?o("view",{staticClass:"infiniteLottery_members_title"},[e._v("还差"+e._s(e.collage.lackMembers)+"人组队成功")]):1===e.collage.status?o("view",[e.isSelfCollage?o("view",{staticClass:"infiniteLottery_members_title"},[o("view",{staticClass:"infiniteLottery_members_title_success"}),e._v("组队成功")]):o("view",{staticClass:"infiniteLottery_members_title"},[e._v("该团已满")])]):2===e.collage.status?o("view",{staticClass:"infiniteLottery_members_title infiniteLottery_members_title_Warning"},[e._v("本次抽奖已过期")]):o("view",{staticClass:"infiniteLottery_members_title"},[e._v(" ")]),e._v(" "),e.collage.members&&e.collage.members.length>0?o("view",{staticClass:"infiniteLottery_members_list"},e._l(e.collageMembersArray,(function(e,t){return o("infinite-lottery-avatar",{key:t,attrs:{member:e,mpcomid:"0_"+t}})}))):o("view",{staticClass:"infiniteLottery_members_list"},[o("infinite-lottery-avatar",{attrs:{member:{},mpcomid:"1"}}),e._v(" "),o("infinite-lottery-avatar",{attrs:{member:{},mpcomid:"2"}}),e._v(" "),o("infinite-lottery-avatar",{attrs:{member:{},mpcomid:"3"}}),e._v(" "),o("infinite-lottery-avatar",{attrs:{member:{},mpcomid:"4"}}),e._v(" "),o("infinite-lottery-avatar",{attrs:{member:{},mpcomid:"5"}})],1)])]),e._v(" "),o("form",{attrs:{"report-submit":"",eventid:"1_10"},on:{submit:e.handleReportFormIdSubmit}},[e.collage||e.myCollage?e.isSelfCollage?o("view",{staticClass:"infiniteLottery_ft"},[0===e.collage.status?o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{id:"shareLotteryCollageButton","data-collageId":e.collage?e.collage.collageId:null,"data-activity":e.activityId&&null!==e.activityId?1:0,"hover-class":"wr_commonActive","form-type":"submit","open-type":"share"}},[e._v("\n                邀请好友加入队伍\n            ")]):2===e.collage.status&&1===e.myCollage.status?o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"3_4"},on:{click:function(t){t.stopPropagation(),e.goToMyCollage(t)}}},[e._v("\n                查看我的本期队伍\n            ")]):2===e.collage.status?o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"3_5"},on:{click:function(t){t.stopPropagation(),e.captureToCreateLottery(t)}}},[e._v("\n                组建新队伍\n            ")]):e._e()],1):o("view",[e.myCollage.collageId?o("view",{staticClass:"infiniteLottery_ft"},[0===e.collage.status&&0===e.myCollage.status&&e.myCollage.members&&1===e.myCollage.members.length?o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"4_7"},on:{click:function(t){t.stopPropagation(),e.captureToJoinLottery(t)}}},[e._v("\n                    立即加入队伍\n                ")]):o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"4_6"},on:{click:function(t){t.stopPropagation(),e.goToMyCollage(t)}}},[e._v("\n                    你已组队 · 查看你的队伍\n                ")])],1):o("view",{staticClass:"infiniteLottery_ft"},[0===e.collage.status?o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"4_9"},on:{click:function(t){t.stopPropagation(),e.captureToJoinLottery(t)}}},[e._v("\n                    立即加入队伍\n                ")]):1===e.collage.status||2===e.collage.status?o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"4_8"},on:{click:function(t){t.stopPropagation(),e.captureToCreateLottery(t)}}},[e._v("\n                    组建新队伍\n                ")]):e.finishLoadingData?e._e():o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{disabled:""}})],1)]):o("view",{staticClass:"infiniteLottery_ft"},[o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold infiniteLottery_action",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"3_3"},on:{click:e.doCreate}},[e._v("\n                立即组队\n            ")])],1)]),e._v(" "),e.needAuthorized?o("button",{staticClass:"infiniteLottery_transparentBtn",attrs:{"open-type":"getUserInfo",eventid:"1_11"},on:{getuserinfo:e.handleUserInfoAuthorization}}):e._e(),e._v(" "),o("InfiniteLotteryRuleAlert",{ref:"ruleAlert",attrs:{mpcomid:"6"}})],1)},staticRenderFns:[]},(function(e){o(860)}),null,null).exports,I=o(32),L=o(22),O=o(40),T=o.n(O),x={components:{Alert:h.default},data:function(){return{user:null,myVoteData:null,justNeedLikeCount:2,currentDesignId:null,shareImageUrl:null,currentVol:0}},methods:{show:function(e,t,o,i,n){this.currentVol=e,this.user=t,this.myVoteData=o,this.currentDesignId=i,this.shareImageUrl=n;var r=2;o&&(r=o.needVoteCount-o.voter.length)<0&&(r=0),this.justNeedLikeCount=r,this.myVoteData.voter=[].concat(T()(this.myVoteData.voter),T()(new Array(o.needVoteCount-o.voter.length).fill({user:null}))),this.$refs.alert.showModal()},dismiss:function(){this.$refs.alert.closeModal();var e=parseInt(this.currentDesignId.split("_")[1]),t="/pages/giveOneGetOne/main?vol="+this.currentVol+"&showIndex="+e;wx.navigateTo({url:t})}}},S=o(7)(x,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Alert",{ref:"alert",attrs:{"needs-close-button":!0,"show-animation":!0,"content-selector":"giveOneGetOne_voteBack",mpcomid:"0"}},[o("view",{staticClass:"wr_alert_cnt"},[o("view",{staticClass:"giveOneGetOne_voteBack_icon"}),e._v(" "),o("view",{staticClass:"giveOneGetOne_voteBack_title"},[e._v("点赞成功")]),e._v(" "),e.user?o("view",{staticClass:"giveOneGetOne_voteBack_desc giveOneGetOne_voteBack_desc_Flex"},[o("view",{staticClass:"giveOneGetOne_voteBack_desc_FlexEllipsis"},[e._v(e._s(e.user.name))]),e._v(" "),o("view",{staticClass:"giveOneGetOne_voteBack_desc_FlexShrink0"},[e._v("回赞了你")])]):e._e(),e._v(" "),e.myVoteData?o("view",{staticClass:"giveOneGetOne_voteBack_desc"},[0===e.justNeedLikeCount?o("view",[e._v("您已获得"+e._s(e.myVoteData.infiniteDay)+"天体验卡")]):o("view",[e._v("你还差"+e._s(e.justNeedLikeCount)+"个赞即可获得 · "+e._s(e.myVoteData.infiniteDay)+"天体验卡")])]):e._e()]),e._v(" "),o("view",{staticClass:"wr_alert_buttons"},[o("button",{staticClass:"wr_alert_buttons_item",attrs:{"aria-role":"button","hover-class":"wr_commonActive",eventid:"2_0"},on:{click:function(t){t.stopPropagation(),e.dismiss(t)}}},[e._v("\n            立即查看\n        ")])],1)])},staticRenderFns:[]},(function(e){o(868)}),null,null).exports,A={components:{CustomerServicePrompt:L.default,GiveOneGetOneVoteBackAlert:S},props:{},data:function(){return{user:b.default.getUser(),initialParams:null,reportFormIdCount:0,inviteButtonOpenType:"share",downloadGuideDesc:"集赞无限卡",showCoverBtn:!1}},computed:l()({},Object(C.mapState)({profile:function(e){return e.profile}}),Object(C.mapGetters)({canShow30DayCard:"canShow30DayCard",needAuthorized:"needAuthorized",shouldBlockedUser:"shouldBlockedUser"}),{bgStyle:function(){return this.collapse?this.getLikeDesign.mpCoverCollapseURL&&this.getLikeDesign.mpCoverCollapseURL.length>0?"background-image: url("+this.getLikeDesign.mpCoverCollapseURL+");":"background-image: linear-gradient(-52deg, "+this.getLikeDesign.btnGradientEnd+" 0%, "+this.getLikeDesign.btnGradientStart+" 100%);":this.getLikeDesign?this.hasReceiveActiveInfinite?"background-image: url("+(this.getLikeDesign.receivedURL||this.getLikeDesign.mpCoverURL)+");":"background-image: url("+this.getLikeDesign.mpCoverURL+");":""},getLikeDesign:function(){return I.g.state.getLikeDesign},getLikeData:function(){return I.g.state.getLikeData},isExpired:function(){return I.g.state.isExpired},currentVol:function(){return I.g.state.currentVol},myData:function(){return I.g.state.myData},getLikeUser:function(){return I.g.state.getLikeUser},isMyVote:function(){return I.g.state.isMyVote||0},isMySelfCard:function(){return I.g.state.isMySelf},currentDesignId:function(){return this.getLikeData&&this.getLikeData.designId?this.getLikeData.designId:""},activeInfinite:function(){return I.g.state.activeInfinite},appLoginOut30Day:function(){return this.canShow30DayCard},hasReceiveActiveInfinite:function(){return!this.activeInfinite.clickGetInfoReceived&&this.activeInfinite.clickGetInfoDay>0},activeInfiniteDay:function(){return this.activeInfinite&&this.activeInfinite.clickGetInfoDay?this.activeInfinite.clickGetInfoDay:0},receiveButtonTxt:function(){return this.hasReceiveActiveInfinite?"去微信读书app领取":"查看详情"},collapse:function(){return 1===this.isMyVote||2===this.isMyVote||!!this.isExpired||!!(!this.isMySelfCard&&this.getLikeDesign&&this.getLikeDesign.voter&&this.getLikeDesign.voter.length>=this.getLikeDesign.needVoteCount)||!this.isMySelfCard&&!(!this.myData||!this.myData.hasVote)}}),mounted:function(){this.loadData()},methods:{generateShareOpt:function(){this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_giveOneGetOne_Index_Share"}),m.default.reportClk("giveOneGetOne","act");var e=this.user.vid,t=this.currentDesignId,o={title:"点赞我的微信读书联名卡，送你无限卡会员免费读"};return this.getLikeDesign&&(o.imageUrl=this.getLikeDesign.mpShareIconURL||this.getLikeDesign.shareIconURL),o.path="/pages/index/main?campaign=giveOneGetOne&senderVid="+e+"&designId="+t,o},loadData:function(){var e=this.$root.$mp.appOptions.query,t={};e.senderVid&&(t.senderVid=e.senderVid),e.vol&&(t.vol=e.vol),e.designId&&(t.designId=e.designId),console.log("giveOneGetOne loadData"),this.initialParams=t,this.loadGiveOneGetOneCardInfo(t),m.default.reportExp("giveOneGetOne","act"),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_giveOneGetOne_Index_Exp"}),this.reportFormIdCount=0},handleUserInfoAuthorization:function(e){var t=this;e&&e.target&&e.target.userInfo&&b.default.handleUserInfoAuthorization(e,(function(){t.$store.dispatch(v.UPDATE_USERINFO)}))},loadGiveOneGetOneCardInfo:function(e){var t=this;I.g.dispatch(I.a,e).then((function(){t.updateInviteButtonType()})).catch((function(e){console.log("err loadGiveOneGetOneCardInfo:",e)}))},showDownloadGuider:function(){},launchAppGiveOneGetOneReceive:function(){var e=this;I.g.dispatch(I.c,{votedVid:this.getLikeUser.userVid,vol:this.currentVol,designId:this.getLikeData.designId}).then((function(t){t&&t.receiveData&&1===t.receiveData.succ&&(e.loadGiveOneGetOneCardInfo(e.initialParams),e.appLoginOut30Day?e.showDownloadGuider(!0):1===t.receiveData.isReturnLike?(e.showVoteBack(t.myData),setTimeout((function(){e.$store.dispatch(v.QUERY_INFINITE)}),300)):wx.showToast({title:"点赞成功！",icon:"success"}))})).catch((function(t){t&&-2653===t.errcode?(e.loadGiveOneGetOneCardInfo(e.initialParams),wx.showToast({title:"您已点赞成功！",icon:"none"})):t&&-2882===t.errcode?wx.showToast({title:"本期已过期，请重新参与活动！",icon:"none"}):wx.showToast({title:"点赞失败，请重试！",icon:"none"})})),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_giveOneGetOne_Index_Receive_Error"})},showVoteBack:function(e){var t=this,o=this.getLikeDesign.mpShareIconURL||this.getLikeDesign.shareIconURL,i=this.getLikeData?this.getLikeData.designId:null;this.$refs.voteBackAlert.show(this.currentVol,this.getLikeUser,e,i,o),setTimeout((function(){t.$store.dispatch(v.QUERY_INFINITE)}),500)},captureGiveOneGetOneReceive:function(){this.launchAppGiveOneGetOneReceive(),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_giveOneGetOne_Index_Receive"}),m.default.reportClk("giveOneGetOne","act")},checkMyGiveOneGetOneCard:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.myData&&this.myData.designId?parseInt(this.myData.designId.split("_")[1]):0,o="/pages/giveOneGetOne/main?vol="+this.currentVol+"&showIndex="+t+"&senderVid="+this.user.vid;e&&(o+="&showGuide=1"),wx.navigateTo({url:o})},handleReportFormIdSubmit:function(e){this.reportFormIdCount>5||e&&e.target&&e.target.formId&&(this.reportFormIdCount++,this.$store.dispatch(v.REPORT_FORMID,{formId:e.target.formId,scene:2}))},captureClickMySelfCard:function(){this.myData.voter.length>=this.myData.needVoteCount?(this.inviteButtonOpenType="",this.checkMyGiveOneGetOneCard(!1)):this.inviteButtonOpenType="share"},updateInviteButtonType:function(){if(this.isMySelfCard){var e=this.myData.voter.length>=this.myData.needVoteCount;this.inviteButtonOpenType=e?"":"share"}},captureCheckMyCard:function(){this.appLoginOut30Day?this.checkMyGiveOneGetOneCard(!0):this.checkMyGiveOneGetOneCard(!1)},handleCheckBookDetail:function(){wx.navigateTo({url:"/pages/reader/main?bookId="+this.getLikeDesign.bookId})}}},D=o(7)(A,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.getLikeDesign&&e.myData&&e.getLikeData&&e.getLikeUser?o("view",{staticClass:"giveOneGetOne",class:{giveOneGetOne_Collapse:e.collapse},style:e.bgStyle},[e.collapse?e._e():o("button",{staticClass:"giveOneGetOne_bg"}),e._v(" "),o("form",{attrs:{"report-submit":"",eventid:"1_6"},on:{submit:e.handleReportFormIdSubmit}},[1===e.isMyVote||2===e.isMyVote?[o("view",{staticClass:"giveOneGetOne_tip giveOneGetOne_tip_Flex"},[o("view",{staticClass:"giveOneGetOne_tip_shrink0"},[e._v("每期活动一人仅可点赞一次 · 你已为")]),o("view",{staticClass:"giveOneGetOne_tip_ellipsis"},[e._v(e._s(e.getLikeUser.name))]),o("view",{staticClass:"giveOneGetOne_tip_shrink0"},[e._v(e._s(2===e.isMyVote?"":"的其他联名卡")+"点赞")])]),e._v(" "),o("button",{staticClass:"giveOneGetOne_entry",attrs:{"hover-class":"wr_commonActive","aria-role":"button","form-type":"submit",eventid:"3_0"},on:{click:function(t){t.stopPropagation(),e.captureCheckMyCard(t)}}},[e.hasReceiveActiveInfinite?o("view",{staticClass:"giveOneGetOne_entry_main"},[o("view",{staticClass:"giveOneGetOne_entry_img"},[o("image",{attrs:{src:e.myData.genericImageURL}})]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta"},[o("view",{staticClass:"giveOneGetOne_entry_meta_emphasize"},[e._v(e._s(e.getLikeUser.name)+"送你"+e._s(e.activeInfiniteDay)+"天体验卡")]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta_desc"},[e._v("微信读书体验卡百万好书免费读")])])]):o("view",{staticClass:"giveOneGetOne_entry_main"},[o("view",{staticClass:"giveOneGetOne_entry_img"},[o("image",{attrs:{src:e.myData.genericImageURL}})]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta"},[o("view",{staticClass:"giveOneGetOne_entry_meta_desc"},[e._v("我的联名体验卡")]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta_emphasize"},[e.myData.voter.length>=e.myData.needVoteCount?o("view",[e._v("已集齐 · 获得"+e._s(e.myData.infiniteDay)+"天体验卡")]):o("view",[e._v("邀请朋友点赞可得12天体验卡")])])])]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_btn"},[e._v(e._s(e.receiveButtonTxt))])])]:e.isExpired?[o("view",{staticClass:"giveOneGetOne_tip"},[e._v("联名体验卡点赞已过期")]),e._v(" "),o("button",{staticClass:"giveOneGetOne_entry",attrs:{"hover-class":"wr_commonActive","aria-role":"button","form-type":"submit",eventid:"3_1"},on:{click:function(t){t.stopPropagation(),e.captureCheckMyCard(t)}}},[o("view",{staticClass:"giveOneGetOne_entry_main"},[o("view",{staticClass:"giveOneGetOne_entry_img"},[o("image",{attrs:{src:e.myData.genericImageURL}})]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta"},[o("view",{staticClass:"giveOneGetOne_entry_meta_desc"},[e._v("查看最新一期联名卡")]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta_emphasize"},[e._v("邀请朋友点赞可得12天体验卡")])])]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_btn"},[e._v(e._s(e.receiveButtonTxt))])])]:!e.isMySelfCard&&e.getLikeDesign.voter&&e.getLikeDesign.voter.length>=e.getLikeDesign.needVoteCount?[o("view",{staticClass:"giveOneGetOne_tip"},[e._v(e._s(e.getLikeUser.name)+"集赞成功 · 已获得"+e._s(e.getLikeData.infiniteDay)+"天体验卡")]),e._v(" "),o("button",{staticClass:"giveOneGetOne_entry",attrs:{"hover-class":"wr_commonActive","aria-role":"button","form-type":"submit",eventid:"3_2"},on:{click:function(t){t.stopPropagation(),e.captureCheckMyCard(t)}}},[e.hasReceiveActiveInfinite?o("view",{staticClass:"giveOneGetOne_entry_main"},[o("view",{staticClass:"giveOneGetOne_entry_img"},[o("image",{attrs:{src:e.myData.genericImageURL}})]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta"},[o("view",{staticClass:"giveOneGetOne_entry_meta_emphasize"},[e._v(e._s(e.getLikeUser.name)+"送你"+e._s(e.activeInfiniteDay)+"天体验卡")]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta_desc"},[e._v("微信读书体验卡百万好书免费读")])])]):o("view",{staticClass:"giveOneGetOne_entry_main"},[o("view",{staticClass:"giveOneGetOne_entry_img"},[o("image",{attrs:{src:e.myData.genericImageURL}})]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta"},[o("view",{staticClass:"giveOneGetOne_entry_meta_desc"},[e._v("我的联名体验卡")]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta_emphasize"},[e.myData.voter.length>=e.myData.needVoteCount?o("view",[e._v("已集齐 · 获得"+e._s(e.myData.infiniteDay)+"天体验卡")]):o("view",[e._v("邀请朋友点赞可得12天体验卡")])])])]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_btn"},[e._v(e._s(e.receiveButtonTxt))])])]:e.isMySelfCard?[o("button",{staticClass:"giveOneGetOne_action",attrs:{id:"shareGiveOneGetOneButton","form-type":"submit","data-designid":e.currentDesignId,"data-imageurl":e.getLikeDesign?e.getLikeDesign.mpShareIconURL||e.getLikeDesign.shareIconURL:"","hover-class":"wr_commonActive","aria-role":"button","open-type":e.inviteButtonOpenType,eventid:"3_3"},on:{click:function(t){t.stopPropagation(),e.captureClickMySelfCard(t)}}},[o("view",{staticClass:"giveOneGetOne_action_main"},[e.myData.voter.length>=e.myData.needVoteCount?o("view",[e._v("去获取更多联名无限卡")]):o("view",[e._v("邀请朋友来点赞")])]),e._v(" "),o("view",{staticClass:"giveOneGetOne_action_sub"},[e.myData.voter.length>=e.myData.needVoteCount?o("view",[e._v("你已集赞成功 · 获得"+e._s(e.myData.infiniteDay)+"天无限卡")]):o("view",[e._v("你还差"+e._s(e.myData.needVoteCount-e.myData.voter.length)+"个赞即可获得 · "+e._s(e.myData.infiniteDay)+"天无限卡")])])])]:e.myData.hasVote?[o("view",{staticClass:"giveOneGetOne_tip"},[e._v("每期活动一人仅可点赞一次 · 本期已为其他朋友点赞")]),e._v(" "),o("button",{staticClass:"giveOneGetOne_entry",attrs:{"hover-class":"wr_commonActive","aria-role":"button","form-type":"submit",eventid:"3_4"},on:{click:function(t){t.stopPropagation(),e.captureCheckMyCard(t)}}},[e.hasReceiveActiveInfinite?o("view",{staticClass:"giveOneGetOne_entry_main"},[o("view",{staticClass:"giveOneGetOne_entry_img"},[o("image",{attrs:{src:e.myData.genericImageURL}})]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta"},[o("view",{staticClass:"giveOneGetOne_entry_meta_emphasize"},[e._v(e._s(e.getLikeUser.name)+"送你"+e._s(e.activeInfiniteDay)+"天无限卡")]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta_desc"},[e._v("微信读书无限卡百万好书免费读")])])]):o("view",{staticClass:"giveOneGetOne_entry_main"},[o("view",{staticClass:"giveOneGetOne_entry_img"},[o("image",{attrs:{src:e.myData.genericImageURL}})]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta"},[o("view",{staticClass:"giveOneGetOne_entry_meta_desc"},[e._v("我的联名无限卡")]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_meta_emphasize"},[e.myData.voter.length>=e.myData.needVoteCount?o("view",[e._v("已集齐 · 获得"+e._s(e.myData.infiniteDay)+"天体验卡")]):o("view",[e._v("邀请朋友点赞可得12天无限卡")])])])]),e._v(" "),o("view",{staticClass:"giveOneGetOne_entry_btn"},[e._v(e._s(e.receiveButtonTxt))])])]:e.getLikeDesign.voter&&e.getLikeData.voter.length<e.getLikeData.needVoteCount&&!e.myData.hasVote&&0===e.isMyVote?[o("view",{staticClass:"giveOneGetOne_tip"},[e._v(e._s(e.getLikeUser.name)+"还差"+e._s(e.getLikeDesign.needVoteCount-e.getLikeDesign.voter.length)+"个点赞即可获得 · "+e._s(e.getLikeData.infiniteDay)+"天无限卡")]),e._v(" "),e.hasReceiveActiveInfinite?o("view",{staticClass:"giveOneGetOne_tip"},[e._v("\n                点赞即送你"+e._s(e.activeInfiniteDay)+"天无限卡\n            ")]):o("view",{staticClass:"giveOneGetOne_tip"},[e._v("\n                为"+e._s(2===e.getLikeUser.gender?"她":"他")+"点赞，你也将获得"+e._s(2===e.getLikeUser.gender?"她":"他")+"的回赞\n            ")]),e._v(" "),o("button",{staticClass:"giveOneGetOne_like",attrs:{"hover-class":"wr_commonActive","aria-role":"button","form-type":"submit",eventid:"3_5"},on:{click:function(t){t.stopPropagation(),e.captureGiveOneGetOneReceive(t)}}},[e._v("\n                赞\n            ")])]:e._e()],2),e._v(" "),o("customer-service-prompt",{ref:"customerServicePrompt",attrs:{intent:e.downloadGuideDesc,source:"giveOneGetOne","first-intent":!0,mpcomid:"6"}}),e._v(" "),e.needAuthorized?o("button",{staticClass:"giveOneGetOne_transparentBtn",attrs:{"open-type":"getUserInfo",eventid:"1_7"},on:{getuserinfo:e.handleUserInfoAuthorization}}):e._e(),e._v(" "),o("GiveOneGetOneVoteBackAlert",{ref:"voteBackAlert",attrs:{mpcomid:"7"}})],1):e._e()},staticRenderFns:[]},(function(e){o(866)}),null,null).exports,R=o(169),P=o(171),B=o(30),E={components:{FlipCardGameCard:R.a,FlipCardGamePopup:P.a,CustomerServicePrompt:L.default},props:{},data:function(){return{cardForPopup:{},fromPopup:!1,reportFormIdCount:0,openFromAppScene:!1,currentClickCardInfo:null,needShowDownloadGuide:!1}},computed:l()({},Object(C.mapState)({profile:function(e){return e.profile}}),Object(C.mapGetters)(["canShow30DayCard"]),{normalList:function(){return B.f.state.normalList||[]},superList:function(){return B.f.state.superList||[]},superReceivedCardIndex:function(){return B.f.state.superReceivedCardIndex},showCardListInBanner:function(){return this.normalList.slice(0,3)},finishNormals:function(){return 6===this.normalList.reduce((function(e,t){return e+(1===t.status||3===t.status?1:0)}),0)},normalReceivedList:function(){return this.normalList.filter((function(e){return 3===e.status}))},allReceivedCount:function(){return this.normalReceivedList.length+(this.superReceivedCardIndex>=0?1:0)},receiveNothing:function(){return this.allReceivedCount<=0},superFlippedIndex:function(){return this.superList.findIndex((function(e){return 1===e.status}))},superUnlocked:function(){return this.superList.some((function(e){return 2!==e.status}))},vol:function(){return B.f.state.vol},appLoginOut30Day:function(){return this.canShow30DayCard}}),mounted:function(){this.loadData()},methods:{generateShareOpt:function(){var e={},t=b.default.getUser();return e.title=t.name+"赠你终身免费读机会，惊喜好礼翻开必得",e.imageUrl="https://rescdn.qqmail.com/weread/assets/mini_program/flip_card_game_share_to_mini_program_v2.jpg",e.path="/pages/index/main?campaign=flipCardGame&inviteVid="+t.vid,e},loadData:function(){var e=this.$root.$mp.appOptions.query;this.fromPopup=e.popup||!1;var t={};e.inviteVid&&(t.inviteVid=e.inviteVid),this.initialParams=t,this.loadFlipCardGameInfo(t),m.default.reportExp("FlipCard","act"),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_FlipCard_Index_Exp"}),this.reportFormIdCount=0,B.f.dispatch(B.a,{reset:!0})},initAndRefreshData:function(){this.currentClickCardInfo=null;var e=this.$root.$mp.appOptions;this.openFromAppScene=y.default.openFromAppShare(e),this.reportFormIdCount=0,this.needShowDownloadGuide=!1,B.f.dispatch(B.b,{cancel:!1})},loadFlipCardGameInfo:function(e){var t=this;B.f.dispatch(B.d,e).then((function(){t.checkToJumpFlipCardDetail(),t.initAndRefreshData()}))},checkToJumpFlipCardDetail:function(){for(var e=this,t=!1,o=0;o<this.normalList.length;o++)if(1===this.normalList[o].status||3===this.normalList[o].status){t=!0;break}t&&!this.fromPopup&&setTimeout((function(){e.handleCheckAllCards()}),500)},handleCheckAllCards:function(){this.vol&&(wx.navigateTo({url:"/pages/flipCardGame/main?vol="+this.vol}),m.default.reportClk("FlipCard","act"))},receiveCard:function(e){var t=this;wx.showLoading({title:"领取中…"}),B.f.dispatch(B.e,{vol:this.vol,sceneType:e.sceneType,cardIndex:e.card.cardIndex}).then((function(e){wx.hideLoading(),e&&1===e.succ?(t.toast("领取成功","success"),t.hidePopup()):(t.hidePopup(),t.toast("活动火爆，请稍后再试"))})).catch((function(){wx.hideLoading(),t.hidePopup(),t.toast("活动火爆，请稍后再试")})),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_FlipCardGame_Index_Receive"}),m.default.reportClk("FlipCard","act")},flipCard:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.showPopup(e,t,i),B.f.dispatch(B.c,{vol:this.vol,sceneType:t,cardIndex:e.cardIndex}).then((function(e){e&&1===e.succ?o.cardForPopup.status=-1:(o.hidePopup(),o.toast("活动火爆，请稍后再试"))})).catch((function(){o.hidePopup(),o.toast("活动火爆，请稍后再试")})),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_FlipCardGame_Index_Flip"}),m.default.reportClk("FlipCard","act")},showPopup:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needShowDownloadGuide=i,this.cardForPopup=e,this.cardForPopup.sceneType=t,this.$nextTick((function(){o.$refs&&o.$refs.flipCardGamePopup&&o.$refs.flipCardGamePopup.show()})),m.default.reportClk("FlipCard","act")},hidePopup:function(){this.$refs.flipCardGamePopup&&this.$refs.flipCardGamePopup.hide()},clickCardAction:function(e){this.currentClickCardInfo=null,this.handleClickCardAction(e)},handleClickCardAction:function(e){if("normal"===e.sceneType)0===e.card.status?this.flipCard(e.card,e.sceneType):this.showPopup(e.card,e.sceneType);else if("super"===e.sceneType)if(this.superFlippedIndex>=0||this.superReceivedCardIndex>=0){if(e.card.cardIndex!==this.superReceivedCardIndex&&e.card.cardIndex!==this.superFlippedIndex)return!1;this.showPopup(e.card,e.sceneType)}else 2!==e.card.status&&this.flipCard(e.card,e.sceneType)},handleClickToBookDetail:function(e){this.hidePopup();var t="/pages/reader/main?bookId="+e.bookId;e.authorVid&&(t+="&authorVid="+e.authorVid),wx.navigateTo({url:t})},handleClickToBookStore:function(){this.hidePopup()},handleReportFormId:function(e){if(e&&e.formId){if(this.reportFormIdCount>5)return;this.reportFormIdCount++,this.$store.dispatch(v.REPORT_FORMID,{formId:e.formId,scene:2})}},closeServicePromptCallback:function(){this.currentClickCardInfo&&this.handleClickCardAction(this.currentClickCardInfo),this.openFromAppScene=!1},flipCardPopupShowCallback:function(e){e.show||(this.currentClickCardInfo=null)}}},G=o(7)(E,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"flipCardGame"},[o("view",{staticClass:"flipCardGame_title"},[e._v("翻一翻")]),e._v(" "),o("view",{staticClass:"flipCardGame_desc"},[e._v("点击下方卡牌 · 好书体验卡翻出来")]),e._v(" "),e.showCardListInBanner?o("view",{staticClass:"flipCardGame_list"},[0===e.normalList.length?o("view",{staticClass:"flipCardGame_list_main"},[o("flip-card-game-card",{attrs:{card:{},size:"small",mpcomid:"0"}}),e._v(" "),o("flip-card-game-card",{attrs:{card:{},size:"small",mpcomid:"1"}}),e._v(" "),o("flip-card-game-card",{attrs:{card:{},size:"small",mpcomid:"2"}})],1):o("view",{staticClass:"flipCardGame_list_main"},e._l(e.showCardListInBanner,(function(t,i){return o("flip-card-game-card",{key:i,attrs:{card:t,size:"small",vol:e.vol,"scene-type":t.sceneType,"super-locked":!e.finishNormals,"super-flipped":e.finishNormals&&(e.superFlippedIndex>=0||e.superReceivedCardIndex>=0),"app-login-out-day":e.appLoginOut30Day,"open-from-app-scene":e.openFromAppScene,eventid:"3_0_"+i,mpcomid:"3_"+i},on:{flipCardAction:e.clickCardAction,reportFormId:e.handleReportFormId}})}))),e._v(" "),o("view",{staticClass:"flipCardGame_list_more",attrs:{eventid:"2_1"},on:{click:e.handleCheckAllCards}},[o("view",{staticClass:"flipCardGame_list_more_text"},[e._v("共"),o("br"),e._v("9"),o("br"),e._v("张")],1),e._v(" "),o("view",{staticClass:"flipCardGame_list_more_icon"})])]):e._e(),e._v(" "),o("flip-card-game-popup",{ref:"flipCardGamePopup",attrs:{"card-for-popup":e.cardForPopup,eventid:"1_2",mpcomid:"4"},on:{receiveClick:e.receiveCard,goBookDetail:e.handleClickToBookDetail,goStore:e.handleClickToBookStore,popupShow:e.flipCardPopupShowCallback}}),e._v(" "),o("customer-service-prompt",{ref:"customerServicePrompt",attrs:{intent:"翻一翻",source:"FlipCard","close-service-prompt-callback":e.closeServicePromptCallback,mpcomid:"5"}})],1)},staticRenderFns:[]},(function(e){o(870)}),null,null).exports,F=o(170),$=o(172),V=o(26),M={components:{FlipCardGameCard:F.a,FlipCardGamePopup:$.a,CustomerServicePrompt:L.default},props:{},data:function(){return{cardForPopup:{},fromPopup:!1,reportFormIdCount:0,openFromAppScene:!1,currentClickCardInfo:null,needShowDownloadGuide:!1,isFlipping:!1}},computed:l()({},Object(C.mapState)({profile:function(e){return e.profile}}),Object(C.mapGetters)(["canShow30DayCard"]),{normalList:function(){return V.f.state.normalList||[]},superList:function(){return V.f.state.superList||[]},superReceivedCardIndex:function(){return V.f.state.superReceivedCardIndex},showCardListInBanner:function(){return this.normalList.slice(0,3)},finishNormals:function(){return 6===this.normalList.reduce((function(e,t){return e+(1===t.status||3===t.status?1:0)}),0)},normalReceivedList:function(){return this.normalList.filter((function(e){return 3===e.status}))},allReceivedCount:function(){return this.normalReceivedList.length+(this.superReceivedCardIndex>=0?1:0)},receiveNothing:function(){return this.allReceivedCount<=0},superFlippedIndex:function(){return this.superList.findIndex((function(e){return 1===e.status}))},superUnlocked:function(){return this.superList.some((function(e){return 2!==e.status}))},vol:function(){return V.f.state.vol},appLoginOut30Day:function(){return this.canShow30DayCard},cardList:function(){return V.f.state.cardList||[]}}),mounted:function(){this.loadData()},methods:{generateShareOpt:function(){var e={},t=b.default.getUser();return e.title=t.name+"赠你终身免费读机会，惊喜好礼翻开必得",e.imageUrl="https://weread-1258476243.file.myqcloud.com/miniprogram/assets/flip_card_game/popup2/share.jpg",e.path="/pages/index/main?campaign=flipCardGameV2&inviteVid="+t.vid,e},loadData:function(){var e=this.$root.$mp.appOptions.query;this.fromPopup=e.popup||!1;var t={};e.inviteVid&&(t.inviteVid=e.inviteVid),this.initialParams=t,this.loadFlipCardGameInfo(t),m.default.reportExp("FlipCard","act"),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_FlipCard_Index_Exp"}),this.reportFormIdCount=0,V.f.dispatch(V.a,{reset:!0})},initAndRefreshData:function(){this.currentClickCardInfo=null;var e=this.$root.$mp.appOptions;this.openFromAppScene=y.default.openFromAppShare(e),this.reportFormIdCount=0,this.needShowDownloadGuide=!1,V.f.dispatch(V.b,{cancel:!1})},loadFlipCardGameInfo:function(e){var t=this;V.f.dispatch(V.d,e).then((function(){t.checkToJumpFlipCardDetail(),t.initAndRefreshData()}))},checkToJumpFlipCardDetail:function(){for(var e=this,t=!1,o=0;o<this.normalList.length;o++)if(1===this.normalList[o].status||3===this.normalList[o].status){t=!0;break}t&&!this.fromPopup&&setTimeout((function(){e.handleCheckAllCards()}),500)},handleCheckAllCards:function(){this.vol&&(wx.navigateTo({url:"/pages/flipCardGameV2/main?vol="+this.vol}),m.default.reportClk("FlipCard","act"))},receiveCard:function(e){var t=this;wx.showLoading({title:"领取中…"}),V.f.dispatch(V.e,{vol:this.vol,sceneType:e.sceneType,cardIndex:e.card.cardIndex}).then((function(e){wx.hideLoading(),e&&1===e.succ?(t.toast("领取成功","success"),t.hidePopup()):(t.hidePopup(),t.toast("活动火爆，请稍后再试"))})).catch((function(){wx.hideLoading(),t.hidePopup(),t.toast("活动火爆，请稍后再试")})),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_flipCardGameV2_Index_Receive"}),m.default.reportClk("FlipCard","act")},flipCard:function(e,t,o){var i=this,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isFlipping||(this.isFlipping=!0,this.showPopup(e,t,n),setTimeout((function(){i.cardForPopup.status=-1}),100),V.f.dispatch(V.c,{vol:this.vol,cardIndex:o}).then((function(e){e&&1===e.succ||(i.hidePopup(),i.toast("活动火爆，请稍后再试"),i.isFlipping=!1)})).catch((function(){i.hidePopup(),i.toast("活动火爆，请稍后再试"),i.isFlipping=!1})),this.$store.dispatch(v.KV_LOG_REPORT,{itemname:"Wp_flipCardGameV2_Index_Flip"}),m.default.reportClk("FlipCard","act"))},showPopup:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needShowDownloadGuide=i,this.cardForPopup=e,this.cardForPopup.sceneType=t,this.$nextTick((function(){o.$refs&&o.$refs.flipCardGamePopup&&o.$refs.flipCardGamePopup.show()})),m.default.reportClk("FlipCard","act")},hidePopup:function(){this.$refs.flipCardGamePopup&&this.$refs.flipCardGamePopup.hide()},clickCardAction:function(e){this.currentClickCardInfo=null,this.handleClickCardAction(e)},handleClickCardAction:function(e){var t=e.card,o=t.cardIndex,i=t.status,n=t.sceneType;if(0===i){var r=this.cardList.find((function(e){return 0===e.status}));r?(t=r).cardIndex=o:t={status:2,cardIndex:o},this.flipCard(t,n,o,e.needDownloadGuide)}else{if(4===i)return this.toast("每期最多可翻 6 张卡");this.showPopup(t,n,e.needDownloadGuid)}},handleClickToBookDetail:function(e){this.hidePopup();var t="/pages/reader/main?bookId="+e.bookId;e.authorVid&&(t+="&authorVid="+e.authorVid),wx.navigateTo({url:t})},handleClickToBookStore:function(){this.hidePopup()},handleReportFormId:function(e){if(e&&e.formId){if(this.reportFormIdCount>5)return;this.reportFormIdCount++,this.$store.dispatch(v.REPORT_FORMID,{formId:e.formId,scene:2})}},closeServicePromptCallback:function(){this.currentClickCardInfo&&this.handleClickCardAction(this.currentClickCardInfo),this.openFromAppScene=!1},flipCardPopupShowCallback:function(e){e.show||(this.currentClickCardInfo=null)},toast:function(e,t){wx.showToast({title:e,icon:t||"none",duration:2e3})},handleClickToMemCard:function(){this.$refs.customerServicePrompt&&this.$refs.customerServicePrompt.action()}}},U=o(7)(M,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"flipCardGameV2"},[o("view",{staticClass:"flipCardGameV2_title"},[e._v("翻一翻")]),e._v(" "),o("view",{staticClass:"flipCardGameV2_desc"},[e._v("点击下方卡牌 · 好书体验卡翻出来")]),e._v(" "),e.showCardListInBanner?o("view",{staticClass:"flipCardGameV2_list"},[0===e.normalList.length?o("view",{staticClass:"flipCardGameV2_list_main"},[o("flip-card-game-card",{attrs:{card:{},size:"small",mpcomid:"0"}}),e._v(" "),o("flip-card-game-card",{attrs:{card:{},size:"small",mpcomid:"1"}}),e._v(" "),o("flip-card-game-card",{attrs:{card:{},size:"small",mpcomid:"2"}})],1):o("view",{staticClass:"flipCardGameV2_list_main"},e._l(e.showCardListInBanner,(function(t,i){return o("flip-card-game-card",{key:i,attrs:{card:t,size:"small",vol:e.vol,"scene-type":t.sceneType,"super-locked":!e.finishNormals,"super-flipped":e.finishNormals&&(e.superFlippedIndex>=0||e.superReceivedCardIndex>=0),"app-login-out-day":e.appLoginOut30Day,"open-from-app-scene":e.openFromAppScene,eventid:"3_0_"+i,mpcomid:"3_"+i},on:{flipCardAction:e.clickCardAction,reportFormId:e.handleReportFormId}})}))),e._v(" "),o("view",{staticClass:"flipCardGameV2_list_more",attrs:{eventid:"2_1"},on:{click:e.handleCheckAllCards}},[o("view",{staticClass:"flipCardGameV2_list_more_text"},[e._v("共"),o("br"),e._v("9"),o("br"),e._v("张")],1),e._v(" "),o("view",{staticClass:"flipCardGameV2_list_more_icon"})])]):e._e(),e._v(" "),o("flip-card-game-popup",{ref:"flipCardGamePopup",attrs:{"card-for-popup":e.cardForPopup,"open-from-app-scene":e.openFromAppScene,eventid:"1_2",mpcomid:"4"},on:{receiveClick:e.receiveCard,goBookDetail:e.handleClickToBookDetail,goStore:e.handleClickToBookStore,popupShow:e.flipCardPopupShowCallback,memberCard:e.handleClickToMemCard}}),e._v(" "),o("customer-service-prompt",{ref:"customerServicePrompt",attrs:{intent:"翻一翻",source:"FlipCard","close-service-prompt-callback":e.closeServicePromptCallback,mpcomid:"5"}})],1)},staticRenderFns:[]},(function(e){o(872)}),null,null).exports,N=o(49),j=o(2),W={components:{CustomerServicePrompt:L.default},data:function(){return{shouldShowInfiniteTrial:!1}},computed:{infiniteTrial:function(){return d.store.state},user:function(){return N.store.state.profile.user},buttonLabel:function(){return this.infiniteTrial.redeemableInfiniteDays&&!this.infiniteTrial.redeemedInfiniteDays?"立即领取":this.infiniteTrial.appClickDays+this.infiniteTrial.appShareDays>0?"去微信读书领取 "+(this.infiniteTrial.appClickDays+this.infiniteTrial.appShareDays)+" 天无限卡":"去微信读书 app 免费阅读"}},mounted:function(){console.log("[InfiniteTrial] mounted"),this.loadData()},methods:{loadData:function(){var e=this;return console.log("[InfiniteTrial] loadData"),d.store.dispatch(d.INIT,{}).then((function(t){t.redeemableInfiniteDays>0||t.appShareDays>0||t.appClickDays>0?(m.default.reportExp("infiniteTrial","act"),e.shouldShowInfiniteTrial=!0):e.shouldShowInfiniteTrial=!1})).catch((function(t){e.shouldShowInfiniteTrial=!1,console.error("[InfiniteTrial]",t)}))},redeem:function(){if(0!==this.infiniteTrial.redeemableInfiniteDays)return m.default.reportClk("infiniteTrial","act"),wx.showLoading({title:"领取中…",mask:!0}),d.store.dispatch(d.REDEEM,{type:"click"}).then((function(){wx.hideLoading(),wx.showToast({title:"领取成功"})})).catch((function(e){console.error("领取失败：",e),wx.hideLoading(),wx.showToast({title:"领取失败，请重试",icon:"none"})}))},submitForm:function(e){var t=e.mp.detail.formId;t&&j.default.reportFormId({formId:t,scene:1})},handleGoToAppRedeemButtonClick:function(){this.$refs.customerServicePrompt&&this.$refs.customerServicePrompt.action()}}},K=o(7)(W,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.shouldShowInfiniteTrial?o("view",{staticClass:"infiniteTrial"},[o("view",{staticClass:"infiniteTrial_card"},[o("view",{staticClass:"infiniteTrial_card_title"},[e._v("\n                Hi "+e._s(e.user.name)+",\n            ")]),e._v(" "),o("view",{staticClass:"infiniteTrial_card_separator"}),e._v(" "),e.infiniteTrial.redeemableInfiniteDays>0?o("view",{staticClass:"infiniteTrial_card_subtitle"},[e._v("\n                送你 "+e._s(e.infiniteTrial.redeemableInfiniteDays)+" 天无限卡"),o("br"),e._v("\n                百万好书免费读\n            ")],1):o("view",{staticClass:"infiniteTrial_card_subtitle"},[e._v("\n                微信读书无限卡"),o("br"),e._v("\n                百万好书免费读\n            ")],1)]),e._v(" "),o("form",{attrs:{"report-submit":"true",eventid:"2_2"},on:{submit:e.submitForm}},[e.infiniteTrial.redeemableInfiniteDays>0?o("button",{staticClass:"wr_btn wr_btn_Gold infiniteTrial_button",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"3_1"},on:{click:e.redeem}},[e._v("\n                立即领取\n            ")]):o("button",{staticClass:"wr_btn wr_btn_Gold infiniteTrial_button",attrs:{"hover-class":"wr_commonActive","form-type":"submit",eventid:"3_0"},on:{click:e.handleGoToAppRedeemButtonClick}},[e._v("\n                "+e._s(e.buttonLabel)+"\n            ")])],1)],1):e._e(),e._v(" "),o("customer-service-prompt",{ref:"customerServicePrompt",attrs:{source:"infiniteTrial",mpcomid:"0"}})],1)},staticRenderFns:[]},(function(e){o(874)}),null,null).exports,q=o(83),H={components:{CustomerServicePrompt:L.default},data:function(){return{finishLoadingData:!1,buttonOpenType:"launchApp",openFromAppShare:!1,closeDownloadGuide:!1,launchAppClickTime:0,MAX_CLICK_CAPTURE_TIME:y.default.MAX_CLICK_CAPTURE_TIME}},computed:l()({},Object(C.mapGetters)({canShow30DayCard:"canShow30DayCard",shouldBlockedUser:"shouldBlockedUser"}),{splashIconBackgroundStyle:function(){return this.splashIcon?"background-image: url("+this.splashIcon+")":""},splashIcon:function(){return q.b.state.splashIcon},infiniteInfo:function(){return q.b.state.infiniteInfo}}),mounted:function(){console.log("[TrendWeekly] mounted"),this.loadData()},methods:{generateShareOpt:function(){var e={},t=b.default.getUser();return e.title="你的周三好礼已更新，福利限时领",e.imageUrl=this.splashIcon,e.path="/pages/index/main?campaign=trendWeekly&shareVid="+t.vid,e},loadData:function(){var e=this,t=this.$root.$mp.appOptions.query.shareVid||0;q.b.dispatch(q.a,{shareVid:t}).then((function(){e.finishLoadingData=!0,m.default.reportExp("trendWeekly","act")})),this.updateAndInitButtonClickType()},launchAppToShareError:function(e){console.log("err launchAppToShareError:",e),this.closeDownloadGuide||this.showDownloadGuideDialog()},captureClickButton:function(){!this.openFromAppShare&&this.canShow30DayCard?this.closeDownloadGuide||this.showDownloadGuideDialog():this.openFromAppShare&&!this.closeDownloadGuide&&(this.launchAppClickTime++,this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&(this.canShow30DayCard?this.showDownloadGuideDialog():this.buttonOpenType="share")),m.default.reportClk("trendWeekly","act")},showDownloadGuideDialog:function(){this.$refs.customerServicePrompt.action()},updateAndInitButtonClickType:function(){this.closeDownloadGuide=!1,this.launchAppClickTime=0;var e=this.$root.$mp.appOptions,t=y.default.openFromAppShare(e),o=t?"launchApp":null;null===o&&(o=this.canShow30DayCard?"":"share"),this.buttonOpenType=o,this.openFromAppShare=t},handleCheckTrendWeeklyDetail:function(){m.default.reportClk("trendWeekly","act"),wx.navigateTo({url:"/pages/trendWeekly/main"})},closeServicePromptCallback:function(){this.closeDownloadGuide=!0,this.buttonOpenType="share"}}},z=o(7)(H,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"trendWeekly"},[o("view",{staticClass:"trendWeekly_banner",attrs:{eventid:"1_0"},on:{click:e.handleCheckTrendWeeklyDetail}},[o("view",{staticClass:"trendWeekly_banner_img",style:e.splashIconBackgroundStyle}),e._v(" "),o("view",{staticClass:"trendWeekly_banner_ft"},[o("view",{staticClass:"trendWeekly_banner_ft_title"},[e.infiniteInfo&&e.infiniteInfo.day>0?[o("text",{staticClass:"trendWeekly_banner_ft_title_strong"},[e._v(e._s(e.infiniteInfo.day))]),e._v("天无限卡\n                ")]:e._e()],2),e._v(" "),o("view",{staticClass:"trendWeekly_banner_ft_icon"})])]),e._v(" "),o("view",{staticClass:"trendWeekly_tip"},[e._v("其他用户点击你分享的链接后，你将获得无限卡奖励")]),e._v(" "),e.infiniteInfo.received?o("button",{staticClass:"wr_btn wr_btn_Gold wr_btn_Big trendWeekly_actionBtn",attrs:{id:"shareTrendWeekly","hover-class":"wr_commonActive","data-imageurl":e.splashIcon,"open-type":e.buttonOpenType,"app-parameter":"weread://browse?userinfo=1&url=https%3A%2F%2Fweread.qq.com%2Fwrpage%2Fcampaign%2FshareInfinite%3Fref%3Dapp%26isAnimateNavBarBackground%3D1&style=1",eventid:"1_2"},on:{error:e.launchAppToShareError,click:e.captureClickButton}},[e._v("\n        你已成功领取 · 分享福利给朋友\n    ")]):e.infiniteInfo.day&&e.infiniteInfo.day>0?o("button",{staticClass:"wr_btn wr_btn_Gold wr_btn_Big trendWeekly_actionBtn",attrs:{id:"shareTrendWeekly1","hover-class":"wr_commonActive","data-imageurl":e.splashIcon,"open-type":e.buttonOpenType,"app-parameter":"weread://browse?userinfo=1&url=https%3A%2F%2Fweread.qq.com%2Fwrpage%2Fcampaign%2FshareInfinite%3Fref%3Dapp%26isAnimateNavBarBackground%3D1&style=1",eventid:"1_1"},on:{error:e.launchAppToShareError,click:e.captureClickButton}},[e._v("\n        分享免费领 · "+e._s(e.infiniteInfo.day)+" 天无限卡\n    ")]):e.finishLoadingData?e._e():o("button",{staticClass:"wr_btn wr_btn_Gold wr_btn_Big trendWeekly_actionBtn",attrs:{disabled:""}}),e._v(" "),o("customer-service-prompt",{ref:"customerServicePrompt",attrs:{intent:"每周热榜",source:"trendWeekly","close-service-prompt-callback":e.closeServicePromptCallback,mpcomid:"1"}})],1)},staticRenderFns:[]},(function(e){o(876)}),null,null).exports,X=o(38),J=o(60),Y=o(14),Q={components:{BookCover:Y.default,CustomerServicePrompt:L.default},data:function(){return{finishLoadingData:!1,scene:0,inviterVid:0,inviterPf:"",type:"",packetId:"",inviteButtonOpenType:"share",inviteBtnClickTimes:0}},computed:l()({},Object(C.mapGetters)({shouldBlockedUser:"shouldBlockedUser"}),{source:function(){return this.type||"invite"},readingHours:function(){return X.b.state.inviter&&X.b.state.inviter.totalReadingTime?Math.floor(X.b.state.inviter.totalReadingTime/60/60||0):0},registrationDate:function(){return this.registrationTimestamp?Object(J.default)(this.registrationTimestamp,!0):null},registrationTimestamp:function(){return X.b.state.invitee&&X.b.state.invitee.registTime?X.b.state.invitee.registTime:0},senderRegistrationTimeStamp:function(){return X.b.state.inviter&&X.b.state.inviter.registTime?X.b.state.inviter.registTime:0},senderAccountAgeDays:function(){return this.senderRegistrationTimeStamp?Math.max(Math.ceil((Date.now()-1e3*this.senderRegistrationTimeStamp)/864e5),1):"很多"},accountAgeDays:function(){return this.registrationTimestamp?Math.max(Math.ceil((Date.now()-1e3*this.registrationTimestamp)/864e5),1):"很多"},appRedeemableDays:function(){return d.store.getters.appRedeemableDays},sender:function(){return X.b.state.inviter},user:function(){return X.b.state.invitee},inviterRecentBooks:function(){return X.b.state.inviterRecentBooks}}),mounted:function(){this.loadData()},methods:{generateShareOpt:function(){var e={};return e.title="使用微信读书的第"+this.accountAgeDays+"天，"+this.user.name+"决定邀请你一起阅读",e.imageUrl="https://rescdn.qqmail.com/weread/cover/reader_share.f443a6025b.png",e.path="/pages/index/main?campaign=invitation&appInviterVid="+this.user.vid+"&from="+this.type+"&type="+this.type,e},loadData:function(){var e=this,t=this.$root.$mp.query;console.log("inviation campaign onLoad:",t),this.inviteBtnClickTimes=0,this.inviterVid=+t.inviterVid,t.appInviterVid&&(this.inviterVid=+t.appInviterVid,this.type=t.from),"invitation2020"===t.type&&t.appInviterVid&&t.appInviterPf&&(this.inviterPf=t.appInviterPf,this.type="invitation2020"),t.packetId&&(this.packetId=t.packetId,this.type=t.type),X.b.dispatch(X.a,{inviterVid:this.inviterVid,inviterPf:this.inviterPf,type:this.type,packetId:this.packetId}).then((function(){e.finishLoadingData=!0,m.default.reportExp(e.source,"act")}))},handleClickBook:function(e){wx.navigateTo({url:"/pages/reader/main?bookId="+e})},handleButtonClick:function(){m.default.reportClk(this.source,"act"),this.$refs.customerServicePrompt.action()}}},Z=o(7)(Q,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"invitation"},[o("view",{staticClass:"invitation_main"},[o("view",{staticClass:"invitation_main_hd"},[e._v("Hi, "+e._s(e.user.longName))]),e._v(" "),e.inviterRecentBooks?o("view",[e.readingHours>0?o("view",{staticClass:"invitation_main_bd invitation_main_bd1"},[e._v("\n                我是"+e._s(e.sender.name)+"，\n                我已使用微信读书"),o("text",{staticClass:"invitation_main_bd_em"},[e._v(e._s(e.senderAccountAgeDays))]),e._v("天，\n                阅读了"),o("text",{staticClass:"invitation_main_bd_em"},[e._v(e._s(e.readingHours))]),e._v("小时，这是我最近在读的书，也推荐给你！\n            ")]):o("view",{staticClass:"invitation_main_bd"},[e._v("\n                我开始在微信读书阅读了，这是我最近在读的书，也推荐给你！\n            ")]),e._v(" "),o("view",{staticClass:"book_list_main"},e._l(e.inviterRecentBooks,(function(t,i){return o("view",{key:i,attrs:{"hover-class":"wr_commonActive",eventid:"4_0_"+i},on:{click:function(o){e.handleClickBook(t.bookId)}}},[o("book-cover",{attrs:{src:t.cover,alt:t.title,width:88,"is-updated":t.hasUpdated,"is-secret":t.secret,mpcomid:"0_"+i}})],1)})))]):e.readingHours>0?o("view",{staticClass:"invitation_main_bd"},[e.sender.name?o("view",{staticClass:"invitation_main_bd_sender"},[e._v("我是 "),o("view",{staticClass:"invitation_main_bd_sender_name"},[e._v(e._s(e.sender.name))])]):e._e(),e._v(" "),o("view",[e._v("我已使用微信读书"),o("text",{staticClass:"invitation_main_bd_em"},[e._v(" "+e._s(e.senderAccountAgeDays)+" ")]),e._v("天")]),e._v(" "),o("view",[e._v("阅读了 "),o("text",{staticClass:"invitation_main_bd_em"},[e._v(e._s(e.readingHours))]),e._v(" 小时")]),e._v(" "),o("view",[e._v("很喜欢微信读书，也推荐给你！")])]):o("view",{staticClass:"invitation_main_bd"},[o("view"),e._v(" "),o("view",[e._v("我已经开始")]),e._v(" "),o("view",[e._v("在微信读书阅读了")]),e._v(" "),o("view",[e._v("很喜欢微信读书，也推荐给你")])])]),e._v(" "),o("view",[e.shouldBlockedUser?e._e():o("view",{staticClass:"invitation_action"},[e.appRedeemableDays?o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold",attrs:{eventid:"3_3"},on:{click:e.handleButtonClick}},[e._v("\n                去微信读书 app 领取 "+e._s(e.appRedeemableDays)+" 天无限卡\n            ")]):"invitation2020"===e.type?o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold",attrs:{id:"launchApp",eventid:"3_1"},on:{click:e.handleButtonClick}},[e._v("\n                邀请新朋友下载 app · 得 300 书币红包\n            ")]):o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gold",attrs:{id:"invitation","open-type":e.inviteButtonOpenType,eventid:"3_2"},on:{click:e.handleButtonClick}},[e._v("\n                邀请新朋友下载 app · 获得 3 天无限卡\n            ")])],1),e._v(" "),e.registrationDate?o("view",{staticClass:"invitation_tip"},[e._v(e._s(e.user.name)),e.user.name?o("span",[e._v("，")]):e._e(),e._v("你已于"+e._s(e.registrationDate)+"加入微信读书，欢迎回来")]):e.finishLoadingData?e._e():o("view",{staticClass:"invitation_tip"},[e._v(" ")])]),e._v(" "),o("customer-service-prompt",{ref:"customerServicePrompt",attrs:{source:"invitation",mpcomid:"1"}})],1)},staticRenderFns:[]},(function(e){o(878)}),null,null).exports,ee=o(24),te=o(1),oe=o.n(te),ie=o(8),ne=o.n(ie),re=o(4),ae=o.n(re),se=o(10),ce=o.n(se),le=o(5),ue=o.n(le),de=(o(42),o(90));ue.a.use(C.default);var pe=(i={},oe()(i,"UNLOCK_INIT_DETAIL",(function(e,t){var o=this,i=e.commit;return e.state,ce()(ae.a.mark((function e(){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.default.getUser(),e.abrupt("return",j.default.lockDetail({lockId:t.lockId,unlockerVid:n.vid}).then((function(e){return e&&i("UNLOCK_INIT_DETAIL",e),e})));case 2:case"end":return e.stop()}}),e,o)})))()})),oe()(i,"UNLOCK_CHAPTER",(function(e,t){var o=this,i=e.commit,n=e.state;return ce()(ae.a.mark((function e(){var r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(6!==n.status){e.next=2;break}return e.abrupt("return",ne.a.resolve({customErr:"解锁已达到上限"}));case 2:if(1===n.status){e.next=4;break}return e.abrupt("return",ne.a.resolve({customErr:"暂不可助力解锁章节!"}));case 4:return r=b.default.getUser(),e.abrupt("return",j.default.unlockChapter({lockId:t.lockId,unlockerVid:r.vid}).then((function(e){return e&&1===e.succ?(i("UNLOCK_CHAPTER"),e):ne.a.resolve({customErr:"解锁失败，请重试！"})})));case 6:case"end":return e.stop()}}),e,o)})))()})),i),he=(n={},oe()(n,"UNLOCK_INIT_DETAIL",(function(e,t){var o=t.lockId,i=t.bookInfo,n=t.locker,r=t.lockedState,a=t.canUnlock,s=t.chapterInfos;e.lockId=o,e.bookInfo=function(e){return{bookId:e.bookId,author:e.author,cover:e.cover,title:e.title}}(i);var c,l,u=b.default.getUser(),d={userVid:(l=n).userVid,avatar:l.avatar,name:Object(de.a)(l.name,7)};d.vid=d.userVid,c=u.vid===d.userVid;var p=[];(r=r||[]).forEach((function(e){var t=e.unlocker;t.count=1,p.push(t)}));var h,f=p.length;h=p.find((function(e){return e.userVid===u.vid}));var _=1;c?_=p.length>=s.length?-1:0:h?_=2:h||a?p.length===s.length&&(_=6):_=7,e.unlockedUsers=p,e.chapterInfos=s;var m=s.length;e.unlockedShowUsers=_e(p,m),e.isSelfSender=c,e.status=_,e.senderUser=d,e.unlockedCount=f,e.lockHint=me(s.length,f,c,_)})),oe()(n,"UNLOCK_CHAPTER",(function(e){var t=b.default.getUser(),o={userVid:t.vid,avatar:t.avatarUrl,name:t.name?t.name:t.nickName,count:1},i=e.unlockedUsers;i?i.push(o):i=[o],e.unlockedUsers=i;var n=e.chapterInfos.length;e.unlockedShowUsers=_e(i,n);var r=0;i&&i.forEach((function(e){r+=e.count})),e.unlockedCount=r,e.status=2,e.lockHint=me(e.chapterInfos.length,r,e.isSelfSender,2)})),n),fe=new C.default.Store({state:{lockId:null,bookInfo:null,chapterInfos:[],isSelfSender:!0,unlockedUsers:[],unlockedShowUsers:[],status:0,senderUser:null,lockHint:"",unlockedCount:0},actions:pe,mutations:he,plugins:[]});function _e(e,t){for(var o=t-e.length,i=e.concat(),n=0;n<o;n++)i.push({userVid:null});for(var r=5-i.length,a=0;a<r;a++)i.push({empty:!0});return i}function me(e,t,o,i){if(7===i)return"已帮好友解锁本书其他章节";if(t>=e)return"书籍章节已完成解锁";if(2===i)return"已帮助好友解锁";var n="已有"+t+"个朋友帮";return(n+=o?"你":"他")+"解锁"}var ve={components:{Avatar:ee.default,BookCover:Y.default,CustomerServicePrompt:L.default},data:function(){return{showCoverBtn:!1,finishLoadingData:!1,scene:0,inviterVid:0,type:"",inviteButtonOpenType:"share",openFromApp:!1,MAX_CLICK_CAPTURE_TIME:y.default.MAX_CLICK_CAPTURE_TIME,launchAppClickTime:0,appScheme:""}},computed:l()({},Object(C.mapState)({user:function(e){return e.profile.user}}),Object(C.mapGetters)({canShow30DayCard:"canShow30DayCard",needAuthorized:"needAuthorized",shouldBlockedUser:"shouldBlockedUser"}),{lockId:function(){return fe.state.lockId},bookInfo:function(){return fe.state.bookInfo},senderUser:function(){return fe.state.senderUser},unlockedUsers:function(){return fe.state.unlockedShowUsers},chapterInfos:function(){return fe.state.chapterInfos||[]},lockHint:function(){return fe.state.lockHint},status:function(){return fe.state.status},buttonHint:function(){return-1===this.status?"阅读解锁章节":0===this.status?"邀请更多好友助力":1===this.status?"帮好友免费解锁章节":!this.openFromApp||2!==this.status&&6!==this.status&&7!==this.status?"下载微信读书，看更多好书":"去书城看看"},buttonOpenType:function(){return!this.openFromApp||2!==this.status&&-1!==this.status&&6!==this.status&&7!==this.status?0===this.status?"share":"":"launchApp"}}),mounted:function(){console.log("[UnlockCampaign] mounted"),this.loadData()},methods:{generateShareOpt:function(){var e={};return e.title=this.user.name+"正在邀请你为他解锁章节，获取免费阅读机会",e.imageUrl="https://rescdn.qqmail.com/weread/assets/mini_program/unlock_chapter.png",e.path="/pages/index/main?campaign=unlock&lockId="+this.lockId,e},loadData:function(){var e=this,t=this.$root.$mp.appOptions;this.openFromApp=y.default.openFromAppShare(t);var o=this.$root.$mp.appOptions.query;console.log("[UnlockCampaign] loadData:",o);var i={};o.lockId&&(i.lockId=o.lockId),fe.dispatch("UNLOCK_INIT_DETAIL",i).then((function(){e.finishLoadingData=!0,e.refreshOpenAppScheme()})),m.default.reportExp("unlock","act")},handleLockChapter:function(){var e=this;wx.showLoading({title:"解锁中…"}),fe.dispatch("UNLOCK_CHAPTER",{lockId:this.lockId}).then((function(t){wx.hideLoading(),t&&1===t.succ?(wx.showToast({title:"解锁成功！",icon:"none"}),e.canShow30DayCard&&e.showDownloadGuide()):t.customErr?wx.showToast({title:t.customErr,icon:"none"}):wx.showToast({title:"解锁失败，请重试！",icon:"none"}),e.refreshOpenAppScheme()})).catch((function(e){wx.hideLoading(),console.log("err UNLOCK_CHAPTER:",e),wx.showToast({title:"解锁失败，请重试！",icon:"none"})}))},handleClickError:function(e){this.showDownloadGuide(),console.log("err handleClickError:",e)},handleClickAction:function(){-1===this.status?this.openFromApp?(this.launchAppClickTime++,this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&this.jumpMpReaderChapter()):this.jumpMpReaderChapter():1===this.status?this.handleLockChapter():this.openFromApp||2!==this.status&&6!==this.status&&7!==this.status||this.showDownloadGuide(),m.default.reportClk("unlock","act")},showDownloadGuide:function(){this.$refs.customerServicePrompt.action(),m.default.reportCardExp("unlock")},refreshOpenAppScheme:function(){this.appScheme=function(e){if(!e.openFromApp)return"";if(-1===e.status){var t=e.chapterInfos,o=-1;return t&&t.length>0&&(o=t[0].chapterUid),"weread://reading?bId="+e.bookId+"&chapterUid="+o}return 2===e.status||6===e.status?"weread://bMarket":""}({status:this.status,openFromApp:this.openFromApp,chapterInfos:this.chapterInfos,bookId:this.bookInfo.bookId})},jumpMpReaderChapter:function(){var e="/pages/reader/main?bookId="+this.bookInfo.bookId;this.chapterInfos.length>0&&(e+="&chapterUid="+this.chapterInfos[0].chapterUid),wx.navigateTo({url:e})},handleUserInfoAuthorization:function(e){var t=this;e&&e.target&&e.target.userInfo&&b.default.handleUserInfoAuthorization(e,(function(){t.$store.dispatch(v.UPDATE_USERINFO)}))},openReader:function(){wx.navigateTo({url:"/pages/reader/main?bookId="+this.bookInfo.bookId})},openPersonalProfile:function(e){null!=e&&wx.navigateTo({url:"/pages/profile/main?userVid="+e})}}},ge=o(7)(ve,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.finishLoadingData?o("view",{staticClass:"unlockCampaign"},[o("view",{staticClass:"unlockCampaign_hd"},[o("view",{staticClass:"unlockCampaign_sender"},[o("avatar",{attrs:{src:e.senderUser.avatar,alert:e.senderUser.name,"custom-class":"unlockCampaign_sender_avatar",size:44,clickable:!0,eventid:"3_0",mpcomid:"0"},on:{click:function(t){e.openPersonalProfile(e.senderUser.userVid)}}}),e._v(" "),-1===e.status||0===e.status?o("view",{staticClass:"unlockCampaign_sender_desc"},[e._v("我的书籍章节解锁")]):o("view",{staticClass:"unlockCampaign_sender_desc"},[e._v(e._s(e.senderUser.name)+"邀请你帮他免费解锁章节")])],1),e._v(" "),o("view",{staticClass:"unlockCampaign_book"},[o("book-cover",{attrs:{"custom-selector":"unlockCampaign_book_cover",src:e.bookInfo.cover,alt:e.bookInfo.title,width:64,clickable:!0,eventid:"3_1",mpcomid:"1"},on:{click:e.openReader}}),e._v(" "),o("view",{staticClass:"unlockCampaign_book_meta"},[o("view",{staticClass:"unlockCampaign_book_title"},[e._v(e._s(e.bookInfo.title))]),e._v(" "),o("view",{staticClass:"unlockCampaign_book_desc"},[e._v("共"+e._s(e.chapterInfos.length)+"个章节需解锁")])])],1)]),e._v(" "),o("view",{staticClass:"unlockCampaign_bd"},[o("view",{staticClass:"unlockCampaign_unlocker"},[o("view",{staticClass:"unlockCampaign_unlocker_title"},[e._v(e._s(e.lockHint))]),e._v(" "),o("view",{staticClass:"unlockCampaign_unlocker_list"},e._l(e.unlockedUsers,(function(t,i){return o("view",{key:i},[t.empty?o("avatar",{attrs:{size:44,"custom-class":"unlockCampaign_unlocker_avatar unlockCampaign_unlocker_avatar_Placeholder",mpcomid:"4_"+i}}):t.userVid?o("avatar",{attrs:{size:44,src:t.avatar,clickable:!0,"custom-class":"unlockCampaign_unlocker_avatar",eventid:"5_2_"+i,mpcomid:"2_"+i},on:{click:function(o){e.openPersonalProfile(t.userVid)}}}):o("avatar",{attrs:{size:44,"custom-class":"unlockCampaign_unlocker_avatar unlockCampaign_unlocker_avatar_Empty",mpcomid:"3_"+i}})],1)})))])]),e._v(" "),o("view",{staticClass:"unlockCampaign_ft"},[o("button",{directives:[{name:"show",rawName:"v-show",value:null!=e.buttonHint,expression:"buttonHint != null"}],staticClass:"wr_btn wr_btn_Big wr_btn_Campaign",attrs:{"open-type":e.buttonOpenType,"app-parameter":e.appScheme,eventid:"2_3"},on:{error:e.handleClickError,click:function(t){t.stopPropagation(),e.handleClickAction(t)}}},[e._v("\n            "+e._s(e.buttonHint)+"\n        ")])],1),e._v(" "),e.needAuthorized?o("button",{staticClass:"unlockCampaign_transparentBtn",attrs:{"open-type":"getUserInfo",eventid:"1_4"},on:{getuserinfo:e.handleUserInfoAuthorization}}):e._e(),e._v(" "),o("customer-service-prompt",{ref:"customerServicePrompt",attrs:{intent:"章节解锁",source:"unlock",mpcomid:"5"}})],1):e._e()},staticRenderFns:[]},(function(e){o(880)}),null,null).exports,be=o(34),ye=o(116),Ce=o(39),ke={components:{BookCover:Y.default},props:{bookInfo:{required:!0,type:Object},status:{type:Number,default:0},isMySelf:{type:Boolean,default:!0},senderVid:{type:Number,default:0},openFromAppScene:{type:Boolean,default:!1},appLoginOutDay:{type:Boolean,default:!1}},data:function(){return{launchAppClickTime:0,MAX_CLICK_CAPTURE_TIME:y.default.MAX_CLICK_CAPTURE_TIME,forceCancelLaunchApp:!1}},computed:{buttonLabel:function(){if(this.isMySelf)return 1===this.status?"领取成功 · 去获取更多赠书":3===this.status?"去微信读书获得最新赠书":"等待好友领取 · 去获取更多赠书";switch(this.status){case 0:return"免费领取本书";case 1:return"本书已领取 · 去获取更多赠书";case 2:return"本期已领 · 去获取更多赠书";case 3:return"赠书已过期 · 去获取最新赠书";default:return"去微信读书获得最新赠书"}},shouldSelfResponseLaunchApp:function(){return!this.isMySelf&&0===this.status||!(this.openFromAppScene&&!this.forceCancelLaunchApp)},freeLibraryButtonType:function(){return this.shouldSelfResponseLaunchApp?"":"launchApp"},shareScheme:function(){return this.isMySelf||0!==this.status?ye.a.scheme("book"):ye.a.shareScheme(this.senderId,this.bookInfo.bookId,"")}},methods:{refresh:function(){this.launchAppClickTime=0,this.forceCancelLaunchApp=!1},handleClick:function(){this.isMySelf||0!==this.status?this.openFromAppScene&&!this.forceCancelLaunchApp?(this.launchAppClickTime++,this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&(this.forceCancelLaunchApp=!0)):this.appLoginOutDay?this.jumpToFreeLibraryDetail(!0):this.jumpToFreeLibraryDetail(!1):this.handleReceiveBook(),m.default.reportClk("freeLibraryBook","act")},handleReceiveBook:function(){this.$emit("receive")},launchAppFailed:function(){Object(Ce.default)("freeLibrary",this.$root.$mp.appOptions),this.jumpToFreeLibraryDetail(!0)},jumpToFreeLibraryDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="/pages/freeLibrary/main?bookId="+this.bookInfo.bookId+"&senderId="+this.senderVid+"&type=book";e&&(t+="&showGuide=1"),wx.navigateTo({url:t}),this.launchAppClickTime=0},handleClickBook:function(){m.default.reportClk("freeLibraryBook","act");var e="/pages/reader/main?bookId="+this.bookInfo.bookId;wx.navigateTo({url:e})}}},we=o(7)(ke,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.bookInfo?o("view",{staticClass:"freeLibrary_book",attrs:{eventid:"1_0"},on:{click:e.handleClickBook}},[o("book-cover",{attrs:{"custom-selector":"freeLibrary_book_cover",src:e.bookInfo.cover,width:72,mpcomid:"0"}}),e._v(" "),o("view",{staticClass:"freeLibrary_book_meta"},[o("view",{staticClass:"freeLibrary_book_meta_title"},[e._v("\n                "+e._s(e.bookInfo.title)+"\n            ")]),e._v(" "),o("view",{staticClass:"freeLibrary_book_meta_author"},[e._v("\n                "+e._s(e.bookInfo.author)+"\n            ")]),e._v(" "),e.bookInfo.readingOrListenCnt?o("view",{staticClass:"freeLibrary_book_meta_stats"},[o("span",{staticClass:"freeLibrary_book_meta_stats_count"},[e._v(e._s(e.bookInfo.readingOrListenCnt))]),e._v(" "),o("span",{staticClass:"freeLibrary_book_meta_stats_postfix"},[e._v("人在读")])]):e._e()])],1):e._e(),e._v(" "),e.bookInfo?o("button",{staticClass:"freeLibrary_button",attrs:{"hover-class":"wr_commonActive","open-type":e.freeLibraryButtonType,"app-parameter":e.shareScheme,eventid:"1_1"},on:{click:e.handleClick,error:e.launchAppFailed}},[e._v("\n        "+e._s(e.buttonLabel)+"\n    ")]):e._e()],1)},staticRenderFns:[]},(function(e){o(884)}),null,null).exports,Ie={components:{BookCover:Y.default},props:{bookInfo:{required:!0,type:Object},senderVid:{required:!0,type:Number},authorVid:{required:!0,type:Number},openFromAppScene:{type:Boolean,default:!1},appLoginOutDay:{type:Boolean,default:!1}},data:function(){return{launchAppClickTime:0,MAX_CLICK_CAPTURE_TIME:y.default.MAX_CLICK_CAPTURE_TIME,forceCancelLaunchApp:!1}},computed:{scheme:function(){return ye.a.scheme("lecture")},freeLibraryButtonType:function(){return this.openFromAppScene&&!this.forceCancelLaunchApp?"launchApp":""}},methods:{refresh:function(){this.launchAppClickTime=0,this.forceCancelLaunchApp=!1},handleTap:function(){this.openFromAppScene&&!this.forceCancelLaunchApp?(this.launchAppClickTime++,this.launchAppClickTime>=this.MAX_CLICK_CAPTURE_TIME&&(this.forceCancelLaunchApp=!0)):this.appLoginOutDay?this.jumpToFreeLibraryDetail(!0):this.jumpToFreeLibraryDetail(!1),m.default.reportClk("freeLibraryLecture","act")},launchAppFailed:function(){Object(Ce.default)("freeLibrary",this.$root.$mp.appOptions),this.jumpToFreeLibraryDetail(!0)},jumpToFreeLibraryDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.launchAppClickTime=0;var t="/pages/freeLibrary/main?bookId="+this.bookInfo.bookId+"&senderId="+this.senderVid+"&authorVid="+this.authorVid+"&type=lecture";e&&(t+="&showGuide=1"),wx.navigateTo({url:t})},handleClickBook:function(){m.default.reportClk("freeLibraryLecture","act");var e="/pages/reader/main?bookId="+this.bookInfo.bookId+"&authorVid="+this.authorVid;wx.navigateTo({url:e})}}},Le={components:{FreeLibraryBook:we,FreeLibraryLecture:o(7)(Ie,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.bookInfo?o("view",{staticClass:"freeLibrary_book",attrs:{eventid:"1_0"},on:{click:e.handleClickBook}},[o("book-cover",{attrs:{"custom-selector":"freeLibrary_book_cover",src:e.bookInfo.cover,width:72,"audio-status":1,mpcomid:"0"}}),e._v(" "),o("view",{staticClass:"freeLibrary_book_meta"},[o("view",{staticClass:"freeLibrary_book_meta_title"},[e._v("\n                "+e._s(e.bookInfo.title)+"\n            ")]),e._v(" "),o("view",{staticClass:"freeLibrary_book_meta_author"},[e._v("\n                "+e._s(e.bookInfo.author)+"\n            ")]),e._v(" "),e.bookInfo.readingOrListenCnt?o("view",{staticClass:"freeLibrary_book_meta_stats"},[o("span",{staticClass:"freeLibrary_book_meta_stats_count"},[e._v(e._s(e.bookInfo.readingOrListenCnt))]),e._v(" "),o("span",{staticClass:"freeLibrary_book_meta_stats_postfix"},[e._v("人在听")])]):e._e()])],1):e._e(),e._v(" "),e.bookInfo?o("button",{staticClass:"freeLibrary_button",attrs:{"hover-class":"wr_commonActive","open-type":e.freeLibraryButtonType,"app-parameter":e.scheme,eventid:"1_1"},on:{click:function(t){t.stopPropagation(),e.handleTap(t)},error:e.launchAppFailed}},[e._v("\n        去免费领取听书\n    ")]):e._e()],1)},staticRenderFns:[]},(function(e){o(886)}),null,null).exports},data:function(){return{shouldShowFreeLibrary:!1,type:"book",initParams:{},openFromAppScene:!1}},computed:l()({},Object(C.mapState)({profile:function(e){return e.profile},user:function(e){return e.profile.user}}),Object(C.mapGetters)(["canShow30DayCard"]),{targetShareBookInfo:function(){return this.shareBookInfo?this.shareBookInfo.bookInfo:null},shareBookInfo:function(){return be.g.state.shareBookInfo},vol:function(){return be.g.state.vol||""},isMySelf:function(){return be.g.state.isMySelf},giftStatus:function(){return be.g.state.status},appLoginOut30Day:function(){return this.canShow30DayCard},showBookIds:function(){return be.g.state.bookIds||[]},maxShareCount:function(){return be.g.state.maxShareCount||1}}),mounted:function(){console.log("[FreeLibrary] mounted"),this.loadData()},methods:{loadData:function(){var e=this.$root.$mp.appOptions;this.openFromAppScene=y.default.openFromAppShare(e),console.log("[FreeLibrary] loadData:",this.openFromAppScene);var t=this.$root.$mp.query,o={from:"index"},i=t.type||"book";this.type=i,o.type=i,t.bookId?(o.bookId=t.bookId,t.senderId&&(o.senderId=t.senderId),t.authorVid&&(o.authorVid=t.authorVid),t.vol&&(o.vol=t.vol),this.initParams=o,this.loadRemoteData(o)):console.error("without bookId in FreeLibrary:",e)},loadRemoteData:function(e){var t=this;be.g.dispatch(be.a,e).then((function(){t.shouldShowFreeLibrary=!0,t.refreshChildComponent(),t.autoReceiveLectureBook()})).catch((function(e){t.shouldShowFreeLibrary=!1,console.error("[FreeLibrary]",e)})),"book"===this.type?m.default.reportExp("freeLibraryBook","act"):m.default.reportExp("freeLibraryLecture","act")},refreshChildComponent:function(){this.$refs.freeLectureLib&&this.$refs.freeLectureLib.refresh&&this.$refs.freeLectureLib.refresh(),this.$refs.freeBookLib&&this.$refs.freeBookLib.refresh&&this.$refs.freeBookLib.refresh()},handleReceiveBook:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||wx.showLoading({title:"领取中…",mask:!0});var o={type:this.type,bookId:this.initParams.bookId,senderVid:this.initParams.senderId,title:this.targetShareBookInfo?this.targetShareBookInfo.title:""};"lecture"===this.type&&(o.authorVid=this.initParams.authorVid),be.g.dispatch(be.b,o).then((function(o){t||(o&&1===o.succ?(wx.showToast({title:"领取成功",icon:"none"}),e.loadRemoteData(e.initParams)):wx.showToast({title:"领取失败，请重试",icon:"none"}))})).catch((function(e){console.log("err handleReceiveBook:",e),t||wx.showToast({title:"领取失败，请重试",icon:"none"})})).finally((function(){wx.hideLoading()}))},autoReceiveLectureBook:function(){"lecture"===this.type&&this.initParams.senderId&&!this.isMySelf&&0===this.giftStatus&&this.handleReceiveBook(!0)}}},Oe=o(7)(Le,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.shouldShowFreeLibrary?o("view",{staticClass:"freeLibrary"},["book"===e.type?o("free-library-book",{ref:"freeBookLib",attrs:{"book-info":e.targetShareBookInfo,"open-from-app-scene":e.openFromAppScene,"app-login-out-day":e.appLoginOut30Day,status:e.giftStatus,"is-my-self":e.isMySelf,"sender-vid":e.initParams.senderId,eventid:"2_0",mpcomid:"1"},on:{receive:e.handleReceiveBook}}):"lecture"===e.type?o("free-library-lecture",{ref:"freeLectureLib",attrs:{"book-info":e.targetShareBookInfo,"sender-vid":e.initParams.senderId,"author-vid":e.initParams.authorVid,"open-from-app-scene":e.openFromAppScene,"app-login-out-day":e.appLoginOut30Day,mpcomid:"0"}}):e._e()],1):e._e()])},staticRenderFns:[]},(function(e){o(882)}),null,null).exports,Te=o(339),xe=o.n(Te),Se=o(7)(xe.a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.shouldShowFreeLibrary?o("view",{staticClass:"freeLibrary"},["lecture"===e.type?o("free-library-lecture",{ref:"freeLectureLib",attrs:{"book-info":e.shareBookInfo,"book-stat":e.shareBook&&e.shareBook.bookStat,"sender-vid":e.initParams.senderVid,"author-vid":e.initParams.authorVid,"open-from-app-scene":e.openFromAppScene,"app-login-out-day":e.canShow30DayCard,mpcomid:"1"}}):"book"===e.type?o("free-library-book",{ref:"freeLectureLib",attrs:{"book-info":e.shareBookInfo,"book-stat":e.shareBook&&e.shareBook.bookStat,"sender-vid":e.initParams.senderVid,"open-from-app-scene":e.openFromAppScene,"app-login-out-day":e.canShow30DayCard,mpcomid:"0"}}):e._e()],1):e._e()])},staticRenderFns:[]},(function(e){o(888)}),null,null).exports,Ae=o(229),De={components:{Debut:s,FlipCardGame:G,FlipCardGameV2:U,FreeLibrary:Oe,GiveOneGetOne:D,InfiniteLottery:w,InfiniteTrial:K,Invitation:Z,TrendWeekly:z,Unlock:ge,FreeLibraryV2:Se},props:{campaignName:{type:String,required:!0}},data:function(){return{allowScenes:[1007,1008,1036,1044],scene:null,refererAppid:null}},computed:{sceneAllow:function(){return this.allowScenes.indexOf(this.scene)>-1}},mounted:function(){console.log("CampaignView campaignName = ",this.campaignName),j.default.reportKVLog({itemname:"Wp_source_"+this.campaignName});var e=this.$root.$mp.appOptions||{};this.scene=e.scene,this.refererAppid=e.referrerInfo&&e.referrerInfo.appId,console.log("CampaignView mounted scene = "+this.scene+", refererAppid = "+this.refererAppid)},onShow:function(){Ae.logger.log("CampaignView show");var e=this.$root.$mp.appOptions||{};this.scene=e.scene,this.refererAppid=e.referrerInfo&&e.referrerInfo.appId},methods:{refresh:function(){console.log("CampaignView refresh"),this.$refs[this.campaignName]&&this.$refs[this.campaignName].loadData?this.$refs[this.campaignName].loadData():console.log("err refresh loadData:",this.campaignName)},payload:function(){return this.$refs[this.campaignName]&&this.$refs[this.campaignName].payload?this.$refs[this.campaignName].payload():null},generateShareOpt:function(){return this.$refs[this.campaignName]&&this.$refs[this.campaignName].generateShareOpt?this.$refs[this.campaignName].generateShareOpt():null},notify:function(e){this.$emit("notify",e)}}},Re=o(7)(De,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",["infiniteLottery"===e.campaignName&&e.sceneAllow?o("infinite-lottery",{ref:"infiniteLottery",attrs:{eventid:"1_0",mpcomid:"0"},on:{notify:e.notify}}):e._e(),e._v(" "),"giveOneGetOne"===e.campaignName?o("give-one-get-one",{ref:"giveOneGetOne",attrs:{eventid:"1_1",mpcomid:"1"},on:{notify:e.notify}}):e._e(),e._v(" "),"flipCardGame"===e.campaignName?o("flip-card-game",{ref:"flipCardGame",attrs:{eventid:"1_2",mpcomid:"2"},on:{notify:e.notify}}):e._e(),e._v(" "),"flipCardGameV2"===e.campaignName?o("flip-card-game-v2",{ref:"flipCardGameV2",attrs:{eventid:"1_3",mpcomid:"3"},on:{notify:e.notify}}):e._e(),e._v(" "),"infiniteTrial"===e.campaignName?o("infinite-trial",{ref:"infiniteTrial",attrs:{eventid:"1_4",mpcomid:"4"},on:{notify:e.notify}}):e._e(),e._v(" "),"trendWeekly"===e.campaignName?o("trend-weekly",{ref:"trendWeekly",attrs:{eventid:"1_5",mpcomid:"5"},on:{notify:e.notify}}):e._e(),e._v(" "),"invitation"===e.campaignName?o("invitation",{ref:"invitation",attrs:{eventid:"1_6",mpcomid:"6"},on:{notify:e.notify}}):e._e(),e._v(" "),"freeLibrary"===e.campaignName?o("free-library",{ref:"freeLibrary",attrs:{eventid:"1_7",mpcomid:"7"},on:{notify:e.notify}}):e._e(),e._v(" "),"freeLibraryV2"===e.campaignName?o("free-library-v2",{ref:"freeLibraryV2",attrs:{eventid:"1_8",mpcomid:"8"},on:{notify:e.notify}}):e._e(),e._v(" "),"unlock"===e.campaignName?o("unlock",{ref:"unlock",attrs:{eventid:"1_9",mpcomid:"9"},on:{notify:e.notify}}):e._e(),e._v(" "),"debut"===e.campaignName?o("debut",{ref:"debut",attrs:{eventid:"1_10",mpcomid:"10"},on:{notify:e.notify}}):e._e()],1)},staticRenderFns:[]},(function(e){o(854)}),null,null);t.default=Re.exports},556:function(e,t,o){o.r(t);var i=o(14),n=o(0),r=o(2),a=o(3),s=(o(52),o(63)),c={props:{customSelector:{type:[Object,String],default:""}},data:function(){return{isAdLoaded:!1,adReposition:!1}},mounted:function(){this.prepareForAd()},methods:{prepareForAd:function(){Object(s.default)(a.default.getUser().SDKVersion,"1.9.97")>=0&&(this.isAdLoaded=!0)},handleAdLoad:function(){var e=this;this.$nextTick((function(){wx.nextTick((function(){e.adReposition=!0}))})),r.default.reportKVLog({itemname:"Ad_Load"})},handleAdError:function(e){this.isAdLoaded=!1,console.log("[Ad] error",e.mp.detail),r.default.reportKVLog({itemname:"Ad_Error",value:e.mp.detail.errCode})},handleAdClose:function(){this.isAdLoaded=!1,console.log("[Ad] close"),r.default.reportKVLog({itemname:"Ad_Close"})}}};o(7)(c,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isAdLoaded?o("view",{class:["wr_banner_ad_cnt",e.customSelector]},[e.isAdLoaded?o("view",{class:["wr_banner_ad",{wr_banner_ad_Show:e.adReposition}]},[o("loader",{attrs:{"is-loading":!0,"custom-selector":"index_main_loader",mpcomid:"0"}}),e._v(" "),o("ad",{attrs:{"unit-id":"adunit-c31f86664fff66cc",eventid:"2_0",mpcomid:"1"},on:{load:e.handleAdLoad,error:e.handleAdError,close:e.handleAdClose}})],1):e._e()]):e._e()},staticRenderFns:[]},(function(e){o(896)}),null,null).exports;var l={components:{BookCover:i.default},props:{dataSource:{type:Array,required:!0},panelActived:{type:Boolean,default:!1}},data:function(){return{}},methods:{handleBookClick:function(){console.log("[Index CategoryList] click book")},handleCategoryClick:function(e){var t=e.CategoryId;this.$store.dispatch(n.KV_LOG_REPORT,{itemname:"Wp_Store_Category_Clk"}),t?wx.navigateTo({url:"/pages/category/main?categoryId="+t}):wx.navigateTo({url:"/pages/categories/main"})}}},u=o(7)(l,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"index_categoryList"},e._l(e.dataSource,(function(t,i){return o("view",{key:i,staticClass:"index_categoryItem_cnt"},[o("view",{staticClass:"index_categoryItem",attrs:{"hover-class":"wr_commonActive",eventid:"2_0_"+i},on:{click:function(o){o.stopPropagation(),e.handleCategoryClick(t)}}},[o("view",{staticClass:"index_categoryItem_meta"},[o("view",{staticClass:"index_categoryItem_title"},[e._v(e._s(t.title))]),e._v(" "),o("view",{staticClass:"index_categoryItem_list"},[o("view",{staticClass:"index_categoryItem_list_item"},[e._v("\n                        1. "+e._s(t.bookTitles[0])+"\n                    ")]),e._v(" "),o("view",{staticClass:"index_categoryItem_list_item"},[e._v("\n                        2. "+e._s(t.bookTitles[1])+"\n                    ")]),e._v(" "),o("view",{staticClass:"index_categoryItem_list_item"},[e._v("\n                        3. "+e._s(t.bookTitles[2])+"\n                    ")])])]),e._v(" "),o("book-cover",{attrs:{width:88,"custom-selector":"index_categoryItem_cover",src:t.covers[0],alt:t.bookTitles[0],mpcomid:"0_"+i}})],1)])})))},staticRenderFns:[]},(function(e){o(894)}),null,null);t.default=u.exports},597:function(e,t,o){o.r(t);var i=o(5),n=o.n(i),r=o(334),a=o.n(r),s=o(7)(a.a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"index",attrs:{eventid:"0_22"},on:{touchend:e.handleScrollTouchEnd}},[o("NavigationBar",{ref:"navigationBar",attrs:{title:e.navbarTitle,"ignore-bounce-background-color":!0,"should-show-gift-collection":!1,"background-color":e.navbarBackgroundColor,mpcomid:"0"}}),e._v(" "),o("view",{directives:[{name:"show",rawName:"v-show",value:0==e.currentPageTab,expression:"currentPageTab == 0"}],staticClass:"pageTabContent"},[o("gift-collection-list",{ref:"giftCollectionList",attrs:{mpcomid:"1"}})],1),e._v(" "),o("view",{directives:[{name:"show",rawName:"v-show",value:1==e.currentPageTab,expression:"currentPageTab == 1"}],staticClass:"pageTabContent"},[o("view",{staticClass:"index_searchPlaceholder index_scroll_anchor"}),e._v(" "),e.authorized?o("view",{staticClass:"index_search",style:{top:e.searchBarTop+"px"}},[o("button",{staticClass:"index_search_bar",attrs:{"hover-class":"index_search_bar_Active",eventid:"3_0"},on:{click:e.openSearch}},[e._v(e._s(e.searchTips))]),e._v(" "),o("view",{directives:[{name:"show",rawName:"v-show",value:e.tabBarFixed,expression:"tabBarFixed"}],staticClass:"index_tab_bar_list search"},e._l(e.tabBar,(function(t,i){return o("view",{key:i,class:["index_tab_bar_item",{active:i===e.activeTab}],attrs:{"hover-class":"wr_commonActive",eventid:"4_1_"+i},on:{click:function(t){e.handleTabBarClick(i)}}},[e._v("\n                    "+e._s(t.name)+"\n                ")])})))],1):e._e(),e._v(" "),e.campaign?o("view",{staticClass:"index_campaign index_scroll_anchor"},[o("campaign-view",{ref:"campaignView",attrs:{"campaign-name":e.campaign,eventid:"3_2",mpcomid:"2"},on:{notify:e.handleCampaignViewNotification}})],1):e._e(),e._v(" "),o("view",{directives:[{name:"show",rawName:"v-show",value:e.bookStoreRecommendations.length,expression:"bookStoreRecommendations.length"}],staticClass:"index_performance_tracker"}),e._v(" "),!e.dataError&&e.recentRead&&e.recentRead.length>0?o("view",{staticClass:"index_me index_scroll_anchor",attrs:{eventid:"2_7"},on:{click:e.openBookShelf,longpress:e.handleBookShelfLongPress}},[o("view",{staticClass:"index_me_user"},[o("avatar",{attrs:{src:e.user.avatar,size:20,clickable:!1,mpcomid:"3"}}),e._v(" "),o("view",{staticClass:"index_me_user_name",attrs:{eventid:"4_3"},domProps:{textContent:e._s(e.username)},on:{click:function(t){t.stopPropagation(),e.navigateToKitchen(t)}}}),e._v(" "),e.isWxWork?o("view",{key:"wxWorkLabel",staticClass:"index_me_user_label"},[e._v("\n                    企业微信用户可免费畅读\n                ")]):e.infiniteLabelText?o("view",{key:"infiniteCardLabel",staticClass:"index_me_user_label"},[e._v("\n                    "+e._s(e.infiniteLabelText)+"\n                    "),e.newInfiniteDay?o("view",{staticClass:"index_me_user_label_dot"}):e._e()]):e._e(),e._v(" "),o("view",{staticClass:"index_me_user_space"}),e._v(" "),o("view",{staticClass:"index_me_user_feedback",attrs:{"aria-role":"button","hover-class":"wr_commonActive",eventid:"4_4"},on:{click:function(t){t.stopPropagation(),e.openSetting(t)}}},[e._v("\n                    设置\n                ")])],1),e._v(" "),o("view",{staticClass:"index_me_books"},[o("view",{class:["index_me_books_recentReading",{index_me_books_recentReading_Compact:e.recentRead.length<4}]},e._l(e.recentRead,(function(t,i){return o("book-cover",{key:i,attrs:{src:t.cover,clickable:!0,"is-secret":t.secret,"is-updated":t.hasUpdated,"audio-status":t.isLecture?1:0,width:54,mp:t.mpCover,eventid:"5_5_"+i,mpcomid:"4_"+i},on:{click:function(o){e.openBook(t.bookId,t.isLecture,t.hasLecture,"Wp_Store_recentBook_Clk")}}})}))),e._v(" "),o("view",{staticClass:"index_me_books_bookshelf",attrs:{"hover-class":"wr_commonActive","aria-role":"button",eventid:"4_6"},on:{click:function(t){t.stopPropagation(),e.openBookShelf(t)}}},[e._v("\n                    书架\n                ")])])]):e._e(),e._v(" "),e.isWxWork&&e.wxWorkBanner?o("view",{staticClass:"index_banner"},[o("img",{staticClass:"index_banner_image",attrs:{src:e.wxWorkBanner,mode:"widthFix",eventid:"3_8"},on:{click:function(t){e.handleWxWorkBannerImageClick()}}})]):!e.isWxWork&&e.banner&&e.banner.src?o("view",{staticClass:"index_banner"},[o("img",{staticClass:"index_banner_image",attrs:{src:e.banner.src,"aria-label":e.banner.title,mode:"widthFix",eventid:"3_9"},on:{click:function(t){e.handleBannerImageClick(e.banner.jumpUrl,e.banner.appId)}}})]):e._e(),e._v(" "),o("view",{staticClass:"index_tab"},[o("view",{staticClass:"index_tab_bar scroll"},[o("view",{staticClass:"index_tab_bar_list"},e._l(e.tabBar,(function(t,i){return o("view",{key:i,class:["index_tab_bar_item",{active:i===e.activeTab}],attrs:{"hover-class":"wr_commonActive",eventid:"5_10_"+i},on:{click:function(t){e.handleTabBarClick(i)}}},[e._v("\n                        "+e._s(t.name)+"\n                    ")])})))])]),e._v(" "),o("view",{staticClass:"index_main"},[o("loader",{attrs:{"custom-selector":"index_main_loader",mpcomid:"5"}}),e._v(" "),o("swiper",{staticClass:"index_main_swiper",style:{height:e.listHeight},attrs:{"scroll-x":"true","scroll-with-animation":"true",duration:"300","easing-function":"linear","skip-hidden-item-layout":"true",interval:"3000",autoplay:e.autoSwiper,current:e.activeTab,eventid:"3_11"},on:{animationfinish:e.handleSwiperAnimationFinish,change:e.handleSwiperChanged}},e._l(e.tabBar,(function(t,i){return o("swiper-item",{key:i,class:["index_main_swiper_item"],attrs:{mpcomid:"10_"+i}},[o("view",{class:["index_main_swiper_item_category","index_main_swiper_item_category_"+i]},[0===t.categoryId?o("recommended-list",{attrs:{"panel-actived":i===e.activeTab,"data-source":e.bookStoreRecommendations,mpcomid:"9_"+i}}):1===t.categoryId?o("category-list",{attrs:{"panel-actived":i===e.activeTab,"data-source":e.bookStoreCategoryList,mpcomid:"6_"+i}}):2===t.categoryId?o("ranking-list",{attrs:{"data-source":e.bookStoreRankingList,mpcomid:"7_"+i}}):o("common-book-list",{attrs:{"panel-actived":i===e.activeTab,"data-source":e.bookStoreCategoryDetails(t.categoryId,i),mpcomid:"8_"+i}})],1)])})))],1),e._v(" "),e.hasMore?o("view",{staticClass:"index_loadMore"},[o("loader",{attrs:{"custom-selector":"index_loadMore_loader",mpcomid:"11"}})],1):e._e()]),e._v(" "),o("view",{directives:[{name:"show",rawName:"v-show",value:2==e.currentPageTab,expression:"currentPageTab == 2"}],staticClass:"pageTabContent"},[o("view",{staticClass:"index_searchPlaceholder index_scroll_anchor"}),e._v(" "),e.authorized?o("view",{staticClass:"index_search",style:{top:e.searchBarTop+"px"}},[o("button",{staticClass:"index_search_bar",attrs:{"hover-class":"index_search_bar_Active",eventid:"3_12"},on:{click:e.openSearch}},[e._v(e._s(e.searchTips))])],1):e._e(),e._v(" "),o("view",{directives:[{name:"show",rawName:"v-show",value:e.bookStoreRecommendations.length,expression:"bookStoreRecommendations.length"}],staticClass:"index_performance_tracker"}),e._v(" "),!e.dataError&&e.recentRead&&e.recentRead.length>0?o("view",{staticClass:"index_me index_scroll_anchor",attrs:{eventid:"2_17"},on:{click:e.openBookShelf}},[o("view",{staticClass:"index_me_user"},[o("avatar",{attrs:{src:e.user.avatar,size:20,clickable:!1,mpcomid:"12"}}),e._v(" "),o("view",{staticClass:"index_me_user_name",attrs:{eventid:"4_13"},domProps:{textContent:e._s(e.username)},on:{click:function(t){t.stopPropagation(),e.navigateToKitchen(t)}}}),e._v(" "),e.infiniteLabelText?o("view",{key:"infiniteCardLabel",staticClass:"index_me_user_label"},[e._v("\n                    "+e._s(e.infiniteLabelText)+"\n                    "),e.newInfiniteDay?o("view",{staticClass:"index_me_user_label_dot"}):e._e()]):e._e(),e._v(" "),o("view",{staticClass:"index_me_user_space"}),e._v(" "),o("view",{staticClass:"index_me_user_feedback",attrs:{"aria-role":"button","hover-class":"wr_commonActive",eventid:"4_14"},on:{click:function(t){t.stopPropagation(),e.openSetting(t)}}},[e._v("\n                    设置\n                ")])],1),e._v(" "),o("view",{staticClass:"index_me_books"},[2==e.currentPageTab?o("view",{class:["index_me_books_recentReading",{index_me_books_recentReading_Compact:e.recentRead.length<4}]},e._l(e.recentRead,(function(t,i){return o("book-cover",{key:i,attrs:{src:t.cover,clickable:!0,"is-secret":t.secret,"is-updated":t.hasUpdated,"audio-status":t.isLecture?1:0,width:54,mp:t.mpCover,eventid:"5_15_"+i,mpcomid:"13_"+i},on:{click:function(o){e.openBook(t.bookId,t.isLecture,t.hasLecture,"Wp_Store_recentBook_Clk")}}})}))):e._e(),e._v(" "),o("view",{staticClass:"index_me_books_bookshelf",attrs:{"hover-class":"wr_commonActive","aria-role":"button",eventid:"4_16"},on:{click:function(t){t.stopPropagation(),e.openBookShelf(t)}}},[e._v("\n                    书架\n                ")])])]):e._e(),e._v(" "),o("index-lecture-list",{ref:"indexLectureList",attrs:{mpcomid:"14"}})],1),e._v(" "),o("view",{staticClass:"pageTabBar"},e._l(e.pageTabBar,(function(t,i){return o("button",{key:i,class:["pageTabBar_btn",e.currentPageTab===i?"pageTabBar_btn_Active":""],attrs:{"hover-class":"wr_commonActive",eventid:"2_18_"+i},on:{click:function(t){e.handlePageTabClick(i)}}},[o("view",{class:["pageTabBar_btn_icon",{welfare:0===i,read:1===i,lecture:2===i}]}),e._v(" "),o("view",{staticClass:"pageTabBar_btn_text"},[e._v("\n                "+e._s(t)+"\n            ")])])}))),e._v(" "),e.shouldShowBottomPromt?o("view",{staticClass:"index_bottomDownloadTip",attrs:{"hover-class":"wr_commonActive",eventid:"1_19"},on:{click:e.handleBottomDownloadTipClick}},[o("view",{staticClass:"index_bottomDownloadTip_icon"}),e._v(" "),o("view",{staticClass:"index_bottomDownloadTip_text"},[e._v("\n            下载微信读书 app · 阅读百万好书\n        ")])]):e._e(),e._v(" "),o("pin-tips",{attrs:{mpcomid:"15"}}),e._v(" "),o("infinite-card-prompt",{ref:"infiniteCardPrompt",attrs:{eventid:"1_20",mpcomid:"16"},on:{notify:e.handleCampaignViewNotification}}),e._v(" "),e.authorized&&e.dataError?o("empty-view",{attrs:{title:"加载失败","button-label":"重试",eventid:"1_21",mpcomid:"17"},on:{click:e.loadData}}):e._e(),e._v(" "),o("CustomerServicePrompt",{ref:"customerServicePrompt",attrs:{intent:e.csPromptIntent,source:e.csPromptSource,mpcomid:"18"}}),e._v(" "),o("mini-lecture-player",{attrs:{mpcomid:"19"}}),e._v(" "),o("xiaowei-authorization",{ref:"xiaoweiAuthorization",attrs:{"should-auth":e.shouldAuthXiaoWei,"hide-modal":e.handleHideXiaoweiModal,mpcomid:"20"}}),e._v(" "),o("privacy-agreement",{ref:"privacyAgreement",attrs:{mpcomid:"21"}})],1)},staticRenderFns:[]},(function(e){o(848)}),null,null).exports;new n.a(s).$mount()},620:function(e,t,o){o.r(t);var i=o(14),n=o(68),r=o(97),a=o(0),s={components:{BookCover:i.default,BookRatingItemLabel:n.default,ReadingCount:r.default},props:{dataSource:{type:Array,required:!0},panelActived:{type:Boolean,default:!1}},data:function(){return{}},computed:{displayBooks:function(){return this.dataSource&&this.dataSource.books&&0!==this.dataSource.books.length?this.dataSource.books.map((function(e){return e.bookInfo.newRating&&(e.bookInfo.percentageNewRating=e.bookInfo.newRating?(e.bookInfo.newRating/10).toFixed(1):""),e})):[]}},methods:{handleBookClick:function(e){if(e&&e.bookInfo&&e.bookInfo.bookId){var t=e.bookInfo.bookId;this.$store.dispatch(a.KV_LOG_REPORT,{itemname:"Wp_Store_Recommend_Category_Book_Clk"}),wx.navigateTo({url:"/pages/reader/main?bookId="+t})}}}},c=o(7)(s,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"index_commonBookList"},e._l(e.displayBooks,(function(t,i){return o("view",{key:i,staticClass:"index_commonBookItem",attrs:{"hover-class":"index_commonBookItem_Active",eventid:"1_0_"+i},on:{click:function(o){o.stopPropagation(),e.handleBookClick(t)}}},[o("view",{staticClass:"index_commonBookItem_index"},[e._v(e._s(i+1))]),e._v(" "),o("book-cover",{attrs:{width:64,"custom-selector":"index_commonBookItem_cover",src:t.bookInfo.cover,alt:t.bookInfo.title,mpcomid:"0_"+i}}),e._v(" "),o("view",{staticClass:"index_commonBookItem_meta"},[o("view",{staticClass:"index_commonBookItem_title",domProps:{textContent:e._s(t.bookInfo.title)}}),e._v(" "),o("view",{staticClass:"index_commonBookItem_author"},[e._v(e._s(t.bookInfo.author))]),e._v(" "),t.bookInfo&&t.bookInfo.percentageNewRating?o("view",{staticClass:"index_commonBookItem_rating"},[o("view",{staticClass:"index_commonBookItem_rating_value"},[e._v("\n                    推荐值 \n                    "),o("view",{staticClass:"index_commonBookItem_rating_value_number"},[e._v("\n                        "+e._s(t.bookInfo.percentageNewRating)+"%\n                    ")])]),e._v(" "),t.bookInfo.newRatingDetail&&t.bookInfo.newRatingDetail.title?o("book-rating-item-label",{attrs:{title:t.bookInfo.newRatingDetail.title,rating:t.bookInfo.percentageNewRating,type:"listItem",mpcomid:"1_"+i}}):e._e()],1):e._e()]),e._v(" "),o("reading-count",{attrs:{"reading-count":t.readingCount,mpcomid:"2_"+i}})],1)})))},staticRenderFns:[]},(function(e){o(898)}),null,null);t.default=c.exports},621:function(e,t,o){o.r(t);var i=o(14),n=o(0),r={components:{BookCover:i.default},props:{dataSource:{type:Array,required:!0}},data:function(){return{}},methods:{handleBookClick:function(e){if(e&&e.bookInfo&&e.bookInfo.bookId){var t=e.bookInfo.bookId;this.$store.dispatch(n.KV_LOG_REPORT,{itemname:"Wp_Store_Ranking_Book_Clk"});var o="/pages/reader/main?bookId="+t;e.lectureInfo&&e.lectureInfo.user&&e.lectureInfo.user.userVid&&(o+="&authorVid="+e.lectureInfo.user.userVid),wx.navigateTo({url:o})}},handleRankingMoreClick:function(e){var t=e.CategoryId;this.$store.dispatch(n.KV_LOG_REPORT,{itemname:"Wp_Store_Ranking_Item_Clk"}),t?wx.navigateTo({url:"/pages/top200/main?categoryId="+t}):wx.navigateTo({url:"/page/top200/main?categoryId=rising"})}}},a=o(7)(r,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"index_rankingList"},e._l(e.dataSource,(function(t,i){return o("view",{key:i,class:["index_rankingItem",{index_rankingItem_Grid:t.style&&25!==t.style.view}]},[o("view",{staticClass:"index_rankingItem_hd"},[o("view",{staticClass:"index_rankingItem_title",style:{backgroundImage:"url("+t.ranklistCover.chart_title+")"},attrs:{"aria-label":t.title}})]),e._v(" "),o("view",{staticClass:"index_rankingItem_bd"},e._l(t.lectureBooks,(function(t,n){return o("view",{key:n,staticClass:"index_rankingItem_book",attrs:{"hover-class":"wr_commonActive",eventid:"3_0_"+i+"-"+n},on:{click:function(o){e.handleBookClick(t)}}},[o("book-cover",{attrs:{width:44,"custom-selector":"index_rankingItem_book_cover",src:t.bookInfo&&t.bookInfo.cover,alt:t.bookInfo&&t.bookInfo.title,"audio-status":t.lectureInfo?1:0,mpcomid:"0_"+i+"-"+n}}),e._v(" "),o("view",{staticClass:"index_rankingItem_book_meta"},[o("view",{staticClass:"index_rankingItem_book_rank"},[e._v(e._s(n+1))]),e._v(" "),o("view",{staticClass:"index_rankingItem_book_title"},[e._v(e._s(t.bookInfo&&t.bookInfo.title))]),e._v(" "),o("view",{staticClass:"index_rankingItem_book_author"},[e._v(e._s(t.bookInfo&&t.bookInfo.author))])])],1)}))),e._v(" "),o("view",{staticClass:"index_rankingItem_ft"},[o("button",{staticClass:"wr_btn wr_btn_Big wr_btn_Gray index_rankingItem_more",attrs:{"hover-class":"wr_commonActive",eventid:"3_1_"+i},on:{click:function(o){e.handleRankingMoreClick(t)}}},[e._v("\n                查看全部\n            ")])],1)])})))},staticRenderFns:[]},(function(e){o(900)}),null,null);t.default=a.exports},622:function(e,t,o){o.r(t);var i=o(14),n=o(68),r=o(0),a={components:{BookCover:i.default,BookRatingItemLabel:n.default},props:{dataSource:{type:Array,required:!0},panelActived:{type:Boolean,default:!1}},data:function(){return{}},methods:{handleBookClick:function(e){if(e&&e.bookId){var t=e.bookId;this.$store.dispatch(r.KV_LOG_REPORT,{itemname:"Wp_Store_Recommend_Book_Clk"}),wx.navigateTo({url:"/pages/reader/main?bookId="+t})}}}},s=o(7)(a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"index_recommendedList"},e._l(e.dataSource,(function(t,i){return o("view",{key:i,staticClass:"index_recommendedItem",attrs:{"hover-class":"index_recommendedItem_Active",eventid:"1_0_"+i},on:{click:function(o){o.stopPropagation(),e.handleBookClick(t)}}},[o("book-cover",{attrs:{width:56,"custom-selector":"index_recommendedItem_cover",src:t.cover,alt:t.title,mpcomid:"0_"+i}}),e._v(" "),o("view",{staticClass:"index_recommendedItem_meta"},[o("view",{staticClass:"index_recommendedItem_title"},[e._v(e._s(t.title))]),e._v(" "),o("view",{staticClass:"index_recommendedItem_desc"},[o("text",{staticClass:"index_recommendedItem_desc_author"},[e._v(e._s(t.author))]),e._v(" "),t.percentageNewRating?o("text",{staticClass:"index_recommendedItem_desc_separator"},[e._v(" | ")]):e._e(),e._v(" "),t.percentageNewRating?o("view",{staticClass:"index_recommendedItem_desc_rating"},[e._v("\n                    推荐值 \n                    "),o("view",{staticClass:"index_recommendedItem_desc_rating_number"},[e._v("\n                        "+e._s(t.percentageNewRating)+"%\n                    ")])]):e._e(),e._v(" "),t.percentageNewRating&&t.newRatingDetail&&t.newRatingDetail.title?o("book-rating-item-label",{attrs:{title:t.newRatingDetail.title,rating:t.percentageNewRating,type:"listItem",mpcomid:"1_"+i}}):e._e()],1),e._v(" "),o("view",{staticClass:"index_recommendedItem_reason"},[e._v(e._s(t.reason))])])],1)})))},staticRenderFns:[]},(function(e){o(902)}),null,null);t.default=s.exports},623:function(e,t,o){o.r(t);var i={props:{shouldAuth:{type:Boolean,required:!0},hideModal:{type:Function,required:!1,default:function(){}}},data:function(){return{isMp:!1,showView:!1}},methods:{show:function(e){this.showView=!0,"mp"===e?this.isMp=!0:"app"===e&&(this.isMp=!1)},handleButtonClick:function(e){this.isMp&&wx.navigateBackMiniProgram({extraData:{result:e}}),this.showView=!1,this.$props.hideModal()},launchAppError:function(e){this.showView=!1,this.$props.hideModal(),console.log("XiaoweiAuthorization error",e.detail.errMsg)}}},n=o(7)(i,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.showView?o("view",{staticClass:"xw_auth_container",attrs:{catchtouchmove:"preventTouchMove"}},[e._m(0),e._v(" "),e.isMp?o("view",{staticClass:"xw_auth_title"},[e._v("同意登录后，腾讯小微小程序将获得以下权限：")]):o("view",{staticClass:"xw_auth_title"},[e._v("同意登录后，腾讯小微将获得以下权限：")]),e._v(" "),o("view",{staticClass:"xw_auth_subtitle"},[e._v("\n        1、你的账号信息（昵称、头像）\n    ")]),e._v(" "),o("view",{staticClass:"xw_auth_subtitle"},[e._v("\n        2、你在微信听书上的个人信息（会员权益、订阅专辑、收听记录等）\n    ")]),e._v(" "),e.isMp?o("view",{staticClass:"xw_auth_button"},[o("button",{staticClass:"xw_auth_agree",attrs:{eventid:"2_0"},on:{click:function(t){e.handleButtonClick("0")}}},[e._v("\n            同意\n        ")]),e._v(" "),o("button",{staticClass:"xw_auth_cancel",attrs:{eventid:"2_1"},on:{click:function(t){e.handleButtonClick("-1")}}},[e._v("\n            取消\n        ")])],1):!e.isMp&&e.shouldAuth?o("view",{staticClass:"xw_auth_button"},[o("button",{staticClass:"xw_auth_agree",attrs:{"open-type":"launchApp","app-parameter":"result=0",eventid:"2_2"},on:{error:e.launchAppError,click:function(t){t.stopPropagation(),e.handleButtonClick(t)}}},[e._v("\n            同意\n        ")]),e._v(" "),o("button",{staticClass:"xw_auth_cancel",attrs:{"open-type":"launchApp","app-parameter":"result=-1",eventid:"2_3"},on:{error:e.launchAppError,click:function(t){t.stopPropagation(),e.handleButtonClick(t)}}},[e._v("\n            取消\n        ")])],1):o("view",{staticClass:"xw_auth_button"},[o("button",{staticClass:"xw_auth_agree",attrs:{"open-type":"launchApp","app-parameter":"result=-2",eventid:"2_4"},on:{error:e.launchAppError,click:function(t){t.stopPropagation(),e.handleButtonClick(t)}}},[e._v("\n            同意\n        ")]),e._v(" "),o("button",{staticClass:"xw_auth_cancel",attrs:{"open-type":"launchApp","app-parameter":"result=-2",eventid:"2_5"},on:{error:e.launchAppError,click:function(t){t.stopPropagation(),e.handleButtonClick(t)}}},[e._v("\n            取消\n        ")])],1)]):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("view",{staticClass:"xw_auth_icons"},[t("view",{staticClass:"xw_auth_icon_xw"},[t("view",{staticClass:"xw_auth_icon_xwicon"}),this._v(" "),t("view",{staticClass:"xw_auth_icon_xwtext"},[this._v("腾讯小微")])]),this._v(" "),t("view",{staticClass:"xw_auth_icon_exchange"}),this._v(" "),t("view",{staticClass:"xw_auth_icon_wehear"},[t("view",{staticClass:"xw_auth_icon_wehearicon"}),this._v(" "),t("view",{staticClass:"xw_auth_icon_weheartext"},[this._v("微信听书")])])])}]},(function(e){o(904)}),null,null);t.default=n.exports},634:function(e,t,o){o.r(t);var i=o(336),n=o.n(i),r=o(7)(n.a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",{staticClass:"indexLectureList"},[e.onLoadError?o("empty-view",{attrs:{title:"加载失败","button-label":"重试",eventid:"1_4",mpcomid:"3"},on:{click:e.initData}}):o("view",{staticClass:"indexLectureList_main"},[e.indexLectureListGuessBooks.length||e.indexLectureList.length?e._e():o("loader",{attrs:{"custom-selector":"indexLectureList_loader",mpcomid:"0"}}),e._v(" "),e.indexLectureListGuessBooks&&e.indexLectureListGuessBooks.length&&!e.closeRecommend?o("view",{staticClass:"indexLectureList_section"},[o("view",{staticClass:"indexLectureList_section_title"},[e._v("猜你喜欢")]),e._v(" "),o("view",{staticClass:"indexLectureList_section_list"},e._l(e.indexLectureListGuessBooks,(function(t,i){return o("view",{key:i,staticClass:"indexLectureList_book",attrs:{"hover-class":"wr_commonActive",eventid:"4_0_"+i},on:{click:function(o){e.handleLectureClick(t.bookId,t.lectureInfo)}}},[o("book-cover",{attrs:{"custom-selector":"indexLectureList_book_cover",src:t.cover,alt:t.title,width:56,"audio-status":1,mpcomid:"1_"+i}}),e._v(" "),o("view",{staticClass:"indexLectureList_book_meta"},[o("view",{staticClass:"indexLectureList_book_title"},[e._v(e._s(t.title))]),e._v(" "),t.lectureInfo&&t.lectureInfo.user&&t.lectureInfo.user.name?o("view",{staticClass:"indexLectureList_book_author"},[e._v(e._s(t.author)+" | 讲书人："+e._s(t.lectureInfo.user.name))]):o("view",{staticClass:"indexLectureList_book_author"},[e._v(e._s(t.author)+" | AI语音朗读")]),e._v(" "),t.reason||t.listenCount||t.readingCount?o("view",{staticClass:"indexLectureList_book_desc"},[e._v(e._s(t.reason||(t.listenCount||t.readingCount)+"人今日在听"))]):e._e()])],1)}))),e._v(" "),o("view",{staticClass:"indexLectureList_section_action"},[o("button",{staticClass:"indexLectureList_section_action_btn",attrs:{"hover-class":"wr_commonActive",eventid:"4_1"},on:{click:e.handleSectionShuffle}},[e._v("\n                    换一批\n                ")])],1)]):e._e(),e._v(" "),e._l(e.indexLectureList,(function(t,i){return o("view",{key:i,staticClass:"indexLectureList_section"},[t.titleImg?o("view",{staticClass:"indexLectureList_section_title",style:{backgroundImage:"url("+t.titleImg+")"}}):o("view",{staticClass:"indexLectureList_section_title"},[e._v(e._s(t.title))]),e._v(" "),t.books?o("view",{staticClass:"indexLectureList_section_list"},e._l(t.books,(function(t,n){return o("view",{key:n,staticClass:"indexLectureList_book",attrs:{"hover-class":"wr_commonActive",eventid:"4_2_"+i+"-"+n},on:{click:function(o){e.handleLectureClick(t.bookInfo.bookId,t.lectureInfo)}}},[o("book-cover",{attrs:{"custom-selector":"indexLectureList_book_cover",src:t.bookInfo.cover,alt:t.bookInfo.title,width:56,"audio-status":1,mpcomid:"2_"+i+"-"+n}}),e._v(" "),o("view",{staticClass:"indexLectureList_book_meta"},[o("view",{staticClass:"indexLectureList_book_title"},[e._v(e._s(t.bookInfo.title))]),e._v(" "),t.lectureInfo&&t.lectureInfo.user&&t.lectureInfo.user.name?o("view",{staticClass:"indexLectureList_book_author"},[e._v(e._s(t.bookInfo.author)+" | 讲书人："+e._s(t.lectureInfo.user.name))]):o("view",{staticClass:"indexLectureList_book_author"},[e._v(e._s(t.bookInfo.author)+" | AI语音朗读")]),e._v(" "),t.reason||t.listenCount||t.readingCount?o("view",{staticClass:"indexLectureList_book_desc"},[e._v(e._s(t.reason||(t.listenCount||t.readingCount)+"人今日在听"))]):e._e()])],1)}))):e._e(),e._v(" "),o("view",{staticClass:"indexLectureList_section_action"},[o("button",{staticClass:"indexLectureList_section_action_btn",attrs:{"hover-class":"wr_commonActive",eventid:"4_3_"+i},on:{click:function(o){e.handleSectionMore(t.categoryId)}}},[e._v("\n                    查看更多\n                ")])],1)])}))],2)],1)},staticRenderFns:[]},(function(e){o(852)}),null,null);t.default=r.exports},635:function(e,t,o){o.r(t);var i=o(342),n=o.n(i),r=o(7)(n.a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("bottom-modal",{ref:"modal",attrs:{"show-animation":!0,"custom-selector":"privacy_agreement",mpcomid:"0"}},[o("view",{staticClass:"privacy_agreement_title"},[e._v("微信读书隐私政策")]),e._v(" "),o("view",{staticClass:"privacy_agreement_main"},[o("view",{staticClass:"privacy_agreement_content"},[e._v("\n            欢迎你使用微信读书！请仔细阅读以下内容，并作出适当的选择:\n        ")]),e._v(" "),o("view",{staticClass:"privacy_agreement_section"},[o("view",{staticClass:"privacy_agreement_section_title"},[e._v("隐私政策概要")]),e._v(" "),o("view",{staticClass:"privacy_agreement_content"},[e._v("\n                主要说明：我们所处理的信息种类、方式和目的；你所享有的权益；第三方插件信息等。\n            ")]),e._v(" "),o("view",{staticClass:"privacy_agreement_link",attrs:{"hover-class":"wr_commonActive",eventid:"3_0"},on:{click:e.gotoPrivacyAgreement}},[e._v("点击阅读《隐私政策（小程序）》完整版 >")])])]),e._v(" "),o("view",{staticClass:"privacy_agreement_footer"},[o("view",{staticClass:"privacy_agreement_button active",attrs:{"hover-class":"wr_commonActive",eventid:"2_1"},on:{click:e.handleAgree}},[e._v("同意并继续")]),e._v(" "),o("view",{staticClass:"privacy_agreement_button",attrs:{"hover-class":"wr_commonActive",eventid:"2_2"},on:{click:e.handleDisagree}},[e._v("取消")])])])},staticRenderFns:[]},(function(e){o(906)}),null,null);t.default=r.exports},668:function(e,t,o){o.r(t);var i=o(338),n=o.n(i),r=o(7)(n.a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.bookInfo?o("view",{staticClass:"debut_campaign_book",attrs:{eventid:"1_0"},on:{click:e.handleBookClick}},[o("book-cover",{attrs:{"custom-selector":"debut_campaign_book_cover",src:e.bookInfo.cover,width:72,mpcomid:"0"}}),e._v(" "),o("view",{staticClass:"debut_campaign_book_meta"},[o("view",{staticClass:"debut_campaign_book_meta_title"},[e._v("\n                "+e._s(e.bookInfo.title)+"\n            ")]),e._v(" "),o("view",{staticClass:"debut_campaign_book_meta_author"},[e._v("\n                "+e._s(e.bookInfo.author)+"\n            ")]),e._v(" "),e.readingCount?o("view",{staticClass:"debut_campaign_book_meta_stats"},[o("span",{staticClass:"debut_campaign_book_meta_stats_count"},[e._v(e._s(e.readingCountText))]),e._v(" "),o("span",{staticClass:"debut_campaign_book_meta_stats_postfix"},[e._v("人在读")])]):e._e()])],1):e._e(),e._v(" "),e.bookInfo?o("button",{staticClass:"debut_campaign_button",attrs:{"hover-class":"wr_commonActive","open-type":e.debutButtonType,"app-parameter":e.scheme,eventid:"1_1"},on:{click:e.handleActionButtonClick,error:e.launchAppFailed}},[e._v("\n        "+e._s(e.actionButtonLabel)+"\n    ")]):e._e()],1)},staticRenderFns:[]},(function(e){o(858)}),null,null);t.default=r.exports},669:function(e,t,o){o.r(t);var i=o(340),n=o.n(i),r=o(7)(n.a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.bookInfo?o("view",{staticClass:"freeLibrary_book",attrs:{eventid:"1_0"},on:{click:e.handleClickBook}},[o("book-cover",{attrs:{"custom-selector":"freeLibrary_book_cover",src:e.bookInfo.cover,width:72,"audio-status":1,mpcomid:"0"}}),e._v(" "),o("view",{staticClass:"freeLibrary_book_meta"},[o("view",{staticClass:"freeLibrary_book_meta_title"},[e._v("\n                "+e._s(e.bookInfo.title)+"\n            ")]),e._v(" "),o("view",{staticClass:"freeLibrary_book_meta_author"},[e._v("\n                "+e._s(e.bookInfo.author)+"\n            ")]),e._v(" "),e.bookStat?o("view",{staticClass:"freeLibrary_book_meta_stats"},[o("span",{staticClass:"freeLibrary_book_meta_stats_count"},[e._v(e._s(e.formattedBookStat))]),e._v(" "),o("span",{staticClass:"freeLibrary_book_meta_stats_postfix"},[e._v("人在听")])]):e._e()])],1):e._e(),e._v(" "),e.bookInfo?o("button",{staticClass:"freeLibrary_button",attrs:{"hover-class":"wr_commonActive","open-type":e.freeLibraryButtonType,"app-parameter":e.scheme,eventid:"1_1"},on:{click:function(t){t.stopPropagation(),e.handleTap(t)},error:e.launchAppFailed}},[e._v("\n        免费领取10本听书\n    ")]):e._e()],1)},staticRenderFns:[]},(function(e){o(890)}),null,null);t.default=r.exports},670:function(e,t,o){o.r(t);var i=o(341),n=o.n(i),r=o(7)(n.a,{render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("view",[e.bookInfo?o("view",{staticClass:"freeLibrary_book",attrs:{eventid:"1_0"},on:{click:e.handleClickBook}},[o("book-cover",{attrs:{"custom-selector":"freeLibrary_book_cover",src:e.bookInfo.cover,width:72,mpcomid:"0"}}),e._v(" "),o("view",{staticClass:"freeLibrary_book_meta"},[o("view",{staticClass:"freeLibrary_book_meta_title"},[e._v("\n                "+e._s(e.bookInfo.title)+"\n            ")]),e._v(" "),o("view",{staticClass:"freeLibrary_book_meta_author"},[e._v("\n                "+e._s(e.bookInfo.author)+"\n            ")]),e._v(" "),e.bookStat?o("view",{staticClass:"freeLibrary_book_meta_stats"},[o("span",{staticClass:"freeLibrary_book_meta_stats_count"},[e._v(e._s(e.formattedBookStat))]),e._v(" "),o("span",{staticClass:"freeLibrary_book_meta_stats_postfix"},[e._v("人在读")])]):e._e()])],1):e._e(),e._v(" "),e.bookInfo?o("button",{staticClass:"freeLibrary_button",attrs:{"hover-class":"wr_commonActive","open-type":e.freeLibraryButtonType,"app-parameter":e.scheme,eventid:"1_1"},on:{click:function(t){t.stopPropagation(),e.handleTap(t)},error:e.launchAppFailed}},[e._v("\n        免费领取10本好书\n    ")]):e._e()],1)},staticRenderFns:[]},(function(e){o(892)}),null,null);t.default=r.exports},848:function(e,t){},852:function(e,t){},854:function(e,t){},856:function(e,t){},858:function(e,t){},860:function(e,t){},864:function(e,t){},866:function(e,t){},868:function(e,t){},870:function(e,t){},872:function(e,t){},874:function(e,t){},876:function(e,t){},878:function(e,t){},880:function(e,t){},882:function(e,t){},884:function(e,t){},886:function(e,t){},888:function(e,t){},890:function(e,t){},892:function(e,t){},894:function(e,t){},896:function(e,t){},898:function(e,t){},900:function(e,t){},902:function(e,t){},904:function(e,t){},906:function(e,t){}},[[597,"common/manifest","common/vendor","common/protos","common/components","common/apis","common/others"]]]);