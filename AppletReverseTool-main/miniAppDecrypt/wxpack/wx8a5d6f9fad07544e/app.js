require("@babel/runtime/helpers/Arrayincludes"),require("./common/manifest.js"),require("./common/vendor.js"),require("./common/apis.js"),require("./common/others.js"),(global.webpackJsonpMpvue=global.webpackJsonpMpvue||[]).push([["app"],{557:function(e,o,n){n.r(o);var r=n(5),t=n.n(r),a=n(15),i=n(2),l=n(3),c=n(17),s=n.n(c),p=n(23),u=n.n(p),g=n(48),m=n.n(g),d=n(59),f=n.n(d),w=function(){function e(){m()(this,e)}return f()(e,null,[{key:"isOBJ",value:function(e){return"object"===(void 0===e?"undefined":u()(e))&&!!e}},{key:"isOBJByType",value:function(e,o){return Object.prototype.toString.call(e)==="[object "+(o||"Object")+"]"}},{key:"isEmpty",value:function(o){return null===o||!e.isOBJByType(o,"Number")&&!o}},{key:"processStackMsg",value:function(e){var o=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),n=e.toString();return o.indexOf(n)<0&&(o=n+"@"+o),o}},{key:"processError",value:function(o){try{return o.stack?{msg:e.processStackMsg(o),rowNum:o.lineNumber,colNum:o.columnNumber,target:"MiniTarget"+(o.route?": "+o.route:"")}:o.name&&o.message&&o.description?{msg:s()(o)}:o}catch(e){return o}}}]),e}(),v=n(74),x=n.n(v),y=n(66),h={onLaunch:function(e){console.log("app on launch options:",e);var o=l.default.getUser();-1===y.default.compareVersion(o.SDKVersion,"1.7.3")&&setTimeout((function(){i.default.reportKVLog({itemname:"Wp_app_unsupported"}),wx.redirectTo({url:"/pages/incompatible/main"})}),600);var n="";o&&o.appversion&&(n=o.appversion.trim()),wx.cloud?o&&o.cloudTestEnv?(wx.cloud.init({env:{functions:"weread-c9k5c"}}),console.log("小程序云开发环境: Test")):wx.cloud.init():console.error("云函数初始化失败，wx.cloud 不存在"),x.a.config("https://390f616664bc4549ba3633c49e294de3@report.url.cn/sentry/1465",{release:n,environment:"dev1.0.0"===n?"development":"production",allowDuplicates:!0,sampleRate:.2}).install(),x.a.setUserContext({vid:o.vid,nickName:o.name,openid:o.openid,province:o.province}),wx.onMemoryWarning&&wx.onMemoryWarning((function(){i.default.reportKVLog({itemname:"Wp_memory_warning"});var e=getCurrentPages();if(e&&e.length>0){var o=e[e.length-1].route;console.warn("[onMemoryWarning]",o);var n=o.split("/");n[1]&&i.default.reportKVLog({itemname:"Wp_memory_warning_"+n[1]})}}))},onShow:function(){console.log("app onShow")},onHide:function(){console.log("app onHide");var e=getCurrentPages();if(e&&e.length){var o=e[e.length-1];o&&o.route&&o.route.includes("pages/reader")&&o.options&&o.options.bookId&&(console.log("save shouldRecoverReader bookId:",o.options.bookId),a.default.setStorageSync("shouldRecoverReader",{bookId:o.options.bookId}))}},onError:function(e){try{if(!this.shouldFilterError(e)){var o=null;if("string"==typeof e){var n=e.split("\n");n.length>2&&["appServiceSDKScriptError","thirdScriptError","webviewSDKScriptError"].indexOf(n[0])>-1&&(o=new Error(n[0]+": "+n[2]),n.shift(),n.shift(),n.shift(),o.stack=n.join("\n"))}else e instanceof Error&&((o=Error(e.message)).fileName=e.route,o.stack=e.stack);o&&x.a.captureException(o)}}catch(e){console.error(e)}console.log("onError",e)},onPageNotFound:function(e){i.default.monitor({action:"global_pageNotFound",code:500}),wx.redirectTo({url:"/pages/index/main"})},methods:{reportAppOnline:function(){i.default.reportKVLog({itemname:"Wp_App_Online"}),setInterval((function(){i.default.reportKVLog({itemname:"Wp_App_Online"})}),6e5)},shouldFilterError:function(e){var o=(w.isOBJ(e)?w.processError(e):{msg:e}).msg;return!!(o.includes("Failed get storage group")||o.includes("removeGlobalStorage:fail")||o.includes("setBackgroundAudioState")||o.includes("getMenuButtonBoundingClientRect")||o.includes("找不到playerid")||o.includes("10.206.30.80"))}}},M=n(7)(h,null,(function(e){n(671)}),null,null).exports,b=n(49),k=function(){function e(){m()(this,e),this.console={log:console.log,info:console.info,warn:console.warn,error:console.error},wx.getLogManager&&(this.wxlogManager=wx.getLogManager({level:1})),wx.getRealtimeLogManager&&(this.wxRealtimeLogManager=wx.getRealtimeLogManager()),this._overwriteConsole()}return f()(e,[{key:"_overwriteConsole",value:function(){var e=this;console&&(console.log=function(){var o,n,r;(o=e.console).log.apply(o,arguments),e.wxlogManager&&(n=e.wxlogManager).log.apply(n,arguments),e.wxRealtimeLogManager&&(r=e.wxRealtimeLogManager).info.apply(r,arguments)},console.info=function(){var o,n,r;(o=e.console).info.apply(o,arguments),e.wxlogManager&&(n=e.wxlogManager).info.apply(n,arguments),e.wxRealtimeLogManager&&(r=e.wxRealtimeLogManager).info.apply(r,arguments)},console.warn=function(){var o,n,r;(o=e.console).warn.apply(o,arguments),e.wxlogManager&&(n=e.wxlogManager).warn.apply(n,arguments),e.wxRealtimeLogManager&&(r=e.wxRealtimeLogManager).warn.apply(r,arguments)},console.error=function(){var o,n,r;(o=e.console).error.apply(o,arguments),e.wxlogManager&&(n=e.wxlogManager).warn.apply(n,arguments),e.wxRealtimeLogManager&&(r=e.wxRealtimeLogManager).error.apply(r,arguments)})}}]),e}();t.a.config.productionTip=!1,t.a.config.errorHandler=function(e,o){o&&o.$mp&&o.$mp.page&&o.$mp.page.route&&(e.route=o.$mp.page.route),x.a.setTagsContext({source:"script"}),x.a.captureException(e,{level:"error"}),console.error("[全局异常捕获]",e)},M.mpType="app",t.a.prototype.$store=b.default,new t.a(M).$mount(),new k},671:function(e,o){}},[[557,"common/manifest","common/vendor","common/apis","common/others"]]]);