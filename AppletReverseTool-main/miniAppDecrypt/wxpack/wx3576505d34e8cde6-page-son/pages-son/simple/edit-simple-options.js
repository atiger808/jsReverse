(global.webpackJsonp=global.webpackJsonp||[]).push([["pages-son/simple/edit-simple-options"],{"4cf5":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={dkLoading:function(){return n.e("components/dk-loading/dk-loading").then(n.bind(null,"4a40"))},dkUpload:function(){return Promise.all([n.e("common/vendor"),n.e("components/dk-upload/dk-upload")]).then(n.bind(null,"77ab"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"5905"))},uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"83fd"))},dkSubmitBtn:function(){return Promise.all([n.e("common/vendor"),n.e("components/dk-submit-btn/dk-submit-btn")]).then(n.bind(null,"e16e"))},yyPrivacyPopup:function(){return n.e("components/yy-privacy-popup/yy-privacy-popup").then(n.bind(null,"cedb"))}},o=function(){var e=this,t=(e.$createElement,e._self._c,e.__map(e.edit_join,(function(t,n){return{$orig:e.__get_orig(t),m0:3===e.media_type&&0===t.media_type?e.playerCover(t):null,m1:3===e.media_type&&0!==t.media_type&&1===t.media_type?e.playerCover(t):null,a0:{"background-color":t.edit?"#f7f7f7":"none"},a1:{"background-color":t.edit?"#f7f7f7":"none"}}})));e._isMounted||(e.e0=function(t,n){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];var a=i[i.length-1].currentTarget.dataset,r=a.eventParams||a["event-params"];return n=r.index,e.uploadSuccess(t,n,"thumb")},e.e1=function(t,n){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];var a=i[i.length-1].currentTarget.dataset,r=a.eventParams||a["event-params"];return n=r.index,e.uploadSuccess(t,n,"sign_video")},e.e2=function(t,n){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];var a=i[i.length-1].currentTarget.dataset,r=a.eventParams||a["event-params"];return n=r.index,e.videoDetail(n,t)}),e.$mp.data=Object.assign({},{$root:{l0:t}})},a=[]},7085:function(e,t,n){},9840:function(e,t,n){"use strict";n.r(t);var i=n("d9e5"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t.default=o.a},b69e:function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("d74d"),i(n("3240"));var o=i(n("cb84"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n("3223").default,n("df3c").createPage)},cb84:function(e,t,n){"use strict";n.r(t);var i=n("4cf5"),o=n("9840");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("cfb9");var r=n("828b"),u=Object(r.a)(o.default,i.b,i.c,!1,null,null,null,!1,i.a,void 0);t.default=u.exports},cfb9:function(e,t,n){"use strict";var i=n("7085");n.n(i).a},d9e5:function(e,t,n){"use strict";(function(e){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("7eb4")),a=i(n("af34")),r=i(n("7ca3")),u=i(n("ee10")),d=n("ae87");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={data:function(){return{loading:!0,media_type:void 0,payload:{activity_id:void 0,state:2,page:1},edit_join:[]}},methods:{playerCover:function(e){return e.sign_video&&e.sign_video.url?e.sign_video.cover?e.sign_video.cover:e.sign_video.url+"?"+e.sign_video.img:e.sign_music?this.vuex_qiniu.domain+"/qiniu/default/other/default_music.png":e.thumb.length?e.thumb[0]:this.vuex_qiniu.domain+"/qiniu/default/other/default_image.png"},videoDetail:function(e,t){var n=t.duration,i=this.edit_join[e];i.sign_video={url:void 0,img:void 0,duration:Math.floor(n)},this.$set(this.edit_join,e,i)},uploadSuccess:function(e,t,n){if("thumb"===n)this.edit_join[t][n].push(e);else{var i=this.edit_join[t],o=(0,d.getCover)(i.sign_video);i.sign_video.img=o[0].split("?")[1],i.sign_video.url=e,this.$set(this.edit_join,t,i)}},handleEdit:function(t){var n=this;return(0,u.default)(o.default.mark((function i(){var a;return o.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!t.edit){i.next=12;break}return e.showLoading({title:"内容检测中...",mask:!0}),i.next=4,n.$u.api.verify({type:1,content1:t.name});case 4:return(a=s({},t)).activity_id=n.payload.activity_id,i.next=8,n.$u.api.signUp({type:2,activity_id:n.payload.activity_id,id:a.id,thumb:a.thumb,name:a.name,number:a.number,sign_video:a.sign_video,group_id:a.group_id});case 8:t.edit=!1,n.$u.toast("操作成功"),i.next=14;break;case 12:n.edit_join.forEach((function(e){e.edit=!1})),t.edit=!0;case 14:case"end":return i.stop()}}),i)})))()},handleRefuse:function(t,n){var i=this;e.showModal({title:"提示",content:"您确定删除该选项吗？",success:function(e){e.confirm&&i.$u.api.joinExamine({join_id:t.id,state:3}).then((function(e){i.$u.toast("操作成功"),i.edit_join.splice(n,1)}))}})},submit:function(){this.$u.route({url:"/pages-son/simple/add-simple-options",params:{activity_id:this.payload.activity_id,media_type:this.media_type}})},getPlayers:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$u.api.joinList(this.payload).then((function(n){var i;n.forEach((function(e){e.edit=!1,e.media_type=e.sign_video&&e.sign_video.url?1:0})),t?e.edit_join=n:(i=e.edit_join).push.apply(i,(0,a.default)(n)),e.loading=!1}))}},onLoad:function(t){var n=this,i=t.edit_activity_id,o=t.media_type;this.payload.activity_id=i,this.media_type=Number(o),this.getPlayers(),e.$on("add-options",(function(){n.payload.page=1,n.getPlayers(!0)}))},onUnload:function(){e.$off("add-options")},onReachBottom:function(){this.payload.page++,this.getPlayers()},onPullDownRefresh:function(){this.payload.page=1,this.getPlayers(!0),setTimeout((function(){e.stopPullDownRefresh()}),1500)}};t.default=l}).call(this,n("df3c").default)}},[["b69e","common/runtime","common/vendor"]]]);