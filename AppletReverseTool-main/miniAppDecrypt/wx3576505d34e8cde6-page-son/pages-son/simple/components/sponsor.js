(global.webpackJsonp=global.webpackJsonp||[]).push([["pages-son/simple/components/sponsor"],{"1d7f":function(n,t,e){},4239:function(n,t,e){"use strict";var o=e("1d7f");e.n(o).a},"5caf":function(n,t,e){"use strict";(function(n){var o=e("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(e("7eb4")),r=o(e("ee10")),s=e("ae87"),u={props:{value:{type:Object,default:function(){}},scan_code:{type:String,default:void 0}},computed:{formatName:function(){return function(n){return n.length>=16?n.slice(0,16)+"...":n}}},watch:{value:function(n){this.sponsor=n}},data:function(){return{showModal:!1,sponsor:{name:"微信用户"}}},methods:{uploadCode:function(){var t=this;return(0,r.default)(a.default.mark((function e(){var o,r,u,c,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.chooseImage)();case 2:if(o=e.sent,r=t.vuex_file_handling.image_compress,u=t.vuex_file_handling.image_examine,c=2==u?2:"",c+=1==r?"":"_ys"+r,i=o[0],1!=r){e.next=14;break}return setTimeout((function(){n.showLoading({title:"压缩中。。。",mask:!0})}),300),e.next=12,t.$refs.compress.compress({src:o[0]});case 12:i=e.sent,setTimeout((function(){n.hideLoading()}),100);case 14:return e.t0=t,e.t1=t.sponsor,e.next=18,t.uploadImg(i,"vote"+c);case 18:e.t2=e.sent,e.t0.$set.call(e.t0,e.t1,"scan_code",e.t2),t.$u.toast("上传成功");case 21:case"end":return e.stop()}}),e)})))()},toSetting:function(){this.$emit("toMusicSetting")},toSponsorSetting:function(){var t=this;n.showActionSheet({itemList:["展示头像昵称","不展示头像昵称"],success:function(n){var e=n.tapIndex;t.sponsor.is=e+1}})},myUpload:function(n){var t=this;return(0,r.default)(a.default.mark((function e(){var o,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.data,o=n.path,e.next=3,t.uploadImg(o,"avatar");case 3:r=e.sent,t.$set(t.sponsor,"head",r);case 5:case"end":return e.stop()}}),e)})))()},changeHead:function(){this.$refs.avatar.fChooseImg(0,{selWidth:"300rpx",selHeight:"300rpx",expWidth:"260rpx",expHeight:"260rpx",inner:!0})},chooseavatar:function(n){var t=this;return(0,r.default)(a.default.mark((function e(){var o,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.detail.avatarUrl,e.next=3,t.uploadImg(o,"avatar");case 3:r=e.sent,t.$set(t.sponsor,"head",r);case 5:case"end":return e.stop()}}),e)})))()},updateAvatar:function(){var n=this;return(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,s.chooseImage)(1,["original","compressed"]).then((function(t){n.$u.route({url:"/pages-son/one/index/cropper",params:{tempFilePath:t[0],destWidth:160,destHeight:160,lockRatio:!0,type:"avatar"}})}));case 1:case"end":return t.stop()}}),t)})))()}},onLoad:function(){},updated:function(){this.$emit("input",this.sponsor)}};t.default=u}).call(this,e("df3c").default)},"994a":function(n,t,e){"use strict";e.r(t);var o=e("5caf"),a=e.n(o);for(var r in o)["default"].indexOf(r)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(r);t.default=a.a},c303:function(n,t,e){"use strict";e.r(t);var o=e("e442"),a=e("994a");for(var r in a)["default"].indexOf(r)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(r);e("4239");var s=e("828b"),u=Object(s.a)(a.default,o.b,o.c,!1,null,null,null,!1,o.a,void 0);t.default=u.exports},e442:function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return o}));var o={uAvatar:function(){return e.e("node-modules/uview-ui/components/u-avatar/u-avatar").then(e.bind(null,"05b3"))},uIcon:function(){return e.e("node-modules/uview-ui/components/u-icon/u-icon").then(e.bind(null,"83fd"))},dkBtn:function(){return e.e("components/dk-btn/dk-btn").then(e.bind(null,"9b87"))},dkAvatar:function(){return e.e("components/dk-avatar/dk-avatar").then(e.bind(null,"1252"))},dkInputModal:function(){return e.e("components/dk-input-modal/dk-input-modal").then(e.bind(null,"f300"))},dkCompress:function(){return e.e("components/dk-compress/dk-compress").then(e.bind(null,"d4d9"))}},a=function(){var n=this,t=(n.$createElement,n._self._c,n.formatName(n.sponsor.name));n._isMounted||(n.e0=function(t){n.showModal=!0},n.e1=function(t){n.showModal=!1},n.e2=function(t){n.showModal=!1}),n.$mp.data=Object.assign({},{$root:{a0:{"font-weight":"bold"},m0:t,a1:{"font-weight":"bold"}}})},r=[]}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["pages-son/simple/components/sponsor-create-component",{"pages-son/simple/components/sponsor-create-component":function(n,t,e){e("df3c").createComponent(e("c303"))}},[["pages-son/simple/components/sponsor-create-component"]]]);