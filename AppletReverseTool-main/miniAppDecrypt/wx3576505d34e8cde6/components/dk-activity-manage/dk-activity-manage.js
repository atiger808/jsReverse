(global.webpackJsonp=global.webpackJsonp||[]).push([["components/dk-activity-manage/dk-activity-manage"],{"10e3":function(t,e,n){"use strict";var a=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("7eb4")),r=a(n("ee10")),u=n("942a"),o=n("ca4b"),c=n("3544"),s={name:"activity-manage",props:{activity_id:{type:Number,default:void 0},sid:{type:String,default:void 0},activity_type:{type:Number,default:void 0},vote_type:{type:Number,default:void 0},type:{type:Number,default:100},mode:{type:String,default:""},roster_config:{type:Object,default:function(){}},state:{type:[String,Number],default:function(){}}},watch:{state:{immediate:!0,handler:function(t){console.time("state-time-out"),this.activityStatus=t,console.timeEnd("state-time-out")}},show:{immediate:!0,handler:function(t){this.isCheck&&(this.isCheck=!1,this.show=!0)}}},data:function(){return{show:!1,isCheck:!1,manageBtn:o.manageBtn,ACTIVITY_VOTE:c.ACTIVITY_VOTE,ACTIVITY_PARAMS:c.ACTIVITY_PARAMS,ACTIVITY_QUESTION:c.ACTIVITY_QUESTION,activityStatus:1}},methods:{handleVoteSetting:function(t){var e=this;return(0,r.default)(i.default.mark((function n(){return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t,n.next="start"===n.t0?3:"end"===n.t0?11:"home"===n.t0?19:"group"===n.t0?21:"more-setting"===n.t0?23:"copy"===n.t0?25:"manage"===n.t0?27:"notice"===n.t0?29:"roster"===n.t0?31:"ranking"===n.t0?33:35;break;case 3:return n.next=5,(0,u.showModel)("提示","是否开启活动");case 5:if(n.sent){n.next=8;break}return n.abrupt("return");case 8:return(0,u.showLoading)("开启中..."),e.$u.api.votingManageState({id:e.activity_id,state:1}).then((function(t){e.activityStatus=1,e.show=!1,(0,u.hideLoading)("开启成功"),e.$emit("event","refresh")})),n.abrupt("break",35);case 11:return n.next=13,(0,u.showModel)("提示","是否暂停活动");case 13:if(n.sent){n.next=16;break}return n.abrupt("return");case 16:return(0,u.showLoading)("暂停中..."),e.$u.api.votingManageState({id:e.activity_id,state:2}).then((function(t){e.activityStatus=2,e.show=!1,(0,u.hideLoading)("暂停成功"),e.$emit("event","refresh")})),n.abrupt("break",35);case 19:return e.$u.route({url:"pages/index/index",type:"switchTab"}),n.abrupt("break",35);case 21:return e.$u.route({url:"pages-son/one/index/group-manage",params:{activity_id:e.activity_id,vote_type:e.vote_type}}),n.abrupt("break",35);case 23:return e.$u.route({url:"/pages-son/one/vote/more-setting",params:{activity_id:e.activity_id}}),n.abrupt("break",35);case 25:return e.activity_type===c.ACTIVITY_QUESTION?(e.$emit("copy"),e.show=!1):e.isCheck=!0,n.abrupt("break",35);case 27:return e.$u.route({url:"/pages-son/vote/manage",params:{id:e.activity_id,sid:e.sid}}),n.abrupt("break",35);case 29:return e.$u.route({url:"/pages-son/vote/notice",params:{id:e.activity_id}}),n.abrupt("break",35);case 31:return e.$u.route({url:"/pages-son/one/vote/preset-list",params:{id:e.activity_id,mode:e.mode,type:1}}),n.abrupt("break",35);case 33:return e.$u.route({url:"/pages-son/one/vote/ranking-list",params:{id:e.activity_id}}),n.abrupt("break",35);case 35:case"end":return n.stop()}}),n)})))()},handleAction:function(t){var e=this;return(0,r.default)(i.default.mark((function n(){return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,u.showModel)("提示","确定执行该操作吗");case 2:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:n.t0=t,n.next="edit"===n.t0?8:"clear"===n.t0?13:"del"===n.t0?18:33;break;case 8:if(200!=e.type){n.next=11;break}return e.$u.route({url:"/pages-son/multiple/multiple-create",params:{edit_activity_id:e.activity_id}}),n.abrupt("return");case 11:return e.$u.route({url:c.ACTIVITY_PARAMS[e.activity_type].edit_url,params:{edit_activity_id:e.activity_id}}),n.abrupt("break",33);case 13:if(e.activity_type!==c.ACTIVITY_QUESTION){n.next=16;break}return e.$u.api.solitaireReset({id:e.activity_id}).then((function(t){e.$u.toast("操作成功"),e.$emit("event","refresh"),e.show=!1})),n.abrupt("return");case 16:return e.$u.api.reset({id:e.activity_id}).then((function(t){e.$u.toast("操作成功"),e.$emit("event","refresh"),e.show=!1})),n.abrupt("break",33);case 18:if(200!=e.type){n.next=22;break}return n.next=21,e.$u.api.newFormActivityDel({id:e.activity_id});case 21:return n.abrupt("return");case 22:n.t1=e.activity_type,n.next=n.t1===c.ACTIVITY_VOTE?25:n.t1===c.ACTIVITY_QUESTION?28:31;break;case 25:return n.next=27,e.$u.api.delVote({id:e.activity_id});case 27:return n.abrupt("break",31);case 28:return n.next=30,e.$u.api.formActivityDel({id:e.activity_id});case 30:return n.abrupt("break",31);case 31:return e.$u.route({url:"pages/index/index",type:"switchTab"}),n.abrupt("break",33);case 33:case"end":return n.stop()}}),n)})))()}}};e.default=s},3635:function(t,e,n){},"3adb":function(t,e,n){"use strict";n.r(e);var a=n("bb90"),i=n("8860");for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("a878");var u=n("828b"),o=Object(u.a)(i.default,a.b,a.c,!1,null,null,null,!1,a.a,void 0);e.default=o.exports},8860:function(t,e,n){"use strict";n.r(e);var a=n("10e3"),i=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e.default=i.a},a878:function(t,e,n){"use strict";var a=n("3635");n.n(a).a},bb90:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,"5409"))},uniNoticeBar:function(){return n.e("uni_modules/uni-notice-bar/components/uni-notice-bar/uni-notice-bar").then(n.bind(null,"27f9"))},uButton:function(){return n.e("node-modules/uview-ui/components/u-button/u-button").then(n.bind(null,"66c1"))},uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,"83fd"))},dkCopy:function(){return n.e("components/dk-copy/dk-copy").then(n.bind(null,"e9c2"))}},i=function(){var t=this;t.$createElement,t._self._c,t._isMounted||(t.e0=function(e){t.show=!1},t.e1=function(e){t.show=!1})},r=[]}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["components/dk-activity-manage/dk-activity-manage-create-component",{"components/dk-activity-manage/dk-activity-manage-create-component":function(t,e,n){n("df3c").createComponent(n("3adb"))}},[["components/dk-activity-manage/dk-activity-manage-create-component"]]]);