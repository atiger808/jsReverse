(global.webpackJsonp=global.webpackJsonp||[]).push([["components/dk-user-info/dk-user-info"],{1002:function(n,e,t){"use strict";t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return o})),t.d(e,"a",(function(){return r}));var r={uPopup:function(){return t.e("node-modules/uview-ui/components/u-popup/u-popup").then(t.bind(null,"5409"))},uIcon:function(){return t.e("node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"83fd"))},dkBtn:function(){return t.e("components/dk-btn/dk-btn").then(t.bind(null,"9b87"))},yyPrivacyPopup:function(){return t.e("components/yy-privacy-popup/yy-privacy-popup").then(t.bind(null,"cedb"))}},a=function(){var n=this,e=(n.$createElement,n._self._c,n.show&&n.form.avatarUrl?n.defaultAvatar(n.form.avatarUrl):null);n._isMounted||(n.e0=function(e){n.show=!1}),n.$mp.data=Object.assign({},{$root:{m0:e}})},o=[]},2146:function(n,e,t){},6862:function(n,e,t){"use strict";var r=t("2146");t.n(r).a},"867d":function(n,e,t){"use strict";t.r(e);var r=t("1002"),a=t("f7cc");for(var o in a)["default"].indexOf(o)<0&&function(n){t.d(e,n,(function(){return a[n]}))}(o);t("6862");var u=t("828b"),i=Object(u.a)(a.default,r.b,r.c,!1,null,null,null,!1,r.a,void 0);e.default=i.exports},c644:function(n,e,t){"use strict";(function(n){var r=t("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(t("7eb4")),o=r(t("ee10")),u=t("ae87"),i={data:function(){return{show:!1,i_known_or_upload:!1,form:{nickName:void 0,avatarUrl:void 0}}},methods:{close:function(){var e=this;this.show=!1,this.i_known_or_upload||n.showModal({content:"æ‚¨æœªå®Œå–„ç”¨æˆ·ä¿¡æ¯ï¼Œé¿å…å‡ºç°å¤§é‡çš„ç°è‰²å¤´åƒï¼Œä¸ºäº†é™ä½è¯¥é£é™©ï¼Œå¹³å°å°†ä¸ºä½ ç”Ÿæˆé»˜è®¤å¤´åƒåŠæ˜µç§°",cancelText:"çŸ¥é“äº†",confirmText:"ç»§ç»­å®Œå–„",success:function(n){n.confirm?e.ltSDKVersion()?e.updateUserInfo():e.show=!0:e.i_known_or_upload=!0}})},showFunc:function(){var n=arguments,e=this;return(0,o.default)(a.default.mark((function t(){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.length>0&&void 0!==n[0]&&n[0],!e.vuex_privacy){t.next=4;break}return e.$pribacy({success:function(){e.showFunc(r)}}),t.abrupt("return",!1);case 4:return t.abrupt("return",new Promise((function(n,t){console.log(e.i_known_or_upload,e.show),e.i_known_or_upload&&!r?(console.log("æˆåŠŸå›è°ƒ"),n()):(e.ltSDKVersion()?e.updateUserInfo():e.show=!e.show,console.log("å¤±è´¥å›è°ƒ"),t())})));case 5:case"end":return t.stop()}}),t)})))()},updateUserInfo:function(){var n=this;return(0,o.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.getUserProfile)();case 3:return t=e.sent,e.next=6,n.$u.api.update({userInfo:t});case 6:n.i_known_or_upload=!0,n.$u.vuex("vuex_user.nickname",t.nickName),n.$u.vuex("vuex_user.avatar_url",t.avatarUrl),n.$u.toast("æ›´æ–°æˆåŠŸ"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.errMsg&&n.close();case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},formSubmit:function(){var n=this;return(0,o.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.form.nickName,n.form.avatarUrl){e.next=3;break}return e.abrupt("return",n.$u.toast("è¯·æ›´æ–°å¤´åƒ"));case 3:if(t){e.next=5;break}return e.abrupt("return",n.$u.toast("è¯·è¾“å…¥æ˜µç§°"));case 5:return e.prev=5,e.next=8,n.uploadImg(n.form.avatarUrl,"avatar",".jpg",!1);case 8:r=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),r=n.form.avatarUrl;case 14:return e.next=16,n.$u.api.update({userInfo:{nickName:t,avatarUrl:r}});case 16:n.show=!1,n.i_known_or_upload=!0,n.$u.toast("æ›´æ–°æˆåŠŸ"),n.$u.vuex("vuex_user.nickname",t),n.$u.vuex("vuex_user.avatar_url",r);case 21:case"end":return e.stop()}}),e,null,[[5,11]])})))()},chooseavatar:function(n){var e=n.detail.avatarUrl;this.form.avatarUrl=e},updateAvatar:function(){var n=this;return(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,u.chooseImage)(1,["original","compressed"]).then((function(e){n.$u.route({url:"/pages-son/one/index/cropper",params:{tempFilePath:e[0],destWidth:160,destHeight:160,lockRatio:!0,type:"avatar"}})}));case 1:case"end":return e.stop()}}),e)})))()},updateAvatarUrl:function(n){this.form.avatarUrl=n,console.log(this.form,1111,n)},clickAvatar:function(){n.showToast({title:'é€‰æ‹©ä¸‹æ–¹ğŸ‘‡"ç”¨å¾®ä¿¡å¤´åƒ"',icon:"none",duration:5e3})}},onReady:function(){var n;"å¾®ä¿¡ç”¨æˆ·"!==(null===(n=this.vuex_user)||void 0===n?void 0:n.nickname)&&(this.form.avatarUrl=this.form.avatarUrl||this.vuex_user.avatar_url,this.form.nickName=this.form.nickName||this.vuex_user.nickname),this.i_known_or_upload=this.form.nickName&&"å¾®ä¿¡ç”¨æˆ·"!==this.form.nickName},onPageShow:function(){var n;"å¾®ä¿¡ç”¨æˆ·"!==(null===(n=this.vuex_user)||void 0===n?void 0:n.nickname)&&(this.form.avatarUrl=this.form.avatarUrl||this.vuex_user.avatar_url,this.form.nickName=this.form.nickName||this.vuex_user.nickname),this.i_known_or_upload=this.form.nickName&&"å¾®ä¿¡ç”¨æˆ·"!==this.form.nickName}};e.default=i}).call(this,t("df3c").default)},f7cc:function(n,e,t){"use strict";t.r(e);var r=t("c644"),a=t.n(r);for(var o in r)["default"].indexOf(o)<0&&function(n){t.d(e,n,(function(){return r[n]}))}(o);e.default=a.a}}]),(global.webpackJsonp=global.webpackJsonp||[]).push(["components/dk-user-info/dk-user-info-create-component",{"components/dk-user-info/dk-user-info-create-component":function(n,e,t){t("df3c").createComponent(t("867d"))}},[["components/dk-user-info/dk-user-info-create-component"]]]);